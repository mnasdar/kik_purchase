import{$ as e}from"./jquery-2823516c.js";import{S as b}from"./sweetalert2.all-5f085df9.js";import{A as p}from"./autonumeric-input-7baea888.js";import"./_commonjsHelpers-725317a4.js";const d=new Map;function g(t,a={}){const s=e(t);if(!s.length)return;const u={...{digitGroupSeparator:".",decimalCharacter:",",decimalPlaces:0,currencySymbol:"Rp. ",currencySymbolPlacement:"p",unformatOnSubmit:!0,modifyValueOnWheel:!1,negativeSignAllowed:!1,minimumValue:"0"},...a},l=new p(s[0],u);d.set(t,l)}function x(t,a,s){const c=e(t),u=e(a),l=e(s);if(!c.length||!u.length||!l.length)return;const f=d.get(t),n=d.get(a),i=d.get(s);if(!f||!n||!i)return;function r(){const o=f.getNumber(),h=n.getNumber(),m=o*h;i.set(m)}c.on("input",r),u.on("input",r),r()}e(function(){const t=e("#form-create"),a=t.find('button[type="submit"]'),s=a.find(".loader"),c=a.find("span:last"),u=new FormData(t[0]),l=f(u);function f(n){const i=[];for(const[r,o]of n.entries())o instanceof File?i.push([r,o.name||""]):i.push([r,o]);return JSON.stringify(i)}t.on("input change","input, select, textarea",function(){const n=new FormData(t[0]),i=f(n);a.prop("disabled",i===l)}),a.prop("disabled",!0),t.on("submit",function(n){n.preventDefault();const i=t.attr("action"),r=t.attr("method")||"POST",o=new FormData(this);o.set("unit_price",p.getNumber("#inputUnitPrice")),o.set("quantity",p.getNumber("#inputQuantity")),o.set("amount",p.getNumber("#inputAmount")),b.fire({title:"Apakah Anda yakin?",text:"Data akan disimpan ke sistem.",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, simpan!",cancelButtonText:"Batal",customClass:{confirmButton:"btn bg-primary text-white w-xs me-2 mt-2",cancelButton:"btn bg-danger text-white w-xs mt-2"},buttonsStyling:!1}).then(function(h){h.isConfirmed&&(t.find('p[id^="error-"]').text(""),s.removeClass("hidden"),c.addClass("opacity-50"),e.ajax({url:i,method:r,data:o,contentType:!1,processData:!1,success:function(m){b.fire({title:"Sukses!",text:"Data berhasil disimpan.",icon:"success",customClass:{confirmButton:"btn bg-primary text-white w-xs mt-2"},buttonsStyling:!1}).then(()=>{window.location.href=m.redirect||"/index"})},error:function(m){if(m.status===422){const y=m.responseJSON.errors;Object.keys(y).forEach(w=>{e(`#error-${w}`).text(y[w][0])})}else b.fire("Gagal","Terjadi kesalahan. Silakan coba lagi.","error")},complete:function(){s.addClass("hidden"),c.removeClass("opacity-50")}}))})}),e("#btn-cancel").on("click",function(){const n=e(this).data("url");n&&(window.location.href=n)})});e(document).ready(function(){g("#inputUnitPrice"),g("#inputQuantity",{currencySymbol:""}),g("#inputAmount"),x("#inputUnitPrice","#inputQuantity","#inputAmount")});
