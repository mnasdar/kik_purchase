import{$ as i}from"./modal-handler-2823516c.js";import{f as l}from"./index-a4e39586.js";import{I as u}from"./id-7a0d5e4f.js";import{s as c}from"./index-88056f3d.js";import{s as m,a as d}from"./notification-d92c8c7c.js";import"./_commonjsHelpers-725317a4.js";import"./parse-c3570fb2.js";import"./notification-5f085df9.js";l.localize(u);i(document).ready(function(){p()});function p(){f(),b()}function f(){document.querySelectorAll(".date-picker-field").forEach(s=>{l(s,{dateFormat:"Y-m-d",locale:"id",altInput:!0,altFormat:"d-M-Y",allowInput:!0})})}function b(){const n=i("#bulk-edit-form");n.on("submit",function(s){s.preventDefault();const e=i('input[name="ids"]').val().split(",").filter(a=>a),r=i("#bulk_invoice_submitted_at").val(),t={};e.forEach(a=>{t[a]={invoice_submitted_at:r||null}});const o={ids:e,invoice_data:t};console.log("Updating invoices:",o),g(o,n)})}function g(n,s){const e=s.find('button[type="submit"]'),r=e.html();e.prop("disabled",!0).html('<i class="mgc_loader_2_line animate-spin"></i> Mengupdate...'),i.ajax({url:c("pengajuan.bulk-update"),method:"POST",contentType:"application/json",data:JSON.stringify(n),headers:{"X-CSRF-TOKEN":i('meta[name="csrf-token"]').attr("content")},success:function(t){console.log("Success response:",t),m(t.message||"Invoice berhasil diupdate!","success",2e3),setTimeout(()=>{window.location.href=t.redirect||c("pengajuan.index")},1500)},error:function(t){console.error("Error response:",t);let o="Gagal mengupdate invoice";t.responseJSON&&(t.responseJSON.message?o=t.responseJSON.message:t.responseJSON.errors&&(o=Object.values(t.responseJSON.errors).flat().join(", "))),d(o,"Error!")},complete:function(){e.prop("disabled",!1).html(r)}})}
