import{K as T,b as A,a as B}from"./gridjs.module-3ea5c5ab.js";import{$ as t}from"./modal-handler-2823516c.js";import"./parse-c3570fb2.js";import{G as H}from"./glightbox.min-3fffbd26.js";function K(c){return String(c).replace(/_/g," ").toLowerCase().replace(/\b\w/g,o=>o.toUpperCase())}function v(c=[],o=[],p=!0){return c.map(i=>{const f=[];return p&&f.push(i.checkbox??""),o.forEach(k=>{const u=k.id??null;f.push(u?i[u]??"":"")}),f})}function F({tableId:c,gridData:o=[],dataUrl:p=null,columns:i=[],limit:f=10,delay:k=200,buttonConfig:u=[],enableFilter:C=!1,excludeFilterKeys:E=["checkbox","number"],extraHandler:x=null,originalGridData:h=null,enableCheckbox:d=!0,onDataLoaded:m=null}){if(!t(c).length)return;h||(h=Array.isArray(o)?o.slice():[]);const a=`headerCheck-${c.replace("#","")}`,b=document.querySelector(c);t(b).data("originalGridData",h);let y;if(p)y=()=>fetch(p).then(e=>e.json()).then(e=>{if(typeof m=="function")try{m(e)}catch(n){console.error(n)}return v(e,i,d)});else{if(typeof m=="function")try{m(o)}catch(e){console.error(e)}y=v(o,i,d)}const w=[];d&&w.push({id:"checkbox",name:T(`<div class="form-check"><input type="checkbox" class="form-checkbox rounded text-primary" id="${a}"></div>`),width:"50px",sort:!1,formatter:e=>A("div",{innerHTML:e})}),w.push(...i.map(e=>{const n={id:e.id,name:e.name};return e.width&&(n.width=e.width),e.sort===!1&&(n.sort=!1),typeof e.formatter=="function"&&(n.formatter=r=>e.formatter(r)),n}));const $=new B({columns:w,pagination:{limit:f},search:!0,sort:!0,data:y});if(t(b).data("grid",$),$.render(b).on("ready",()=>{H({selector:".image-popup",title:!1})}),d&&(setTimeout(()=>{const e=`${c} input[type="checkbox"]`;t(document).on("change",`#${a}`,function(){const n=t(this).is(":checked");t(`${e}`).not(this).prop("checked",n).trigger("change")}),t(document).on("change",`${e}:not(#${a})`,function(){const n=t(`${e}:not(#${a})`),r=n.filter(":checked");if(t(`#${a}`).prop("checked",n.length===r.length),u.forEach(s=>{const l=t(s.selector);if(!l.length)return;let g=!1;switch(s.when){case"one":g=r.length===1;break;case"multiple":g=r.length>1;break;case"any":g=r.length>0;break}l.prop("disabled",!g),r.length===0?l.hide():l.show()}),r.length>0){const s=r.filter(function(){return t(this).data("has-barcode")==1}).length===r.length,l=r.filter(function(){return t(this).data("has-barcode")==0}).length===r.length;s?t(".btn-generated, .btn-scan").hide():l&&(t(".btn-generated, .btn-scan").show(),t(".btn-edit, .btn-delete").prop("disabled",!0))}typeof x=="function"&&x(r)})},k+50),u.forEach(e=>{const n=t(e.selector);n.length&&n.prop("disabled",!0).hide()})),C&&(h.length>0||o&&o.length>0)){const e=h.length?h:o,n=Object.keys(e[0]||{}),r=t("#filter-column");r.empty(),n.forEach(s=>{E.includes(s)||r.append(t("<option>",{value:s,text:K(s)}))})}return $}export{F as i};
