import{$ as t}from"./jquery-2823516c.js";import{a as k,b as s}from"./gridjs.module-3ea5c5ab.js";import{s as l}from"./index-88056f3d.js";import{t as f}from"./tippy.all-093076db.js";import{s as n,d as c}from"./notification-0e55581f.js";import"./_commonjsHelpers-725317a4.js";import"./parse-c3570fb2.js";import"./pembayaran-edit-5f085df9.js";let i=null;function u(e){const r=t("#detailInvoiceModal"),a=t("#detailInvoiceModalBackdrop"),o=t("#detailInvoiceModalContent");r.removeClass("hidden"),r.css("opacity","1"),setTimeout(()=>{a.css("opacity","1"),o.css({transform:"scale(1)",opacity:"1"})},10),t.ajax({url:l("dari-vendor.show",{dari_vendor:e}),method:"GET",success:function(d){v(d)},error:function(){c("Gagal memuat detail invoice","Error!"),m()}})}function m(){const e=t("#detailInvoiceModalBackdrop"),r=t("#detailInvoiceModalContent"),a=t("#detailInvoiceModal");e.css("opacity","0"),r.css({transform:"scale(0.95)",opacity:"0"}),setTimeout(()=>{a.addClass("hidden").css("opacity","0")},300)}function v(e){const r=`
        <div class="overflow-x-auto">
            <table class="w-full text-sm">
                <tbody>
                    <!-- PR Section -->
                    <tr class="bg-blue-50/30 dark:bg-blue-950/20 border-b border-slate-200 dark:border-slate-700">
                        <td colspan="2" class="px-4 py-2 font-bold text-blue-700 dark:text-blue-300">üìã PURCHASE REQUEST</td>
                    </tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition">
                        <td class="px-4 py-2.5">Request Type</td><td class="px-4 py-2.5 font-semibold">
                            ${e.pr_request_type}
                        </td>
                    </tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition">
                        <td class="px-4 py-2.5">PR Number</td><td class="px-4 py-2.5 font-semibold">
                            ${e.pr_number}
                        </td>
                    </tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Location</td><td class="px-4 py-2.5 font-semibold">${e.pr_location}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Classification</td><td class="px-4 py-2.5 font-semibold">${e.classification}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Approved Date</td><td class="px-4 py-2.5 font-semibold">${e.pr_approved_date}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Item Description</td><td class="px-4 py-2.5 font-semibold">${e.item_name}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">UOM</td><td class="px-4 py-2.5 font-semibold">${e.unit}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Quantity</td><td class="px-4 py-2.5 font-semibold">${e.pr_quantity}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Unit Price</td><td class="px-4 py-2.5 font-semibold">${e.pr_unit_price}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Amount</td><td class="px-4 py-2.5 font-semibold">${e.pr_amount}</td></tr>

                    <!-- PO Section -->
                    <tr class="bg-amber-50/30 dark:bg-amber-950/20 border-b border-slate-200 dark:border-slate-700"><td colspan="2" class="px-4 py-2 font-bold text-amber-700 dark:text-amber-300">üõí PURCHASE ORDER</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">PO Number</td><td class="px-4 py-2.5 font-bold text-primary">${e.po_number}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Supplier</td><td class="px-4 py-2.5 font-semibold">${e.supplier_name}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">PO Approved Date</td><td class="px-4 py-2.5 font-semibold">${e.po_approved_date}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Quantity</td><td class="px-4 py-2.5 font-semibold">${e.po_quantity}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Unit Price</td><td class="px-4 py-2.5 font-semibold">${e.po_unit_price}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Amount</td><td class="px-4 py-2.5 font-semibold">${e.po_amount}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Cost Saving</td><td class="px-4 py-2.5 font-semibold">${e.cost_saving}</td></tr>
                    
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA PR‚ÜíPO Target</td><td class="px-4 py-2.5 font-semibold">${e.sla_pr_to_po_target}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA PR‚ÜíPO Realisasi</td><td class="px-4 py-2.5 font-semibold">${e.sla_pr_to_po_realization}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA PR‚ÜíPO %</td><td class="px-4 py-2.5 ${e.sla_pr_to_po_percentage==="100%"?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"} font-bold">${e.sla_pr_to_po_percentage}</td></tr>

                    <!-- Onsite Section -->
                    <tr class="bg-red-50/30 dark:bg-red-950/20 border-b border-slate-200 dark:border-slate-700"><td colspan="2" class="px-4 py-2 font-bold text-red-700 dark:text-red-300">üìç ONSITE TRACKING</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Onsite Date</td><td class="px-4 py-2.5 font-semibold">${e.onsite_date}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA PO‚ÜíOnsite Target</td><td class="px-4 py-2.5 font-semibold">${e.sla_po_to_onsite_target}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA PO‚ÜíOnsite Realisasi</td><td class="px-4 py-2.5 font-semibold">${e.sla_po_to_onsite_realization}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA PO‚ÜíOnsite %</td><td class="px-4 py-2.5 ${e.sla_po_to_onsite_percentage==="100%"?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"} font-bold">${e.sla_po_to_onsite_percentage}</td></tr>

                    <!-- Invoice Section -->
                    <tr class="bg-slate-100/50 dark:bg-slate-900/30 border-b border-slate-200 dark:border-slate-700"><td colspan="2" class="px-4 py-2 font-bold text-slate-700 dark:text-slate-300">‚ÑπÔ∏è INVOICE</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Invoice Number</td><td class="px-4 py-2.5 font-semibold">${e.invoice_number}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Invoice Received At</td><td class="px-4 py-2.5 font-semibold">${e.invoice_received_at}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">SLA Invoice‚ÜíFinance Target</td><td class="px-4 py-2.5 font-semibold">${e.sla_invoice_to_finance_target}</td></tr>

                    <!-- Metadata -->
                    <tr class="bg-slate-100/50 dark:bg-slate-900/30 border-b border-slate-200 dark:border-slate-700"><td colspan="2" class="px-4 py-2 font-bold text-slate-700 dark:text-slate-300">‚ÑπÔ∏è Metadata</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Created By</td><td class="px-4 py-2.5 font-semibold">${e.created_by}</td></tr>
                    <tr class="border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition"><td class="px-4 py-2.5">Created At</td><td class="px-4 py-2.5 font-semibold">${e.created_at}</td></tr>
                </tbody>
            </table>
        </div>`;t("#detailInvoiceContent").html(r)}function x(){return[{id:"checkbox",name:s("div",{innerHTML:'<input type="checkbox" id="headerCheck" class="form-checkbox rounded text-primary">'}),width:"50px",sort:!1,formatter:e=>s("div",{innerHTML:e})},{id:"number",name:"#",width:"60px"},{id:"invoice_number",name:"Invoice Number",width:"140px",formatter:e=>s("div",{innerHTML:e})},{id:"po_number",name:"PO Number",width:"150px",formatter:e=>s("div",{innerHTML:e})},{id:"item_desc",name:"Item Description",width:"250px",formatter:e=>s("div",{innerHTML:e})},{id:"unit_price",name:"Unit Price",width:"120px",formatter:e=>s("div",{innerHTML:`<span class="font-semibold text-slate-700 dark:text-slate-300">${e}</span>`})},{id:"qty",name:"Qty",width:"70px",formatter:e=>s("div",{innerHTML:`<span class="font-semibold text-center block">${e}</span>`})},{id:"amount",name:"Amount",width:"120px",formatter:e=>s("div",{innerHTML:`<span class="font-semibold text-green-600 dark:text-green-400">${e}</span>`})},{id:"onsite_date",name:"Tgl PO Onsite",width:"130px",formatter:e=>s("div",{innerHTML:e})},{id:"sla_target",name:s("div",{className:"whitespace-normal",innerHTML:"SLA Target"}),width:"80px",formatter:e=>s("div",{innerHTML:e})},{id:"current_stage",name:"Status",width:"120px",formatter:e=>s("div",{innerHTML:e})},{id:"created_by",name:s("div",{className:"whitespace-normal",innerHTML:"Created By"}),width:"100px",formatter:e=>s("div",{innerHTML:e})}]}function h(e=!1){t.ajax({url:l("dari-vendor.data"),method:"GET",beforeSend:function(){e&&n("Memuat data...","info",1e3)},success:function(r){const a=r.map(o=>[`<input type="checkbox" class="form-checkbox rounded text-primary" value="${o.id}">`,o.number,`<span class="font-semibold text-slate-700 dark:text-slate-300">${o.invoice_number}</span>`,`<button class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-primary/10 text-primary font-semibold text-sm hover:bg-primary/20 hover:shadow-md transition-all duration-200 invoice-po-click" data-invoice-id="${o.id}"><span>${o.po_number}</span></button>`,o.item_desc,o.unit_price,o.qty,o.amount,o.onsite_date,o.sla_invoice_to_finance_target,o.current_stage,o.created_by]);i?i.updateConfig({data:a}).forceRender():i=new k({columns:x(),data:a,sort:!0,pagination:{enabled:!0,limit:10},search:!0,className:{table:"table-auto w-full",thead:"bg-slate-100 dark:bg-slate-800",th:"px-4 py-3 text-left text-xs font-medium text-slate-700 dark:text-slate-300",td:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100"}}).render(document.getElementById("table-invoice")),t("#data-count").text(r.length),setTimeout(()=>{f("[data-tippy-content]",{arrow:!0,placement:"top"}),g(),t(document).off("click",".invoice-po-click").on("click",".invoice-po-click",function(o){o.preventDefault();const d=t(this).data("invoice-id");d&&u(d)}),t(document).off("click","#detailInvoiceModalClose, #detailInvoiceModalBackdrop").on("click","#detailInvoiceModalClose, #detailInvoiceModalBackdrop",function(){m()})},100),e&&n("Data berhasil dimuat!","success",1500)},error:function(){c("Gagal memuat data invoice","Error!")}})}function g(){t(document).off("change","#headerCheck").on("change","#headerCheck",function(){const e=t(this).is(":checked");t(".form-checkbox").not(this).prop("checked",e),b()}),t(document).off("change",".form-checkbox").on("change",".form-checkbox",function(){const e=t(".form-checkbox").not("#headerCheck").length===t(".form-checkbox:checked").not("#headerCheck").length;t("#headerCheck").prop("checked",e),b()})}function b(){const e=t(".form-checkbox:checked").not("#headerCheck").length,r=t("#btn-delete-selected"),a=t("#btn-edit-selected");e>0?(r.removeClass("hidden"),a.removeClass("hidden"),t("#delete-count").text(e),t("#edit-count").text(e)):(r.addClass("hidden"),a.addClass("hidden"))}function y(){t(document).off("click","#btn-edit-selected").on("click","#btn-edit-selected",function(){const e=t(".form-checkbox:checked").not("#headerCheck").map(function(){return t(this).val()}).get();if(e.length===0){n("Pilih minimal 1 item untuk diedit","warning",2e3);return}const r=e.join(",");window.location.href=l("dari-vendor.bulk-edit",{ids:r})})}function _(){t("#table-invoice").length&&h(!1)}function M(){t(document).off("click","#btn-refresh").on("click","#btn-refresh",function(){h(!0)})}function C(){t(document).off("click","#btn-delete-selected").on("click","#btn-delete-selected",function(){const e=t(".form-checkbox:checked").not("#headerCheck").map(function(){return t(this).val()}).get();if(e.length===0){n("Pilih minimal 1 item untuk dihapus","warning",2e3);return}$(e)})}function $(e){const r=t("#deleteModal"),a=t("#deleteModalBackdrop"),o=t("#deleteModalContent");t("#deleteMessage").text(`Apakah Anda yakin ingin menghapus ${e.length} data invoice?`),r.removeClass("hidden"),r.css("opacity","1"),setTimeout(()=>{a.css("opacity","1"),o.css({transform:"scale(1)",opacity:"1"})},10),t("#deleteModalConfirm").off("click").on("click",function(){T(e),p()}),t("#deleteModalCancel, #deleteModalBackdrop").off("click").on("click",function(){p()})}function p(){const e=t("#deleteModalBackdrop"),r=t("#deleteModalContent"),a=t("#deleteModal");e.css("opacity","0"),r.css({transform:"scale(0.95)",opacity:"0"}),setTimeout(()=>{a.addClass("hidden").css("opacity","0")},300)}function T(e){t.ajax({url:l("dari-vendor.bulkDestroy"),method:"DELETE",data:{ids:e},headers:{"X-CSRF-TOKEN":t('meta[name="csrf-token"]').attr("content")},success:function(r){n(r.message,"success",2e3),setTimeout(()=>location.reload(),500)},error:function(r){var a;c(((a=r==null?void 0:r.responseJSON)==null?void 0:a.message)||"Gagal menghapus invoice","Error!")}})}t(document).ready(function(){_(),M(),y(),C()});
