import{i as d}from"./data-table-e496d1b5.js";import{b as i}from"./gridjs.module-3ea5c5ab.js";import{$ as r}from"./modal-handler-2823516c.js";import{s as l}from"./index-88056f3d.js";import{t as m}from"./tippy.all-093076db.js";import{s as a}from"./notification-d92c8c7c.js";import"./parse-c3570fb2.js";import"./glightbox.min-3fffbd26.js";import"./_commonjsHelpers-725317a4.js";import"./notification-5f085df9.js";let s=[];function f(){if(!r("#table-roles").length)return;const t=[{id:"number",name:"#",width:"60px"},{id:"name",name:"Role Name",width:"500px",formatter:e=>i("div",{innerHTML:e})},{id:"permissions_count",name:"Permissions",width:"200px",formatter:e=>i("div",{innerHTML:e})},{id:"users_count",name:"Users",width:"150px",formatter:e=>i("div",{innerHTML:e})},{id:"actions",name:"Actions",width:"100px",formatter:e=>i("div",{innerHTML:e})}],o=[{selector:".btn-edit",when:"one"},{selector:".btn-delete",when:"one"}];d({tableId:"#table-roles",dataUrl:l("roles.data"),columns:t,enableCheckbox:!1,buttonConfig:o,limit:10,enableFilter:!1,onDataLoaded:()=>{c()}})}function c(){s.forEach(o=>o.destroy()),s=[];const t=document.querySelectorAll('#table-roles [data-plugin="tippy"]');t.length&&(s=m(t))}function u(){const t=r("#table-roles").data("grid");t&&(a("Memuat data...","info",1e3),r.ajax({url:l("roles.data"),method:"GET",success:function(o){const e=o.map(n=>[n.number,n.name,n.permissions_count,n.users_count,n.actions]);t.updateConfig({data:e}).forceRender(),setTimeout(()=>{c()},300),a("Data berhasil direfresh","success",1500)},error:function(o){console.error("Error loading data:",o),a("Gagal memuat data","error",2e3)}}))}r("#btn-refresh").off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),u()});r(document).ready(function(){f()});
