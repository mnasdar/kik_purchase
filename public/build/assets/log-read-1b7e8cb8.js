import{i as p}from"./data-table-e496d1b5.js";import{b as c}from"./gridjs.module-3ea5c5ab.js";import{$ as o}from"./modal-handler-2823516c.js";import{s as u}from"./index-88056f3d.js";import{s as d}from"./notification-d92c8c7c.js";import"./parse-c3570fb2.js";import"./glightbox.min-3fffbd26.js";import"./_commonjsHelpers-725317a4.js";import"./notification-5f085df9.js";function f(t){let a=t.length,e=0,n=0,i=0;t.forEach(m=>{const r=m.description.toLowerCase();r.includes("menambahkan")||r.includes("membuat")||r.includes("create")?e++:r.includes("mengedit")||r.includes("mengupdate")||r.includes("update")||r.includes("memperbarui")?n++:(r.includes("menghapus")||r.includes("delete"))&&i++}),s("total-logs",0,a,500),s("create-logs",0,e,500),s("update-logs",0,n,500),s("delete-logs",0,i,500)}function s(t,a,e,n){const i=document.getElementById(t);if(!i)return;const r=(e-a)/(n/16);let l=a;const g=setInterval(()=>{l+=r,l>=e?(i.textContent=e,clearInterval(g)):i.textContent=Math.floor(l)},16)}function b(){if(!o("#table-log").length)return;const t=[{id:"number",name:"#",width:"60px"},{id:"causer",name:"User",width:"150px",formatter:e=>c("div",{className:"flex items-center gap-2",innerHTML:`
                        <div class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center">
                            <i class="mgc_user_3_line text-primary-600 dark:text-primary-400"></i>
                        </div>
                        <span class="font-medium text-gray-800 dark:text-white">${e}</span>
                    `})},{id:"description",name:"Deskripsi",width:"600px",formatter:e=>c("div",{innerHTML:e})},{id:"created_at",name:"Waktu",width:"170px",formatter:e=>c("div",{className:"flex items-center gap-2 text-sm",innerHTML:`
                        <i class="mgc_time_line text-gray-400"></i>
                        <span>${e}</span>
                    `})}],a=[];p({tableId:"#table-log",dataUrl:u("log.data"),columns:t,buttonConfig:a,limit:10,enableFilter:!1,enableCheckbox:!1,onDataLoaded:e=>{f(e)}})}function h(){const t=o("#table-log").data("grid");t&&(d("Memuat data...","info",1e3),o.ajax({url:u("log.data"),method:"GET",success:function(a){f(a);const e=a.map(n=>[n.number,n.causer,n.description,n.created_at]);t.updateConfig({data:e}).forceRender(),d("Data berhasil direfresh","success",1500)},error:function(a){console.error("Error loading data:",a),d("Gagal memuat data","error",2e3)}}))}o("#btn-refresh").off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),h()});o(document).ready(function(){b()});
