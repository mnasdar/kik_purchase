var ue=Object.defineProperty;var he=(y,e,t)=>e in y?ue(y,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[e]=t;var I=(y,e,t)=>(he(y,typeof e!="symbol"?e+"":e,t),t);const m={};m.allowedTagList=["b","caption","cite","code","const","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","input","ins","kdb","label","li","option","output","p","q","s","sample","span","strong","td","th","u"];Object.freeze(m.allowedTagList);Object.defineProperty(m,"allowedTagList",{configurable:!1,writable:!1});m.fromCharCodeKeyCode={0:"LaunchCalculator",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",91:"OS",92:"OSRight",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",173:"-",182:"MyComputer",183:"MyCalculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta",225:"AltGraph"};Object.freeze(m.fromCharCodeKeyCode);Object.defineProperty(m,"fromCharCodeKeyCode",{configurable:!1,writable:!1});m.keyName={Unidentified:"Unidentified",AndroidDefault:"AndroidDefault",Alt:"Alt",AltGr:"AltGraph",CapsLock:"CapsLock",Ctrl:"Control",Fn:"Fn",FnLock:"FnLock",Hyper:"Hyper",Meta:"Meta",OSLeft:"OS",OSRight:"OS",Command:"OS",NumLock:"NumLock",ScrollLock:"ScrollLock",Shift:"Shift",Super:"Super",Symbol:"Symbol",SymbolLock:"SymbolLock",Enter:"Enter",Tab:"Tab",Space:" ",LeftArrow:"ArrowLeft",UpArrow:"ArrowUp",RightArrow:"ArrowRight",DownArrow:"ArrowDown",End:"End",Home:"Home",PageUp:"PageUp",PageDown:"PageDown",Backspace:"Backspace",Clear:"Clear",Copy:"Copy",CrSel:"CrSel",Cut:"Cut",Delete:"Delete",EraseEof:"EraseEof",ExSel:"ExSel",Insert:"Insert",Paste:"Paste",Redo:"Redo",Undo:"Undo",Accept:"Accept",Again:"Again",Attn:"Attn",Cancel:"Cancel",ContextMenu:"ContextMenu",Esc:"Escape",Execute:"Execute",Find:"Find",Finish:"Finish",Help:"Help",Pause:"Pause",Play:"Play",Props:"Props",Select:"Select",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",BrightnessDown:"BrightnessDown",BrightnessUp:"BrightnessUp",Eject:"Eject",LogOff:"LogOff",Power:"Power",PowerOff:"PowerOff",PrintScreen:"PrintScreen",Hibernate:"Hibernate",Standby:"Standby",WakeUp:"WakeUp",Compose:"Compose",Dead:"Dead",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",Print:"Print",num0:"0",num1:"1",num2:"2",num3:"3",num4:"4",num5:"5",num6:"6",num7:"7",num8:"8",num9:"9",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",Semicolon:";",Equal:"=",Comma:",",Hyphen:"-",Minus:"-",Plus:"+",Dot:".",Slash:"/",Backquote:"`",LeftParenthesis:"(",RightParenthesis:")",LeftBracket:"[",RightBracket:"]",Backslash:"\\",Quote:"'",numpad0:"0",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",NumpadDot:".",NumpadDotAlt:",",NumpadMultiply:"*",NumpadPlus:"+",NumpadMinus:"-",NumpadSubtract:"-",NumpadSlash:"/",NumpadDotObsoleteBrowsers:"Decimal",NumpadMultiplyObsoleteBrowsers:"Multiply",NumpadPlusObsoleteBrowsers:"Add",NumpadMinusObsoleteBrowsers:"Subtract",NumpadSlashObsoleteBrowsers:"Divide",_allFnKeys:["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"],_someNonPrintableKeys:["Tab","Enter","Shift","ShiftLeft","ShiftRight","Control","ControlLeft","ControlRight","Alt","AltLeft","AltRight","Pause","CapsLock","Escape"],_directionKeys:["PageUp","PageDown","End","Home","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]};Object.freeze(m.keyName._allFnKeys);Object.freeze(m.keyName._someNonPrintableKeys);Object.freeze(m.keyName._directionKeys);Object.freeze(m.keyName);Object.defineProperty(m,"keyName",{configurable:!1,writable:!1});Object.freeze(m);class i{static isNull(e){return e===null}static isUndefined(e){return e===void 0}static isUndefinedOrNullOrEmpty(e){return e==null||e===""}static isString(e){return typeof e=="string"||e instanceof String}static isEmptyString(e){return e===""}static isBoolean(e){return typeof e=="boolean"}static isTrueOrFalseString(e){const t=String(e).toLowerCase();return t==="true"||t==="false"}static isObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}static isEmptyObj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}static isNumberStrict(e){return typeof e=="number"}static isNumber(e){return!this.isArray(e)&&!isNaN(parseFloat(e))&&isFinite(e)}static isDigit(e){return/\d/.test(e)}static isNumberOrArabic(e){const t=this.arabicToLatinNumbers(e,!1,!0,!0);return this.isNumber(t)}static isInt(e){return typeof e=="number"&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)}static isFunction(e){return typeof e=="function"}static contains(e,t){return!this.isString(e)||!this.isString(t)||e===""||t===""?!1:e.indexOf(t)!==-1}static isInArray(e,t){return!this.isArray(t)||t===[]||this.isUndefined(e)?!1:t.indexOf(e)!==-1}static isArray(e){if(Object.prototype.toString.call([])==="[object Array]")return Array.isArray(e)||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Array]";throw new Error("toString message changed for Object Array")}static isElement(e){return typeof Element>"u"?!1:e instanceof Element}static isInputElement(e){return this.isElement(e)&&e.tagName.toLowerCase()==="input"}static decimalPlaces(e){const[,t]=e.split(".");return this.isUndefined(t)?0:t.length}static indexFirstNonZeroDecimalPlace(e){const[,t]=String(Math.abs(e)).split(".");if(this.isUndefined(t))return 0;let s=t.lastIndexOf("0");return s===-1?s=0:s+=2,s}static keyCodeNumber(e){return typeof e.which>"u"?e.keyCode:e.which}static character(e){let t;if(e.key==="Unidentified"||e.key===void 0||this.isSeleniumBot()){const s=this.keyCodeNumber(e);if(s===229)return m.keyName.AndroidDefault;const a=m.fromCharCodeKeyCode[s];i.isUndefinedOrNullOrEmpty(a)?t=String.fromCharCode(s):t=a}else switch(e.key){case"Add":t=m.keyName.NumpadPlus;break;case"Apps":t=m.keyName.ContextMenu;break;case"Crsel":t=m.keyName.CrSel;break;case"Decimal":e.char?t=e.char:t=m.keyName.NumpadDot;break;case"Del":t=m.keyName.Delete;break;case"Divide":t=m.keyName.NumpadSlash;break;case"Down":t=m.keyName.DownArrow;break;case"Esc":t=m.keyName.Esc;break;case"Exsel":t=m.keyName.ExSel;break;case"Left":t=m.keyName.LeftArrow;break;case"Meta":case"Super":t=m.keyName.OSLeft;break;case"Multiply":t=m.keyName.NumpadMultiply;break;case"Right":t=m.keyName.RightArrow;break;case"Spacebar":t=m.keyName.Space;break;case"Subtract":t=m.keyName.NumpadMinus;break;case"Up":t=m.keyName.UpArrow;break;default:t=e.key}return t}static browser(){const e=navigator.userAgent;let t,s=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(s[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"ie",version:t[1]||""}):s[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!==null)?{name:t[1].replace("OPR","opera"),version:t[2]}:(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!==null&&s.splice(1,1,t[1]),{name:s[0].toLowerCase(),version:s[1]})}static isSeleniumBot(){return window.navigator.webdriver===!0}static isNegative(e,t="-",s=!0){return e===t?!0:e===""?!1:i.isNumber(e)?e<0:s?this.contains(e,t):this.isNegativeStrict(e,t)}static isNegativeStrict(e,t="-"){return e.charAt(0)===t}static isNegativeWithBrackets(e,t,s){return e.charAt(0)===t&&this.contains(e,s)}static isZeroOrHasNoValue(e){return!/[1-9]/g.test(e)}static setRawNegativeSign(e){return this.isNegativeStrict(e,"-")?e:`-${e}`}static replaceCharAt(e,t,s){return`${e.substr(0,t)}${s}${e.substr(t+s.length)}`}static clampToRangeLimits(e,t){return Math.max(t.minimumValue,Math.min(t.maximumValue,e))}static countNumberCharactersOnTheCaretLeftSide(e,t,s){const a=new RegExp(`[0-9${s}-]`);let n=0;for(let c=0;c<t;c++)a.test(e[c])&&n++;return n}static findCaretPositionInFormattedNumber(e,t,s,a){const n=s.length,c=e.length;let o,l=0;for(o=0;o<n&&l<c&&l<t;o++)(e[l]===s[o]||e[l]==="."&&s[o]===a)&&l++;return o}static countCharInText(e,t){let s=0;for(let a=0;a<t.length;a++)t[a]===e&&s++;return s}static convertCharacterCountToIndexPosition(e){return Math.max(e,e-1)}static getElementSelection(e){const t={};let s;try{s=this.isUndefined(e.selectionStart)}catch{s=!1}try{if(s){const n=window.getSelection().getRangeAt(0);t.start=n.startOffset,t.end=n.endOffset,t.length=t.end-t.start}else t.start=e.selectionStart,t.end=e.selectionEnd,t.length=t.end-t.start}catch{t.start=0,t.end=0,t.length=0}return t}static setElementSelection(e,t,s=null){if(this.isUndefinedOrNullOrEmpty(s)&&(s=t),this.isInputElement(e))e.setSelectionRange(t,s);else if(!i.isNull(e.firstChild)){const a=document.createRange();a.setStart(e.firstChild,t),a.setEnd(e.firstChild,s);const n=window.getSelection();n.removeAllRanges(),n.addRange(a)}}static throwError(e){throw new Error(e)}static warning(e,t=!0){t&&console.warn(`Warning: ${e}`)}static isWheelEvent(e){return e instanceof WheelEvent}static isWheelUpEvent(e){return(!this.isWheelEvent(e)||this.isUndefinedOrNullOrEmpty(e.deltaY))&&this.throwError(`The event passed as a parameter is not a valid wheel event, '${e.type}' given.`),e.deltaY<0}static isWheelDownEvent(e){return(!this.isWheelEvent(e)||this.isUndefinedOrNullOrEmpty(e.deltaY))&&this.throwError(`The event passed as a parameter is not a valid wheel event, '${e.type}' given.`),e.deltaY>0}static isWheelEventWithZeroDeltaY(e){return this.isWheelEvent(e)&&!this.isUndefinedOrNullOrEmpty(e.deltaY)&&e.deltaY===0}static forceDecimalPlaces(e,t){const[s,a]=String(e).split(".");return a?`${s}.${a.substr(0,t)}`:e}static roundToNearest(e,t=1e3){return e===0?0:(t===0&&this.throwError("The `stepPlace` used to round is equal to `0`. This value must not be equal to zero."),Math.round(e/t)*t)}static modifyAndRoundToNearestAuto(e,t,s){e=Number(this.forceDecimalPlaces(e,s));const a=Math.abs(e);if(a>=0&&a<1){const n=Math.pow(10,-s);if(e===0)return t?n:-n;let c;const o=s,l=this.indexFirstNonZeroDecimalPlace(e);l>=o-1?c=n:c=Math.pow(10,-(l+1));let h;return t?h=e+c:h=e-c,this.roundToNearest(h,c)}else{e=parseInt(e,10);const n=Math.abs(e).toString().length;let c;switch(n){case 1:c=0;break;case 2:case 3:c=1;break;case 4:case 5:c=2;break;default:c=n-3}const o=Math.pow(10,c);let l;return t?l=e+o:l=e-o,l<=10&&l>=-10?l:this.roundToNearest(l,o)}}static addAndRoundToNearestAuto(e,t){return this.modifyAndRoundToNearestAuto(e,!0,t)}static subtractAndRoundToNearestAuto(e,t){return this.modifyAndRoundToNearestAuto(e,!1,t)}static arabicToLatinNumbers(e,t=!0,s=!1,a=!1){if(this.isNull(e))return e;let n=e.toString();if(n==="")return e;if(n.match(/[٠١٢٣٤٥٦٧٨٩۴۵۶]/g)===null)return t&&(n=Number(n)),n;s&&(n=n.replace(/٫/,".")),a&&(n=n.replace(/٬/g,"")),n=n.replace(/[٠١٢٣٤٥٦٧٨٩]/g,o=>o.charCodeAt(0)-1632).replace(/[۰۱۲۳۴۵۶۷۸۹]/g,o=>o.charCodeAt(0)-1776);const c=Number(n);return isNaN(c)?c:(t&&(n=c),n)}static triggerEvent(e,t=document,s=null,a=!0,n=!0){let c;window.CustomEvent?c=new CustomEvent(e,{detail:s,bubbles:a,cancelable:n}):(c=document.createEvent("CustomEvent"),c.initCustomEvent(e,a,n,{detail:s})),t.dispatchEvent(c)}static parseStr(e){if(i.isUndefinedOrNullOrEmpty(e))return{s:1,e:0,c:[0]};const t={};let s,a,n,c;if(e===0&&1/e<0&&(e="-0"),e=e.toString(),this.isNegativeStrict(e,"-")?(e=e.slice(1),t.s=-1):t.s=1,s=e.indexOf("."),s>-1&&(e=e.replace(".","")),s<0&&(s=e.length),a=e.search(/[1-9]/i)===-1?e.length:e.search(/[1-9]/i),n=e.length,a===n)t.e=0,t.c=[0];else{for(c=n-1;e.charAt(c)==="0";c-=1)n-=1;for(n-=1,t.e=s-a-1,t.c=[],s=0;a<=n;a+=1)t.c[s]=+e.charAt(a),s+=1}return t}static testMinMax(e,t){const s=t.c,a=e.c;let n=t.s,c=e.s,o=t.e,l=e.e;if(!s[0]||!a[0]){let g;return s[0]?g=n:g=a[0]?-c:0,g}if(n!==c)return n;const h=n<0;if(o!==l)return o>l^h?1:-1;for(n=-1,o=s.length,l=a.length,c=o<l?o:l,n+=1;n<c;n+=1)if(s[n]!==a[n])return s[n]>a[n]^h?1:-1;let d;return o===l?d=0:d=o>l^h?1:-1,d}static randomString(e=5){return Math.random().toString(36).substr(2,e)}static domElement(e){let t;return i.isString(e)?t=document.querySelector(e):t=e,t}static getElementValue(e){return e.tagName.toLowerCase()==="input"?e.value:this.text(e)}static setElementValue(e,t=null){e.tagName.toLowerCase()==="input"?e.value=t:e.textContent=t}static setInvalidState(e,t="Invalid"){(t===""||this.isNull(t))&&this.throwError("Cannot set the invalid state with an empty message."),e.setCustomValidity(t)}static setValidState(e){e.setCustomValidity("")}static cloneObject(e){return Object.assign({},e)}static camelize(e,t="-",s=!0,a=!0){if(this.isNull(e))return null;s&&(e=e.replace(/^data-/,""));let c=e.split(t).map(o=>`${o.charAt(0).toUpperCase()}${o.slice(1)}`);return c=c.join(""),a&&(c=`${c.charAt(0).toLowerCase()}${c.slice(1)}`),c}static text(e){const t=e.nodeType;let s;return t===Node.ELEMENT_NODE||t===Node.DOCUMENT_NODE||t===Node.DOCUMENT_FRAGMENT_NODE?s=e.textContent:t===Node.TEXT_NODE?s=e.nodeValue:s="",s}static setText(e,t){const s=e.nodeType;(s===Node.ELEMENT_NODE||s===Node.DOCUMENT_NODE||s===Node.DOCUMENT_FRAGMENT_NODE)&&(e.textContent=t)}static filterOut(e,t){return e.filter(s=>!this.isInArray(s,t))}static trimPaddedZerosFromDecimalPlaces(e){if(e=String(e),e==="")return"";const[t,s]=e.split(".");if(this.isUndefinedOrNullOrEmpty(s))return t;const a=s.replace(/0+$/g,"");let n;return a===""?n=t:n=`${t}.${a}`,n}static getHoveredElement(){const e=[...document.querySelectorAll(":hover")];return e[e.length-1]}static arrayTrim(e,t){const s=e.length;return s===0||t>s?e:t<0?[]:(e.length=parseInt(t,10),e)}static arrayUnique(...e){return[...new Set([].concat(...e))]}static mergeMaps(...e){return new Map(e.reduce((t,s)=>t.concat([...s]),[]))}static objectKeyLookup(e,t){const s=Object.entries(e).find(n=>n[1]===t);let a=null;return s!==void 0&&(a=s[0]),a}static insertAt(e,t,s){if(e=String(e),s>e.length)throw new Error("The given index is out of the string range.");if(t.length!==1)throw new Error("The given string `char` should be only one character long.");return e===""&&s===0?t:`${e.slice(0,s)}${t}${e.slice(s)}`}static scientificToDecimal(e){const t=Number(e);if(isNaN(t))return NaN;if(e=String(e),!(this.contains(e,"e")||this.contains(e,"E")))return e;let[a,n]=e.split(/e/i);const c=a<0;c&&(a=a.replace("-",""));const o=+n<0;o&&(n=n.replace("-",""));const[l,h]=a.split(/\./);let d;return o?(l.length>n?d=this.insertAt(l,".",l.length-n):d=`0.${"0".repeat(n-l.length)}${l}`,d=`${d}${h||""}`):h?(a=`${l}${h}`,n<h.length?d=this.insertAt(a,".",+n+l.length):d=`${a}${"0".repeat(n-h.length)}`):(a=a.replace(".",""),d=`${a}${"0".repeat(Number(n))}`),c&&(d=`-${d}`),d}}class me{constructor(e){if(e===null)throw new Error("Invalid AST")}evaluate(e){if(e==null)throw new Error("Invalid AST sub-tree");if(e.type==="number")return e.value;if(e.type==="unaryMinus")return-this.evaluate(e.left);{const t=this.evaluate(e.left),s=this.evaluate(e.right);switch(e.type){case"op_+":return Number(t)+Number(s);case"op_-":return t-s;case"op_*":return t*s;case"op_/":return t/s;default:throw new Error(`Invalid operator '${e.type}'`)}}}}class N{static createNode(e,t,s){const a=new N;return a.type=e,a.left=t,a.right=s,a}static createUnaryNode(e){const t=new N;return t.type="unaryMinus",t.left=e,t.right=null,t}static createLeaf(e){const t=new N;return t.type="number",t.value=e,t}}class de{constructor(e,t,s){this.type=e,this.value=t,this.symbol=s}}class ge{constructor(e){this.text=e,this.textLength=e.length,this.index=0,this.token=new de("Error",0,0)}_skipSpaces(){for(;this.text[this.index]===" "&&this.index<=this.textLength;)this.index++}getIndex(){return this.index}getNextToken(e="."){if(this._skipSpaces(),this.textLength===this.index)return this.token.type="EOT",this.token;if(i.isDigit(this.text[this.index]))return this.token.type="num",this.token.value=this._getNumber(e),this.token;switch(this.token.type="Error",this.text[this.index]){case"+":this.token.type="+";break;case"-":this.token.type="-";break;case"*":this.token.type="*";break;case"/":this.token.type="/";break;case"(":this.token.type="(";break;case")":this.token.type=")";break}if(this.token.type!=="Error")this.token.symbol=this.text[this.index],this.index++;else throw new Error(`Unexpected token '${this.token.symbol}' at position '${this.token.index}' in the token function`);return this.token}_getNumber(e){this._skipSpaces();const t=this.index;for(;this.index<=this.textLength&&i.isDigit(this.text[this.index]);)this.index++;for(this.text[this.index]===e&&this.index++;this.index<=this.textLength&&i.isDigit(this.text[this.index]);)this.index++;if(this.index===t)throw new Error("No number has been found while it was expected");return this.text.substring(t,this.index).replace(e,".")}}class fe{constructor(e,t="."){return this.text=e,this.decimalCharacter=t,this.lexer=new ge(e),this.token=this.lexer.getNextToken(this.decimalCharacter),this._exp()}_exp(){const e=this._term(),t=this._moreExp();return N.createNode("op_+",e,t)}_moreExp(){let e,t;switch(this.token.type){case"+":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._term(),t=this._moreExp(),N.createNode("op_+",t,e);case"-":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._term(),t=this._moreExp(),N.createNode("op_-",t,e)}return N.createLeaf(0)}_term(){const e=this._factor(),t=this._moreTerms();return N.createNode("op_*",e,t)}_moreTerms(){let e,t;switch(this.token.type){case"*":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._factor(),t=this._moreTerms(),N.createNode("op_*",t,e);case"/":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._factor(),t=this._moreTerms(),N.createNode("op_/",t,e)}return N.createLeaf(1)}_factor(){let e,t,s;switch(this.token.type){case"num":return s=this.token.value,this.token=this.lexer.getNextToken(this.decimalCharacter),N.createLeaf(s);case"-":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._factor(),N.createUnaryNode(t);case"(":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._exp(),this._match(")"),e;default:throw new Error(`Unexpected token '${this.token.symbol}' with type '${this.token.type}' at position '${this.token.index}' in the factor function`)}}_match(e){const t=this.lexer.getIndex()-1;if(this.text[t]===e)this.token=this.lexer.getNextToken(this.decimalCharacter);else throw new Error(`Unexpected token '${this.token.symbol}' at position '${t}' in the match function`)}}/**
 *               AutoNumeric.js
 *
 * @version      4.10.9
 * @date         2025-09-03 UTC 09:00
 *
 * @authors      2016-2025 Alexandre Bonneau <alexandre.bonneau@linuxfr.eu>
 *               2009-2016 Bob Knothe <bob.knothe@gmail.com>
 * @contributors Sokolov Yura and others, cf. AUTHORS
 * @copyright    Alexandre Bonneau & Robert J. Knothe
 * @since        2009-08-09
 *
 * @summary      AutoNumeric is a standalone Javascript library
 *               that provides live *as-you-type* formatting for
 *               international numbers and currencies.
 *
 * @link         http://autonumeric.org
 * @docs         https://docs.autonumeric.org
 *
 *               Note : Some functions are borrowed from big.js
 * @see          https://github.com/MikeMcl/big.js/
 *
 * Please report any bugs to https://github.com/autoNumeric/autoNumeric
 *
 * @license      Released under the MIT License
 * @link         http://www.opensource.org/licenses/mit-license.php
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sub license, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */const r=class{static version(){return"4.10.9"}constructor(e=null,t=null,s=null){const{domElement:a,initialValue:n,userOptions:c}=r._setArgumentsValues(e,t,s);if(this.domElement=a,this.defaultRawValue="",this._setSettings(c,!1),this._checkElement(),this.savedCancellableValue=null,this.historyTable=[],this.historyTableIndex=-1,this.onGoingRedo=!1,this.parentForm=this._getParentForm(),!this.runOnce&&this.settings.formatOnPageLoad)this._formatDefaultValueOnPageLoad(n);else{let o;if(i.isNull(n))switch(this.settings.emptyInputBehavior){case r.options.emptyInputBehavior.min:o=this.settings.minimumValue;break;case r.options.emptyInputBehavior.max:o=this.settings.maximumValue;break;case r.options.emptyInputBehavior.zero:o="0";break;case r.options.emptyInputBehavior.focus:case r.options.emptyInputBehavior.press:case r.options.emptyInputBehavior.always:o="";break;case r.options.emptyInputBehavior.null:o=null;break;default:o=this.settings.emptyInputBehavior}else o=n;this._setElementAndRawValue(o)}this.runOnce=!0,this.hasEventListeners=!1,(this.isInputElement||this.isContentEditable)&&(this.settings.noEventListeners||this._createEventListeners(),this._setWritePermissions(!0)),this._saveInitialValues(n),this.storageNamePrefix="AUTO_",this._setPersistentStorageName(),this.validState=!0,this.isFocused=!1,this.isWheelEvent=!1,this.isDropEvent=!1,this.isEditing=!1,this.rawValueOnFocus=void 0,this.internalModification=!1,this.attributeToWatch=this._getAttributeToWatch(),this.getterSetter=Object.getOwnPropertyDescriptor(this.domElement.__proto__,this.attributeToWatch),this._addWatcher(),this.settings.createLocalList&&this._createLocalList(),this.constructor._addToGlobalList(this),this.global={set:(o,l=null)=>{this.autoNumericLocalList.forEach(h=>{h.set(o,l)})},setUnformatted:(o,l=null)=>{this.autoNumericLocalList.forEach(h=>{h.setUnformatted(o,l)})},get:(o=null)=>{const l=[];return this.autoNumericLocalList.forEach(h=>{l.push(h.get())}),this._executeCallback(l,o),l},getNumericString:(o=null)=>{const l=[];return this.autoNumericLocalList.forEach(h=>{l.push(h.getNumericString())}),this._executeCallback(l,o),l},getFormatted:(o=null)=>{const l=[];return this.autoNumericLocalList.forEach(h=>{l.push(h.getFormatted())}),this._executeCallback(l,o),l},getNumber:(o=null)=>{const l=[];return this.autoNumericLocalList.forEach(h=>{l.push(h.getNumber())}),this._executeCallback(l,o),l},getLocalized:(o=null)=>{const l=[];return this.autoNumericLocalList.forEach(h=>{l.push(h.getLocalized())}),this._executeCallback(l,o),l},reformat:()=>{this.autoNumericLocalList.forEach(o=>{o.reformat()})},unformat:()=>{this.autoNumericLocalList.forEach(o=>{o.unformat()})},unformatLocalized:(o=null)=>{this.autoNumericLocalList.forEach(l=>{l.unformatLocalized(o)})},update:(...o)=>{this.autoNumericLocalList.forEach(l=>{l.update(...o)})},isPristine:(o=!0)=>{let l=!0;return this.autoNumericLocalList.forEach(h=>{l&&!h.isPristine(o)&&(l=!1)}),l},clear:(o=!1)=>{this.autoNumericLocalList.forEach(l=>{l.clear(o)})},remove:()=>{this.autoNumericLocalList.forEach(o=>{o.remove()})},wipe:()=>{this.autoNumericLocalList.forEach(o=>{o.wipe()})},nuke:()=>{this.autoNumericLocalList.forEach(o=>{o.nuke()})},has:o=>{let l;return o instanceof r?l=this.autoNumericLocalList.has(o.node()):l=this.autoNumericLocalList.has(o),l},addObject:o=>{let l,h;o instanceof r?(l=o.node(),h=o):(l=o,h=r.getAutoNumericElement(l)),this._hasLocalList()||this._createLocalList();let d=h._getLocalList();d.size===0&&(h._createLocalList(),d=h._getLocalList());let g;d instanceof Map?g=i.mergeMaps(this._getLocalList(),d):(this._addToLocalList(l,h),g=this._getLocalList()),g.forEach(f=>{f._setLocalList(g)})},removeObject:(o,l=!1)=>{let h,d;o instanceof r?(h=o.node(),d=o):(h=o,d=r.getAutoNumericElement(h));const g=this.autoNumericLocalList;this.autoNumericLocalList.delete(h),g.forEach(f=>{f._setLocalList(this.autoNumericLocalList)}),!l&&h===this.node()?d._setLocalList(new Map):d._createLocalList()},empty:(o=!1)=>{this.autoNumericLocalList.forEach(h=>{o?h._createLocalList():h._setLocalList(new Map)})},elements:()=>{const o=[];return this.autoNumericLocalList.forEach(l=>{o.push(l.node())}),o},getList:()=>this.autoNumericLocalList,size:()=>this.autoNumericLocalList.size},this.options={reset:()=>(this.settings={rawValue:this.defaultRawValue},this.update(r.defaultSettings),this),allowDecimalPadding:o=>(this.update({allowDecimalPadding:o}),this),alwaysAllowDecimalCharacter:o=>(this.update({alwaysAllowDecimalCharacter:o}),this),caretPositionOnFocus:o=>(this.settings.caretPositionOnFocus=o,this),createLocalList:o=>(this.settings.createLocalList=o,this.settings.createLocalList?this._hasLocalList()||this._createLocalList():this._deleteLocalList(),this),currencySymbol:o=>(this.update({currencySymbol:o}),this),currencySymbolPlacement:o=>(this.update({currencySymbolPlacement:o}),this),decimalCharacter:o=>(this.update({decimalCharacter:o}),this),decimalCharacterAlternative:o=>(this.settings.decimalCharacterAlternative=o,this),decimalPlaces:o=>(i.warning("Using `options.decimalPlaces()` instead of calling the specific `options.decimalPlacesRawValue()`, `options.decimalPlacesShownOnFocus()` and `options.decimalPlacesShownOnBlur()` methods will reset those options.\nPlease call the specific methods if you do not want to reset those.",this.settings.showWarnings),this.update({decimalPlaces:o}),this),decimalPlacesRawValue:o=>(this.update({decimalPlacesRawValue:o}),this),decimalPlacesShownOnBlur:o=>(this.update({decimalPlacesShownOnBlur:o}),this),decimalPlacesShownOnFocus:o=>(this.update({decimalPlacesShownOnFocus:o}),this),defaultValueOverride:o=>(this.update({defaultValueOverride:o}),this),digitalGroupSpacing:o=>(this.update({digitalGroupSpacing:o}),this),digitGroupSeparator:o=>(this.update({digitGroupSeparator:o}),this),divisorWhenUnfocused:o=>(this.update({divisorWhenUnfocused:o}),this),emptyInputBehavior:o=>(this.rawValue===null&&o!==r.options.emptyInputBehavior.null&&(i.warning(`You are trying to modify the \`emptyInputBehavior\` option to something different than \`'null'\` (${o}), but the element raw value is currently set to \`null\`. This would result in an invalid \`rawValue\`. In order to fix that, the element value has been changed to the empty string \`''\`.`,this.settings.showWarnings),this.rawValue=""),this.update({emptyInputBehavior:o}),this),eventBubbles:o=>(this.settings.eventBubbles=o,this),eventIsCancelable:o=>(this.settings.eventIsCancelable=o,this),failOnUnknownOption:o=>(this.settings.failOnUnknownOption=o,this),formatOnPageLoad:o=>(this.settings.formatOnPageLoad=o,this),formulaMode:o=>(this.settings.formulaMode=o,this),historySize:o=>(this.settings.historySize=o,this),invalidClass:o=>(this.settings.invalidClass=o,this),isCancellable:o=>(this.settings.isCancellable=o,this),leadingZero:o=>(this.update({leadingZero:o}),this),maximumValue:o=>(this.update({maximumValue:o}),this),minimumValue:o=>(this.update({minimumValue:o}),this),modifyValueOnUpDownArrow:o=>(this.settings.modifyValueOnUpDownArrow=o,this),modifyValueOnWheel:o=>(this.settings.modifyValueOnWheel=o,this),negativeBracketsTypeOnBlur:o=>(this.update({negativeBracketsTypeOnBlur:o}),this),negativePositiveSignPlacement:o=>(this.update({negativePositiveSignPlacement:o}),this),negativeSignCharacter:o=>(this.update({negativeSignCharacter:o}),this),negativePositiveSignBehavior:o=>(this.settings.negativePositiveSignBehavior=o,this),noEventListeners:o=>(o===r.options.noEventListeners.noEvents&&this.settings.noEventListeners===r.options.noEventListeners.addEvents&&this._removeEventListeners(),this.update({noEventListeners:o}),this),onInvalidPaste:o=>(this.settings.onInvalidPaste=o,this),outputFormat:o=>(this.settings.outputFormat=o,this),overrideMinMaxLimits:o=>(this.update({overrideMinMaxLimits:o}),this),positiveSignCharacter:o=>(this.update({positiveSignCharacter:o}),this),rawValueDivisor:o=>(this.update({rawValueDivisor:o}),this),readOnly:o=>(this.settings.readOnly=o,this._setWritePermissions(),this),roundingMethod:o=>(this.update({roundingMethod:o}),this),saveValueToSessionStorage:o=>(this.update({saveValueToSessionStorage:o}),this),symbolWhenUnfocused:o=>(this.update({symbolWhenUnfocused:o}),this),selectNumberOnly:o=>(this.settings.selectNumberOnly=o,this),selectOnFocus:o=>(this.settings.selectOnFocus=o,this),serializeSpaces:o=>(this.settings.serializeSpaces=o,this),showOnlyNumbersOnFocus:o=>(this.update({showOnlyNumbersOnFocus:o}),this),showPositiveSign:o=>(this.update({showPositiveSign:o}),this),showWarnings:o=>(this.settings.showWarnings=o,this),styleRules:o=>(this.update({styleRules:o}),this),suffixText:o=>(this.update({suffixText:o}),this),unformatOnHover:o=>(this.settings.unformatOnHover=o,this),unformatOnSubmit:o=>(this.settings.unformatOnSubmit=o,this),upDownStep:o=>(this.settings.upDownStep=o,this),valuesToStrings:o=>(this.update({valuesToStrings:o}),this),watchExternalChanges:o=>(this.update({watchExternalChanges:o}),this),wheelOn:o=>(this.settings.wheelOn=o,this),wheelStep:o=>(this.settings.wheelStep=o,this)},this._triggerEvent(r.events.initialized,this.domElement,{newValue:i.getElementValue(this.domElement),newRawValue:this.rawValue,error:null,aNElement:this})}static _setArgumentsValues(e,t,s){i.isNull(e)&&i.throwError("At least one valid parameter is needed in order to initialize an AutoNumeric object");const a=i.isElement(e),n=i.isString(e),c=i.isObject(t),o=Array.isArray(t)&&t.length>0,l=i.isNumberOrArabic(t)||t==="",h=this._isPreDefinedOptionValid(t),d=i.isNull(t),g=i.isEmptyString(t),f=i.isObject(s),v=Array.isArray(s)&&s.length>0,p=i.isNull(s),E=this._isPreDefinedOptionValid(s);let P,S,w;return a&&d&&p?(P=e,w=null,S=null):a&&l&&p?(P=e,w=t,S=null):a&&c&&p?(P=e,w=null,S=t):a&&h&&p?(P=e,w=null,S=this._getOptionObject(t)):a&&o&&p?(P=e,w=null,S=this.mergeOptions(t)):a&&(d||g)&&f?(P=e,w=null,S=s):a&&(d||g)&&v?(P=e,w=null,S=this.mergeOptions(s)):n&&d&&p?(P=document.querySelector(e),w=null,S=null):n&&c&&p?(P=document.querySelector(e),w=null,S=t):n&&h&&p?(P=document.querySelector(e),w=null,S=this._getOptionObject(t)):n&&o&&p?(P=document.querySelector(e),w=null,S=this.mergeOptions(t)):n&&(d||g)&&f?(P=document.querySelector(e),w=null,S=s):n&&(d||g)&&v?(P=document.querySelector(e),w=null,S=this.mergeOptions(s)):n&&l&&p?(P=document.querySelector(e),w=t,S=null):n&&l&&f?(P=document.querySelector(e),w=t,S=s):n&&l&&E?(P=document.querySelector(e),w=t,S=this._getOptionObject(s)):n&&l&&v?(P=document.querySelector(e),w=t,S=this.mergeOptions(s)):a&&l&&f?(P=e,w=t,S=s):a&&l&&E?(P=e,w=t,S=this._getOptionObject(s)):a&&l&&v?(P=e,w=t,S=this.mergeOptions(s)):i.throwError(`The parameters given to the AutoNumeric object are not valid, '${e}', '${t}' and '${s}' given.`),i.isNull(P)&&i.throwError(`The selector '${e}' did not select any valid DOM element. Please check on which element you called AutoNumeric.`),{domElement:P,initialValue:w,userOptions:S}}static mergeOptions(e){const t={};return e.forEach(s=>{Object.assign(t,this._getOptionObject(s))}),t}static _isPreDefinedOptionValid(e){return Object.prototype.hasOwnProperty.call(r.predefinedOptions,e)}static _getOptionObject(e){let t;return i.isString(e)?(t=r.getPredefinedOptions()[e],t==null&&i.warning(`The given pre-defined option [${e}] is not recognized by autoNumeric. Please check that pre-defined option name.`,!0)):t=e,t}_saveInitialValues(e){this.initialValueHtmlAttribute=i.scientificToDecimal(this.domElement.getAttribute("value")),i.isNull(this.initialValueHtmlAttribute)&&(this.initialValueHtmlAttribute=""),this.initialValue=e,i.isNull(this.initialValue)&&(this.initialValue="")}_createEventListeners(){this.formulaMode=!1,this.compositioning=!1,this._onFocusInFunc=e=>{this._onFocusIn(e)},this._onFocusInAndMouseEnterFunc=e=>{this._onFocusInAndMouseEnter(e)},this._onFocusFunc=()=>{this._onFocus()},this._onKeydownFunc=e=>{this._onKeydown(e)},this._onKeypressFunc=e=>{this._onKeypress(e)},this._onKeyupFunc=e=>{this._onKeyup(e)},this._onFocusOutAndMouseLeaveFunc=e=>{this._onFocusOutAndMouseLeave(e)},this._onPasteFunc=e=>{this._onPaste(e)},this._onWheelFunc=e=>{this._onWheel(e)},this._onDropFunc=e=>{this._onDrop(e)},this._onKeydownGlobalFunc=e=>{this._onKeydownGlobal(e)},this._onKeyupGlobalFunc=e=>{this._onKeyupGlobal(e)},this._onCompositionstartFunc=e=>{this._onCompositionstart(e)},this._onCompositionendFunc=e=>{this._onCompositionend(e)},this.domElement.addEventListener("focusin",this._onFocusInFunc,!1),this.domElement.addEventListener("focus",this._onFocusInAndMouseEnterFunc,!1),this.domElement.addEventListener("focus",this._onFocusFunc,!1),this.domElement.addEventListener("mouseenter",this._onFocusInAndMouseEnterFunc,!1),this.domElement.addEventListener("keydown",this._onKeydownFunc,!1),this.domElement.addEventListener("keypress",this._onKeypressFunc,!1),this.domElement.addEventListener("keyup",this._onKeyupFunc,!1),this.domElement.addEventListener("blur",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.addEventListener("mouseleave",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.addEventListener("paste",this._onPasteFunc,!1),this.domElement.addEventListener("wheel",this._onWheelFunc,!1),this.domElement.addEventListener("drop",this._onDropFunc,!1),this.domElement.addEventListener("compositionstart",this._onCompositionstartFunc,!1),this.domElement.addEventListener("compositionend",this._onCompositionendFunc,!1),this._setupFormListener(),this.hasEventListeners=!0,r._doesGlobalListExists()||(document.addEventListener("keydown",this._onKeydownGlobalFunc,!1),document.addEventListener("keyup",this._onKeyupGlobalFunc,!1))}_removeEventListeners(){this.domElement.removeEventListener("focusin",this._onFocusInFunc,!1),this.domElement.removeEventListener("focus",this._onFocusInAndMouseEnterFunc,!1),this.domElement.removeEventListener("focus",this._onFocusFunc,!1),this.domElement.removeEventListener("mouseenter",this._onFocusInAndMouseEnterFunc,!1),this.domElement.removeEventListener("blur",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.removeEventListener("mouseleave",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.removeEventListener("keydown",this._onKeydownFunc,!1),this.domElement.removeEventListener("keypress",this._onKeypressFunc,!1),this.domElement.removeEventListener("keyup",this._onKeyupFunc,!1),this.domElement.removeEventListener("paste",this._onPasteFunc,!1),this.domElement.removeEventListener("wheel",this._onWheelFunc,!1),this.domElement.removeEventListener("drop",this._onDropFunc,!1),this.domElement.removeEventListener("compositionstart",this._onCompositionstartFunc,!1),this.domElement.removeEventListener("compositionend",this._onCompositionendFunc,!1),this._removeFormListener(),this.hasEventListeners=!1,document.removeEventListener("keydown",this._onKeydownGlobalFunc,!1),document.removeEventListener("keyup",this._onKeyupGlobalFunc,!1)}_updateEventListeners(){!this.settings.noEventListeners&&!this.hasEventListeners&&this._createEventListeners(),this.settings.noEventListeners&&this.hasEventListeners&&this._removeEventListeners()}_setupFormListener(){i.isNull(this.parentForm)||(this._onFormSubmitFunc=()=>{this._onFormSubmit()},this._onFormResetFunc=()=>{this._onFormReset()},this._hasParentFormCounter()?this._incrementParentFormCounter():(this._initializeFormCounterToOne(),this.parentForm.addEventListener("submit",this._onFormSubmitFunc,!1),this.parentForm.addEventListener("reset",this._onFormResetFunc,!1),this._storeFormHandlerFunction()))}_removeFormListener(){if(!i.isNull(this.parentForm)){const e=this._getParentFormCounter();e===1?(this.parentForm.removeEventListener("submit",this._getFormHandlerFunction().submitFn,!1),this.parentForm.removeEventListener("reset",this._getFormHandlerFunction().resetFn,!1),this._removeFormDataSetInfo()):e>1?this._decrementParentFormCounter():i.throwError("The AutoNumeric object count on the form is incoherent.")}}_hasParentFormCounter(){return"anCount"in this.parentForm.dataset}_getParentFormCounter(){return Number(this.parentForm.dataset.anCount)}_initializeFormCounterToOne(e=null){this._getFormElement(e).dataset.anCount=1}_incrementParentFormCounter(e=null){this._getFormElement(e).dataset.anCount++}_decrementParentFormCounter(){this.parentForm.dataset.anCount--}static _doesFormHandlerListExists(){const e=typeof window.aNFormHandlerMap;return e!=="undefined"&&e==="object"}static _createFormHandlerList(){window.aNFormHandlerMap=new Map}_hasFormHandlerFunction(e=null){return"anFormHandler"in this._getFormElement(e).dataset}_getFormElement(e=null){let t;return i.isNull(e)?t=this.parentForm:t=e,t}_storeFormHandlerFunction(e=null){this.constructor._doesFormHandlerListExists()||this.constructor._createFormHandlerList();const t=i.randomString();this._getFormElement(e).dataset.anFormHandler=t,window.aNFormHandlerMap.set(t,{submitFn:this._onFormSubmitFunc,resetFn:this._onFormResetFunc})}_getFormHandlerKey(){this._hasFormHandlerFunction()||i.throwError("Unable to retrieve the form handler name");const e=this.parentForm.dataset.anFormHandler;return e===""&&i.throwError("The form handler name is invalid"),e}_getFormHandlerFunction(){const e=this._getFormHandlerKey();return window.aNFormHandlerMap.get(e)}_removeFormDataSetInfo(){this._decrementParentFormCounter(),window.aNFormHandlerMap.delete(this._getFormHandlerKey()),this.parentForm.removeAttribute("data-an-count"),this.parentForm.removeAttribute("data-an-form-handler")}_setWritePermissions(e=!1){e&&this.domElement.readOnly||this.settings.readOnly?this._setReadOnly():this._setReadWrite()}_setReadOnly(){this.isInputElement?this.domElement.readOnly=!0:this.domElement.setAttribute("contenteditable",!1)}_setReadWrite(){this.isInputElement?this.domElement.readOnly=!1:this.domElement.setAttribute("contenteditable",!0)}_addWatcher(){if(!i.isUndefined(this.getterSetter)){const{set:e,get:t}=this.getterSetter;Object.defineProperty(this.domElement,this.attributeToWatch,{configurable:!0,get:()=>t.call(this.domElement),set:s=>{e.call(this.domElement,s),this.settings.watchExternalChanges&&!this.internalModification&&this.set(s)}})}}_removeWatcher(){if(!i.isUndefined(this.getterSetter)){const{set:e,get:t}=this.getterSetter;Object.defineProperty(this.domElement,this.attributeToWatch,{configurable:!0,get:()=>t.call(this.domElement),set:s=>{e.call(this.domElement,s)}})}}_getAttributeToWatch(){let e;if(this.isInputElement)e="value";else{const t=this.domElement.nodeType;t===Node.ELEMENT_NODE||t===Node.DOCUMENT_NODE||t===Node.DOCUMENT_FRAGMENT_NODE?e="textContent":t===Node.TEXT_NODE&&(e="nodeValue")}return e}_historyTableAdd(){const e=this.historyTable.length===0;if(e||this.rawValue!==this._historyTableCurrentValueUsed()){let t=!0;if(!e){const s=this.historyTableIndex+1;s<this.historyTable.length&&this.rawValue===this.historyTable[s].value?t=!1:i.arrayTrim(this.historyTable,this.historyTableIndex+1)}if(this.historyTableIndex++,t){const s=i.getElementSelection(this.domElement);this.selectionStart=s.start,this.selectionEnd=s.end,this.historyTable.push({value:this.rawValue,start:this.selectionStart+1,end:this.selectionEnd+1}),this.historyTable.length>1&&(this.historyTable[this.historyTableIndex-1].start=this.selectionStart,this.historyTable[this.historyTableIndex-1].end=this.selectionEnd)}this.historyTable.length>this.settings.historySize&&this._historyTableForget()}}_historyTableUndoOrRedo(e=!0){let t;if(e?(t=this.historyTableIndex>0,t&&this.historyTableIndex--):(t=this.historyTableIndex+1<this.historyTable.length,t&&this.historyTableIndex++),t){const s=this.historyTable[this.historyTableIndex];this.set(s.value,null,!1),i.setElementSelection(this.domElement,s.start,s.end)}}_historyTableUndo(){this._historyTableUndoOrRedo(!0)}_historyTableRedo(){this._historyTableUndoOrRedo(!1)}_historyTableForget(e=1){const t=[];for(let s=0;s<e;s++)t.push(this.historyTable.shift()),this.historyTableIndex--,this.historyTableIndex<0&&(this.historyTableIndex=0);return t.length===1?t[0]:t}_historyTableCurrentValueUsed(){let e=this.historyTableIndex;e<0&&(e=0);let t;return i.isUndefinedOrNullOrEmpty(this.historyTable[e])?t="":t=this.historyTable[e].value,t}_parseStyleRules(){i.isUndefinedOrNullOrEmpty(this.settings.styleRules)||this.rawValue===""||(i.isUndefinedOrNullOrEmpty(this.settings.styleRules.positive)||(this.rawValue>=0?this._addCSSClass(this.settings.styleRules.positive):this._removeCSSClass(this.settings.styleRules.positive)),i.isUndefinedOrNullOrEmpty(this.settings.styleRules.negative)||(this.rawValue<0?this._addCSSClass(this.settings.styleRules.negative):this._removeCSSClass(this.settings.styleRules.negative)),!i.isUndefinedOrNullOrEmpty(this.settings.styleRules.ranges)&&this.settings.styleRules.ranges.length!==0&&this.settings.styleRules.ranges.forEach(e=>{this.rawValue>=e.min&&this.rawValue<e.max?this._addCSSClass(e.class):this._removeCSSClass(e.class)}),!i.isUndefinedOrNullOrEmpty(this.settings.styleRules.userDefined)&&this.settings.styleRules.userDefined.length!==0&&this.settings.styleRules.userDefined.forEach(e=>{if(i.isFunction(e.callback))if(i.isString(e.classes))e.callback(this.rawValue)?this._addCSSClass(e.classes):this._removeCSSClass(e.classes);else if(i.isArray(e.classes))if(e.classes.length===2)e.callback(this.rawValue)?(this._addCSSClass(e.classes[0]),this._removeCSSClass(e.classes[1])):(this._removeCSSClass(e.classes[0]),this._addCSSClass(e.classes[1]));else if(e.classes.length>2){const t=e.callback(this.rawValue);i.isArray(t)?e.classes.forEach((s,a)=>{i.isInArray(a,t)?this._addCSSClass(s):this._removeCSSClass(s)}):i.isInt(t)?e.classes.forEach((s,a)=>{a===t?this._addCSSClass(s):this._removeCSSClass(s)}):i.isNull(t)?e.classes.forEach(s=>{this._removeCSSClass(s)}):i.throwError(`The callback result is not an array nor a valid array index, ${typeof t} given.`)}else i.throwError("The classes attribute is not valid for the `styleRules` option.");else i.isUndefinedOrNullOrEmpty(e.classes)?e.callback(this):i.throwError("The callback/classes structure is not valid for the `styleRules` option.");else i.warning(`The given \`styleRules\` callback is not a function, ${typeof e.callback} given.`,this.settings.showWarnings)}))}_addCSSClass(e){this.domElement.classList.add(e)}_removeCSSClass(e){this.domElement.classList.remove(e)}update(...e){Array.isArray(e)&&Array.isArray(e[0])&&(e=e[0]);const t=i.cloneObject(this.settings),s=this.rawValue;let a={};i.isUndefinedOrNullOrEmpty(e)||e.length===0?a=null:e.length>=1&&e.forEach(n=>{this.constructor._isPreDefinedOptionValid(n)&&(n=this.constructor._getOptionObject(n)),Object.assign(a,n)});try{this._setSettings(a,!0),this._setWritePermissions(),this._updateEventListeners(),this.set(s)}catch(n){return this._setSettings(t,!0),i.throwError(`Unable to update the settings, those are invalid: [${n}]`),this}return this}getSettings(){return this.settings}set(e,t=null,s=!0){if(i.isUndefined(e))return i.warning("You are trying to set an 'undefined' value ; an error could have occurred.",this.settings.showWarnings),this;if(i.isNull(t)||this._setSettings(t,!0),e===null&&this.settings.emptyInputBehavior!==r.options.emptyInputBehavior.null)return i.warning(`You are trying to set the \`null\` value while the \`emptyInputBehavior\` option is set to ${this.settings.emptyInputBehavior}. If you want to be able to set the \`null\` value, you need to change the 'emptyInputBehavior' option to \`'null'\`.`,this.settings.showWarnings),this;let a;if(e===null)return this._setElementAndRawValue(null,null,s),this._saveValueToPersistentStorage(),this;if(a=this.constructor._toNumericValue(e,this.settings),isNaN(Number(a)))return i.warning("The value you are trying to set results in `NaN`. The element value is set to the empty string instead.",this.settings.showWarnings),this.setValue("",s),this;if(a==="")switch(this.settings.emptyInputBehavior){case r.options.emptyInputBehavior.zero:a=0;break;case r.options.emptyInputBehavior.min:a=this.settings.minimumValue;break;case r.options.emptyInputBehavior.max:a=this.settings.maximumValue;break;default:i.isNumber(this.settings.emptyInputBehavior)&&(a=Number(this.settings.emptyInputBehavior))}if(a!==""){const[n,c]=this.constructor._checkIfInRangeWithOverrideOption(a,this.settings);if(n&&c&&this.settings.valuesToStrings&&this._checkValuesToStrings(a))return this._setElementAndRawValue(this.settings.valuesToStrings[a],a,s),this._saveValueToPersistentStorage(),this;if(i.isZeroOrHasNoValue(a)&&(a="0"),n&&c){let l=this.constructor._roundRawValue(a,this.settings);return l=this._trimLeadingAndTrailingZeros(l.replace(this.settings.decimalCharacter,".")),a=this._getRawValueToFormat(a),this.isFocused?a=this.constructor._roundFormattedValueShownOnFocus(a,this.settings):(this.settings.divisorWhenUnfocused&&(a=a/this.settings.divisorWhenUnfocused,a=a.toString()),a=this.constructor._roundFormattedValueShownOnBlur(a,this.settings)),a=this.constructor._modifyNegativeSignAndDecimalCharacterForFormattedValue(a,this.settings),a=this.constructor._addGroupSeparators(a,this.settings,this.isFocused,this.rawValue,l),!this.isFocused&&this.settings.symbolWhenUnfocused&&(a=`${a}${this.settings.symbolWhenUnfocused}`),(this.settings.decimalPlacesShownOnFocus||this.settings.divisorWhenUnfocused)&&this._saveValueToPersistentStorage(),this._setElementAndRawValue(a,l,s),this._setValidOrInvalidState(l),this}else return this._triggerRangeEvents(n,c),i.throwError(`The value [${a}] being set falls outside of the minimumValue [${this.settings.minimumValue}] and maximumValue [${this.settings.maximumValue}] range set for this element`),this._removeValueFromPersistentStorage(),this.setValue("",s),this}else{let n;return this.settings.emptyInputBehavior===r.options.emptyInputBehavior.always?n=this.settings.currencySymbol:n="",this._setElementAndRawValue(n,"",s),this}}setUnformatted(e,t=null){if(e===null||i.isUndefined(e))return this;i.isNull(t)||this._setSettings(t,!0);const s=this.constructor._removeBrackets(e,this.settings),a=this.constructor._stripAllNonNumberCharacters(s,this.settings,!0,this.isFocused);return i.isNumber(a)||i.throwError("The value is not a valid one, it's not a numeric string nor a recognized currency."),this.constructor._isWithinRangeWithOverrideOption(a,this.settings)?this.setValue(e):i.throwError(`The value is out of the range limits [${this.settings.minimumValue}, ${this.settings.maximumValue}].`),this}setValue(e,t=!0){return this._setElementAndRawValue(e,t),this}_setRawValue(e,t=!0){if(this.rawValue!==e){const s=this.rawValue;this.rawValue=e,!i.isNull(this.settings.rawValueDivisor)&&this.settings.rawValueDivisor!==0&&e!==""&&e!==null&&this._isUserManuallyEditingTheValue()&&(this.rawValue/=this.settings.rawValueDivisor),this._triggerEvent(r.events.rawValueModified,this.domElement,{oldRawValue:s,newRawValue:this.rawValue,isPristine:this.isPristine(!0),error:null,aNElement:this}),this._parseStyleRules(),t&&window.requestAnimationFrame(()=>this._historyTableAdd())}}_setElementValue(e,t=!0){const s=i.getElementValue(this.domElement);return e!==s&&(this.internalModification=!0,i.setElementValue(this.domElement,e),this.internalModification=!1,t&&this._triggerEvent(r.events.formatted,this.domElement,{oldValue:s,newValue:e,oldRawValue:this.rawValue,newRawValue:this.rawValue,isPristine:this.isPristine(!1),error:null,aNElement:this})),this}_setElementAndRawValue(e,t=null,s=!0){return i.isNull(t)?t=e:i.isBoolean(t)&&(s=t,t=e),this._setElementValue(e),this._setRawValue(t,s),this}_getRawValueToFormat(e){let t;return!i.isNull(this.settings.rawValueDivisor)&&this.settings.rawValueDivisor!==0&&e!==""&&e!==null?t=e*this.settings.rawValueDivisor:t=e,t}_checkValuesToStrings(e){return this.constructor._checkValuesToStringsArray(e,this.valuesToStringsKeys)}static _checkValuesToStringsArray(e,t){return i.isInArray(String(e),t)}static _checkValuesToStringsSettings(e,t){return this._checkValuesToStringsArray(e,Object.keys(t.valuesToStrings))}static _checkStringsToValuesSettings(e,t){return this._checkValuesToStringsArray(e,Object.values(t.valuesToStrings))}_isUserManuallyEditingTheValue(){return this.isFocused&&this.isEditing||this.isDropEvent}_executeCallback(e,t){!i.isNull(t)&&i.isFunction(t)&&t(e,this)}_triggerEvent(e,t=document,s=null){i.triggerEvent(e,t,s,this.settings.eventBubbles,this.settings.eventIsCancelable)}get(e=null){return this.getNumericString(e)}getNumericString(e=null){let t;return i.isNull(this.rawValue)?t=null:t=i.trimPaddedZerosFromDecimalPlaces(this.rawValue),this._executeCallback(t,e),t}getFormatted(e=null){"value"in this.domElement||"textContent"in this.domElement||i.throwError("Unable to get the formatted string from the element.");const t=i.getElementValue(this.domElement);return this._executeCallback(t,e),t}getNumber(e=null){let t;return this.rawValue===null?t=null:t=this.constructor._toLocale(this.getNumericString(),"number",this.settings),this._executeCallback(t,e),t}getLocalized(e=null,t=null){i.isFunction(e)&&i.isNull(t)&&(t=e,e=null);let s;i.isEmptyString(this.rawValue)?s="":s=""+Number(this.rawValue),s!==""&&Number(s)===0&&this.settings.leadingZero!==r.options.leadingZero.keep&&(s="0");let a;i.isNull(e)?a=this.settings.outputFormat:a=e;const n=this.constructor._toLocale(s,a,this.settings);return this._executeCallback(n,t),n}reformat(){return this.set(this.rawValue),this}unformat(){return this._setElementValue(this.getNumericString()),this}unformatLocalized(e=null){return this._setElementValue(this.getLocalized(e)),this}isPristine(e=!0){let t;return e?t=this.initialValue===this.getNumericString():t=this.initialValueHtmlAttribute===this.getFormatted(),t}select(){return this.settings.selectNumberOnly?this.selectNumber():this._defaultSelectAll(),this}_defaultSelectAll(){i.setElementSelection(this.domElement,0,i.getElementValue(this.domElement).length)}selectNumber(){const e=i.getElementValue(this.domElement),t=e.length,s=this.settings.currencySymbol.length,a=this.settings.currencySymbolPlacement,n=i.isNegative(e,this.settings.negativeSignCharacter)?1:0,c=this.settings.suffixText.length;let o;a===r.options.currencySymbolPlacement.suffix?o=0:this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.left&&n===1&&s>0?o=s+1:o=s;let l;if(a===r.options.currencySymbolPlacement.prefix)l=t-c;else switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.left:l=t-(c+s);break;case r.options.negativePositiveSignPlacement.right:s>0?l=t-(s+n+c):l=t-(s+c);break;default:l=t-(s+c)}return i.setElementSelection(this.domElement,o,l),this}selectInteger(){let e=0;const t=this.rawValue>=0;(this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix||this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix&&(this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.prefix||this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.none))&&(this.settings.showPositiveSign&&t||!t&&this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.left)&&(e=e+1),this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix&&(e=e+this.settings.currencySymbol.length);const s=i.getElementValue(this.domElement);let a=s.indexOf(this.settings.decimalCharacter);return a===-1&&(this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix?a=s.length-this.settings.currencySymbol.length:a=s.length,!t&&(this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.suffix||this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix)&&(a=a-1),a=a-this.settings.suffixText.length),i.setElementSelection(this.domElement,e,a),this}selectDecimal(){let e=i.getElementValue(this.domElement).indexOf(this.settings.decimalCharacter),t;if(e===-1)e=0,t=0;else{e=e+1;let s;this.isFocused?s=this.settings.decimalPlacesShownOnFocus:s=this.settings.decimalPlacesShownOnBlur,t=e+Number(s)}return i.setElementSelection(this.domElement,e,t),this}node(){return this.domElement}parent(){return this.domElement.parentNode}detach(e=null){let t;return i.isNull(e)?t=this.domElement:t=e.node(),this._removeFromLocalList(t),this}attach(e,t=!0){return this._addToLocalList(e.node()),t&&e.update(this.settings),this}formatOther(e,t=null){return this._formatOrUnformatOther(!0,e,t)}unformatOther(e,t=null){return this._formatOrUnformatOther(!1,e,t)}_formatOrUnformatOther(e,t,s=null){let a;i.isNull(s)?a=this.settings:a=this._cloneAndMergeSettings(s);let n;if(i.isElement(t)){const c=i.getElementValue(t);return e?n=r.format(c,a):n=r.unformat(c,a),i.setElementValue(t,n),null}return e?n=r.format(t,a):n=r.unformat(t,a),n}init(e,t=!0){let s=!1,a=[];if(i.isString(e)?a=[...document.querySelectorAll(e)]:i.isElement(e)?(a.push(e),s=!0):i.isArray(e)?a=e:i.throwError("The given parameters to the 'init' function are invalid."),a.length===0)return i.warning("No valid DOM elements were given hence no AutoNumeric object were instantiated.",!0),[];const n=this._getLocalList(),c=[];return a.forEach(o=>{const l=this.settings.createLocalList;t&&(this.settings.createLocalList=!1);const h=new r(o,i.getElementValue(o),this.settings);t&&(h._setLocalList(n),this._addToLocalList(o,h),this.settings.createLocalList=l),c.push(h)}),s?c[0]:c}clear(e=!1){if(e){const t={emptyInputBehavior:r.options.emptyInputBehavior.focus};this.set("",t)}else this.set("");return this}remove(){this._removeValueFromPersistentStorage(),this._removeEventListeners(),this._removeWatcher(),this._removeFromLocalList(this.domElement),this.constructor._removeFromGlobalList(this)}wipe(){this._setElementValue("",!1),this.remove()}nuke(){this.remove(),this.domElement.parentNode.removeChild(this.domElement)}form(e=!1){if(e||i.isUndefinedOrNullOrEmpty(this.parentForm)){const t=this._getParentForm();if(!i.isNull(t)&&t!==this.parentForm){const s=this._getFormAutoNumericChildren(this.parentForm);this.parentForm.dataset.anCount=s.length,this._hasFormHandlerFunction(t)?this._incrementParentFormCounter(t):(this._storeFormHandlerFunction(t),this._initializeFormCounterToOne(t))}this.parentForm=t}return this.parentForm}_getFormAutoNumericChildren(e){const t=[...e.elements],s=this._getContenteditableElements(e);return i.arrayUnique(t,s).filter(n=>this.constructor.isManagedByAutoNumeric(n))}_getContenteditableElements(e){if(i.isUndefinedOrNullOrEmpty(e)||!e.hasAttribute("id"))return[];const t=[...e.querySelectorAll("[contenteditable=true]")],s=[...document.querySelectorAll(`*:not(input)[form=${e.getAttribute("id")}][contenteditable=true]`)];return i.arrayUnique(t,s)}_getParentForm(){if(!i.isUndefined(this.domElement.form))return this.domElement.form;if(this.domElement.tagName.toLowerCase()==="body")return null;let e=this.domElement,t;do{if(e=e.parentNode,i.isNull(e))return null;if(e.tagName?t=e.tagName.toLowerCase():t="",t==="body")break}while(t!=="form");return t==="form"?e:null}formNumericString(){return this.constructor._serializeNumericString(this.form(),this.settings.serializeSpaces)}formFormatted(){return this.constructor._serializeFormatted(this.form(),this.settings.serializeSpaces)}formLocalized(e=null){let t;return i.isNull(e)?t=this.settings.outputFormat:t=e,this.constructor._serializeLocalized(this.form(),this.settings.serializeSpaces,t)}formArrayNumericString(){return this.constructor._serializeNumericStringArray(this.form(),this.settings.serializeSpaces)}formArrayFormatted(){return this.constructor._serializeFormattedArray(this.form(),this.settings.serializeSpaces)}formArrayLocalized(e=null){let t;return i.isNull(e)?t=this.settings.outputFormat:t=e,this.constructor._serializeLocalizedArray(this.form(),this.settings.serializeSpaces,t)}formJsonNumericString(){return JSON.stringify(this.formArrayNumericString())}formJsonFormatted(){return JSON.stringify(this.formArrayFormatted())}formJsonLocalized(e=null){return JSON.stringify(this.formArrayLocalized(e))}formUnformat(){return this.constructor._getChildANInputElement(this.form()).forEach(t=>{r.getAutoNumericElement(t).unformat()}),this}formUnformatLocalized(){return this.constructor._getChildANInputElement(this.form()).forEach(t=>{r.getAutoNumericElement(t).unformatLocalized()}),this}formReformat(){return this.constructor._getChildANInputElement(this.form()).forEach(t=>{r.getAutoNumericElement(t).reformat()}),this}formSubmitNumericString(e=null){return i.isNull(e)?(this.formUnformat(),this.form().submit(),this.formReformat()):i.isFunction(e)?e(this.formNumericString()):i.throwError("The given callback is not a function."),this}formSubmitFormatted(e=null){return i.isNull(e)?this.form().submit():i.isFunction(e)?e(this.formFormatted()):i.throwError("The given callback is not a function."),this}formSubmitLocalized(e=null,t=null){return i.isNull(t)?(this.formUnformatLocalized(),this.form().submit(),this.formReformat()):i.isFunction(t)?t(this.formLocalized(e)):i.throwError("The given callback is not a function."),this}formSubmitArrayNumericString(e){return i.isFunction(e)?e(this.formArrayNumericString()):i.throwError("The given callback is not a function."),this}formSubmitArrayFormatted(e){return i.isFunction(e)?e(this.formArrayFormatted()):i.throwError("The given callback is not a function."),this}formSubmitArrayLocalized(e,t=null){return i.isFunction(e)?e(this.formArrayLocalized(t)):i.throwError("The given callback is not a function."),this}formSubmitJsonNumericString(e){return i.isFunction(e)?e(this.formJsonNumericString()):i.throwError("The given callback is not a function."),this}formSubmitJsonFormatted(e){return i.isFunction(e)?e(this.formJsonFormatted()):i.throwError("The given callback is not a function."),this}formSubmitJsonLocalized(e,t=null){return i.isFunction(e)?e(this.formJsonLocalized(t)):i.throwError("The given callback is not a function."),this}static _unformatAltHovered(e){e.hoveredWithAlt=!0,e.unformat()}static _reformatAltHovered(e){e.hoveredWithAlt=!1,e.reformat()}static _getChildANInputElement(e){const t=e.getElementsByTagName("input"),s=[];return Array.prototype.slice.call(t,0).forEach(n=>{this.test(n)&&s.push(n)}),s}static test(e){return this._isInGlobalList(i.domElement(e))}static _createWeakMap(e){window[e]=new WeakMap}static _createGlobalList(){this.autoNumericGlobalListName="autoNumericGlobalList",this._createWeakMap(this.autoNumericGlobalListName)}static _doesGlobalListExists(){const e=typeof window[this.autoNumericGlobalListName];return e!=="undefined"&&e==="object"}static _addToGlobalList(e){this._doesGlobalListExists()||this._createGlobalList();const t=e.node();if(this._isInGlobalList(t)){if(this._getFromGlobalList(t)===this)return;i.warning("A reference to the DOM element you just initialized already exists in the global AutoNumeric element list. Please make sure to not initialize the same DOM element multiple times.",e.getSettings().showWarnings)}window[this.autoNumericGlobalListName].set(t,e)}static _removeFromGlobalList(e){this._doesGlobalListExists()&&window[this.autoNumericGlobalListName].delete(e.node())}static _getFromGlobalList(e){return this._doesGlobalListExists()?window[this.autoNumericGlobalListName].get(e):null}static _isInGlobalList(e){return this._doesGlobalListExists()?window[this.autoNumericGlobalListName].has(e):!1}_createLocalList(){this.autoNumericLocalList=new Map,this._addToLocalList(this.domElement)}_deleteLocalList(){delete this.autoNumericLocalList}_setLocalList(e){this.autoNumericLocalList=e}_getLocalList(){return this.autoNumericLocalList}_hasLocalList(){return this.autoNumericLocalList instanceof Map&&this.autoNumericLocalList.size!==0}_addToLocalList(e,t=null){i.isNull(t)&&(t=this),i.isUndefined(this.autoNumericLocalList)?i.throwError(`The local list provided does not exists when trying to add an element. [${this.autoNumericLocalList}] given.`):this.autoNumericLocalList.set(e,t)}_removeFromLocalList(e){i.isUndefined(this.autoNumericLocalList)?this.settings.createLocalList&&i.throwError(`The local list provided does not exists when trying to remove an element. [${this.autoNumericLocalList}] given.`):this.autoNumericLocalList.delete(e)}_mergeSettings(...e){Object.assign(this.settings,...e)}_cloneAndMergeSettings(...e){const t={};return Object.assign(t,this.settings,...e),t}static validate(e,t=!0,s=null){(i.isUndefinedOrNullOrEmpty(e)||!i.isObject(e))&&i.throwError(`The userOptions are invalid ; it should be a valid object, [${e}] given.`);const a=i.isObject(s);!a&&!i.isNull(s)&&i.throwError(`The 'originalOptions' parameter is invalid ; it should either be a valid option object or \`null\`, [${e}] given.`),i.isNull(e)||this._convertOldOptionsToNewOnes(e);let n;t?n=Object.assign({},this.getDefaultConfig(),e):n=e,!i.isTrueOrFalseString(n.showWarnings)&&!i.isBoolean(n.showWarnings)&&i.throwError(`The debug option 'showWarnings' is invalid ; it should be either 'true' or 'false', [${n.showWarnings}] given.`);const c=/^[0-9]+$/,o=/[0-9]+/,l=/^-?[0-9]+(\.?[0-9]+)?$/,h=/^[0-9]+(\.?[0-9]+)?$/;!i.isTrueOrFalseString(n.allowDecimalPadding)&&!i.isBoolean(n.allowDecimalPadding)&&n.allowDecimalPadding!==r.options.allowDecimalPadding.floats&&!(i.isNumber(n.allowDecimalPadding)&&n.allowDecimalPadding>0)&&i.throwError(`The decimal padding option 'allowDecimalPadding' is invalid ; it should either be \`false\`, \`true\`, \`'floats'\` or a positive integer superior to 0, [${n.allowDecimalPadding}] given.`),i.isNumber(n.allowDecimalPadding)&&n.allowDecimalPadding>n.decimalPlaces&&i.warning(`Setting 'allowDecimalPadding' to a number [${n.allowDecimalPadding}] superior to the current 'decimalPlaces' settings [${n.decimalPlaces}] is useless, since the padding will not be shown.`,n.showWarnings),(n.allowDecimalPadding===r.options.allowDecimalPadding.never||n.allowDecimalPadding==="false")&&(n.decimalPlaces!==r.options.decimalPlaces.none||n.decimalPlacesShownOnBlur!==r.options.decimalPlacesShownOnBlur.none||n.decimalPlacesShownOnFocus!==r.options.decimalPlacesShownOnFocus.none)&&i.warning(`Setting 'allowDecimalPadding' to [${n.allowDecimalPadding}] will override the current 'decimalPlaces*' settings [${n.decimalPlaces}, ${n.decimalPlacesShownOnBlur} and ${n.decimalPlacesShownOnFocus}].`,n.showWarnings),!i.isTrueOrFalseString(n.alwaysAllowDecimalCharacter)&&!i.isBoolean(n.alwaysAllowDecimalCharacter)&&i.throwError(`The option 'alwaysAllowDecimalCharacter' is invalid ; it should either be \`true\` or \`false\`, [${n.alwaysAllowDecimalCharacter}] given.`),!i.isNull(n.caretPositionOnFocus)&&!i.isInArray(n.caretPositionOnFocus,[r.options.caretPositionOnFocus.start,r.options.caretPositionOnFocus.end,r.options.caretPositionOnFocus.decimalLeft,r.options.caretPositionOnFocus.decimalRight])&&i.throwError(`The display on empty string option 'caretPositionOnFocus' is invalid ; it should either be \`null\`, 'focus', 'press', 'always' or 'zero', [${n.caretPositionOnFocus}] given.`);let d;a?d=s:d=this._correctCaretPositionOnFocusAndSelectOnFocusOptions(e),!i.isNull(d)&&d.caretPositionOnFocus!==r.options.caretPositionOnFocus.doNoForceCaretPosition&&d.selectOnFocus===r.options.selectOnFocus.select&&i.warning(`The 'selectOnFocus' option is set to 'select', which is in conflict with the 'caretPositionOnFocus' which is set to '${d.caretPositionOnFocus}'. As a result, if this has been called when instantiating an AutoNumeric object, the 'selectOnFocus' option is forced to 'doNotSelect'.`,n.showWarnings),i.isInArray(n.digitGroupSeparator,[r.options.digitGroupSeparator.comma,r.options.digitGroupSeparator.dot,r.options.digitGroupSeparator.normalSpace,r.options.digitGroupSeparator.thinSpace,r.options.digitGroupSeparator.narrowNoBreakSpace,r.options.digitGroupSeparator.noBreakSpace,r.options.digitGroupSeparator.noSeparator,r.options.digitGroupSeparator.apostrophe,r.options.digitGroupSeparator.arabicThousandsSeparator,r.options.digitGroupSeparator.dotAbove,r.options.digitGroupSeparator.privateUseTwo])||i.throwError(`The thousand separator character option 'digitGroupSeparator' is invalid ; it should be ',', '.', '٬', '˙', "'", '', ' ', ' ', ' ', ' ' or empty (''), [${n.digitGroupSeparator}] given.`),!i.isTrueOrFalseString(n.showOnlyNumbersOnFocus)&&!i.isBoolean(n.showOnlyNumbersOnFocus)&&i.throwError(`The 'showOnlyNumbersOnFocus' option is invalid ; it should be either 'true' or 'false', [${n.showOnlyNumbersOnFocus}] given.`),!i.isInArray(n.digitalGroupSpacing,[r.options.digitalGroupSpacing.two,r.options.digitalGroupSpacing.twoThree,r.options.digitalGroupSpacing.twoScaled,r.options.digitalGroupSpacing.three,r.options.digitalGroupSpacing.four])&&!(n.digitalGroupSpacing>=2&&n.digitalGroupSpacing<=4)&&i.throwError(`The grouping separator option for thousands 'digitalGroupSpacing' is invalid ; it should be '2', '2t', '2s', '3', or '4', [${n.digitalGroupSpacing}] given.`),i.isInArray(n.decimalCharacter,[r.options.decimalCharacter.comma,r.options.decimalCharacter.dot,r.options.decimalCharacter.middleDot,r.options.decimalCharacter.arabicDecimalSeparator,r.options.decimalCharacter.decimalSeparatorKeySymbol])||i.throwError(`The decimal separator character option 'decimalCharacter' is invalid ; it should be '.', ',', '·', '⎖' or '٫', [${n.decimalCharacter}] given.`),n.decimalCharacter===n.digitGroupSeparator&&i.throwError(`autoNumeric will not function properly when the decimal character 'decimalCharacter' [${n.decimalCharacter}] and the thousand separator 'digitGroupSeparator' [${n.digitGroupSeparator}] are the same character.`),!i.isNull(n.decimalCharacterAlternative)&&!i.isString(n.decimalCharacterAlternative)&&i.throwError(`The alternate decimal separator character option 'decimalCharacterAlternative' is invalid ; it should be a string, [${n.decimalCharacterAlternative}] given.`),n.currencySymbol!==""&&!i.isString(n.currencySymbol)&&i.throwError(`The currency symbol option 'currencySymbol' is invalid ; it should be a string, [${n.currencySymbol}] given.`),i.isInArray(n.currencySymbolPlacement,[r.options.currencySymbolPlacement.prefix,r.options.currencySymbolPlacement.suffix])||i.throwError(`The placement of the currency sign option 'currencySymbolPlacement' is invalid ; it should either be 'p' (prefix) or 's' (suffix), [${n.currencySymbolPlacement}] given.`),i.isInArray(n.negativePositiveSignPlacement,[r.options.negativePositiveSignPlacement.prefix,r.options.negativePositiveSignPlacement.suffix,r.options.negativePositiveSignPlacement.left,r.options.negativePositiveSignPlacement.right,r.options.negativePositiveSignPlacement.none])||i.throwError(`The placement of the negative sign option 'negativePositiveSignPlacement' is invalid ; it should either be 'p' (prefix), 's' (suffix), 'l' (left), 'r' (right) or 'null', [${n.negativePositiveSignPlacement}] given.`),!i.isTrueOrFalseString(n.showPositiveSign)&&!i.isBoolean(n.showPositiveSign)&&i.throwError(`The show positive sign option 'showPositiveSign' is invalid ; it should be either 'true' or 'false', [${n.showPositiveSign}] given.`),(!i.isString(n.suffixText)||n.suffixText!==""&&(i.isNegative(n.suffixText,n.negativeSignCharacter)||o.test(n.suffixText)))&&i.throwError(`The additional suffix option 'suffixText' is invalid ; it should not contains the negative sign '${n.negativeSignCharacter}' nor any numerical characters, [${n.suffixText}] given.`),(!i.isString(n.negativeSignCharacter)||n.negativeSignCharacter.length!==1||i.isUndefinedOrNullOrEmpty(n.negativeSignCharacter)||o.test(n.negativeSignCharacter))&&i.throwError(`The negative sign character option 'negativeSignCharacter' is invalid ; it should be a single character, and cannot be any numerical characters, [${n.negativeSignCharacter}] given.`),(!i.isString(n.positiveSignCharacter)||n.positiveSignCharacter.length!==1||i.isUndefinedOrNullOrEmpty(n.positiveSignCharacter)||o.test(n.positiveSignCharacter))&&i.throwError(`The positive sign character option 'positiveSignCharacter' is invalid ; it should be a single character, and cannot be any numerical characters, [${n.positiveSignCharacter}] given.
If you want to show the positive sign character, you need to set the \`showPositiveSign\` option to \`true\`.`),n.negativeSignCharacter===n.positiveSignCharacter&&i.throwError(`The positive 'positiveSignCharacter' and negative 'negativeSignCharacter' sign characters cannot be identical ; [${n.negativeSignCharacter}] given.`),!i.isTrueOrFalseString(n.negativePositiveSignBehavior)&&!i.isBoolean(n.negativePositiveSignBehavior)&&i.throwError(`The option 'negativePositiveSignBehavior' is invalid ; it should be either 'true' or 'false', [${n.negativePositiveSignBehavior}] given.`);const[g,f]=i.isNull(n.negativeBracketsTypeOnBlur)?["",""]:n.negativeBracketsTypeOnBlur.split(",");(i.contains(n.digitGroupSeparator,n.negativeSignCharacter)||i.contains(n.decimalCharacter,n.negativeSignCharacter)||i.contains(n.decimalCharacterAlternative,n.negativeSignCharacter)||i.contains(g,n.negativeSignCharacter)||i.contains(f,n.negativeSignCharacter)||i.contains(n.suffixText,n.negativeSignCharacter))&&i.throwError(`The negative sign character option 'negativeSignCharacter' is invalid ; it should not be equal or a part of the digit separator, the decimal character, the decimal character alternative, the negative brackets or the suffix text, [${n.negativeSignCharacter}] given.`),(i.contains(n.digitGroupSeparator,n.positiveSignCharacter)||i.contains(n.decimalCharacter,n.positiveSignCharacter)||i.contains(n.decimalCharacterAlternative,n.positiveSignCharacter)||i.contains(g,n.positiveSignCharacter)||i.contains(f,n.positiveSignCharacter)||i.contains(n.suffixText,n.positiveSignCharacter))&&i.throwError(`The positive sign character option 'positiveSignCharacter' is invalid ; it should not be equal or a part of the digit separator, the decimal character, the decimal character alternative, the negative brackets or the suffix text, [${n.positiveSignCharacter}] given.`),!i.isNull(n.overrideMinMaxLimits)&&!i.isInArray(n.overrideMinMaxLimits,[r.options.overrideMinMaxLimits.ceiling,r.options.overrideMinMaxLimits.floor,r.options.overrideMinMaxLimits.ignore,r.options.overrideMinMaxLimits.invalid])&&i.throwError(`The override min & max limits option 'overrideMinMaxLimits' is invalid ; it should either be 'ceiling', 'floor', 'ignore' or 'invalid', [${n.overrideMinMaxLimits}] given.`),n.overrideMinMaxLimits!==r.options.overrideMinMaxLimits.invalid&&n.overrideMinMaxLimits!==r.options.overrideMinMaxLimits.ignore&&(n.minimumValue>0||n.maximumValue<0)&&i.warning("You've set a `minimumValue` or a `maximumValue` excluding the value `0`. AutoNumeric will force the users to always have a valid value in the input, hence preventing them to clear the field. If you want to allow for temporary invalid values (i.e. out-of-range), you should use the 'invalid' option for the 'overrideMinMaxLimits' setting."),(!i.isString(n.maximumValue)||!l.test(n.maximumValue))&&i.throwError(`The maximum possible value option 'maximumValue' is invalid ; it should be a string that represents a positive or negative number, [${n.maximumValue}] given.`),(!i.isString(n.minimumValue)||!l.test(n.minimumValue))&&i.throwError(`The minimum possible value option 'minimumValue' is invalid ; it should be a string that represents a positive or negative number, [${n.minimumValue}] given.`),parseFloat(n.minimumValue)>parseFloat(n.maximumValue)&&i.throwError(`The minimum possible value option is greater than the maximum possible value option ; 'minimumValue' [${n.minimumValue}] should be smaller than 'maximumValue' [${n.maximumValue}].`),i.isInt(n.decimalPlaces)&&n.decimalPlaces>=0||i.isString(n.decimalPlaces)&&c.test(n.decimalPlaces)||i.throwError(`The number of decimal places option 'decimalPlaces' is invalid ; it should be a positive integer, [${n.decimalPlaces}] given.`),i.isNull(n.decimalPlacesRawValue)||i.isInt(n.decimalPlacesRawValue)&&n.decimalPlacesRawValue>=0||i.isString(n.decimalPlacesRawValue)&&c.test(n.decimalPlacesRawValue)||i.throwError(`The number of decimal places for the raw value option 'decimalPlacesRawValue' is invalid ; it should be a positive integer or \`null\`, [${n.decimalPlacesRawValue}] given.`),this._validateDecimalPlacesRawValue(n),!i.isNull(n.decimalPlacesShownOnFocus)&&!c.test(String(n.decimalPlacesShownOnFocus))&&i.throwError(`The number of expanded decimal places option 'decimalPlacesShownOnFocus' is invalid ; it should be a positive integer or \`null\`, [${n.decimalPlacesShownOnFocus}] given.`),!i.isNull(n.decimalPlacesShownOnFocus)&&Number(n.decimalPlaces)>Number(n.decimalPlacesShownOnFocus)&&i.warning(`The extended decimal places 'decimalPlacesShownOnFocus' [${n.decimalPlacesShownOnFocus}] should be greater than the 'decimalPlaces' [${n.decimalPlaces}] value. Currently, this will limit the ability of your user to manually change some of the decimal places. Do you really want to do that?`,n.showWarnings),(!i.isNull(n.divisorWhenUnfocused)&&!h.test(n.divisorWhenUnfocused)||n.divisorWhenUnfocused===0||n.divisorWhenUnfocused==="0"||n.divisorWhenUnfocused===1||n.divisorWhenUnfocused==="1")&&i.throwError(`The divisor option 'divisorWhenUnfocused' is invalid ; it should be a positive number higher than one, preferably an integer, [${n.divisorWhenUnfocused}] given.`),!i.isNull(n.decimalPlacesShownOnBlur)&&!c.test(n.decimalPlacesShownOnBlur)&&i.throwError(`The number of decimals shown when unfocused option 'decimalPlacesShownOnBlur' is invalid ; it should be a positive integer or \`null\`, [${n.decimalPlacesShownOnBlur}] given.`),!i.isNull(n.symbolWhenUnfocused)&&!i.isString(n.symbolWhenUnfocused)&&i.throwError(`The symbol to show when unfocused option 'symbolWhenUnfocused' is invalid ; it should be a string, [${n.symbolWhenUnfocused}] given.`),!i.isTrueOrFalseString(n.saveValueToSessionStorage)&&!i.isBoolean(n.saveValueToSessionStorage)&&i.throwError(`The save to session storage option 'saveValueToSessionStorage' is invalid ; it should be either 'true' or 'false', [${n.saveValueToSessionStorage}] given.`),i.isInArray(n.onInvalidPaste,[r.options.onInvalidPaste.error,r.options.onInvalidPaste.ignore,r.options.onInvalidPaste.clamp,r.options.onInvalidPaste.truncate,r.options.onInvalidPaste.replace])||i.throwError(`The paste behavior option 'onInvalidPaste' is invalid ; it should either be 'error', 'ignore', 'clamp', 'truncate' or 'replace' (cf. documentation), [${n.onInvalidPaste}] given.`),i.isInArray(n.roundingMethod,[r.options.roundingMethod.halfUpSymmetric,r.options.roundingMethod.halfUpAsymmetric,r.options.roundingMethod.halfDownSymmetric,r.options.roundingMethod.halfDownAsymmetric,r.options.roundingMethod.halfEvenBankersRounding,r.options.roundingMethod.upRoundAwayFromZero,r.options.roundingMethod.downRoundTowardZero,r.options.roundingMethod.toCeilingTowardPositiveInfinity,r.options.roundingMethod.toFloorTowardNegativeInfinity,r.options.roundingMethod.toNearest05,r.options.roundingMethod.toNearest05Alt,r.options.roundingMethod.upToNext05,r.options.roundingMethod.downToNext05])||i.throwError(`The rounding method option 'roundingMethod' is invalid ; it should either be 'S', 'A', 's', 'a', 'B', 'U', 'D', 'C', 'F', 'N05', 'CHF', 'U05' or 'D05' (cf. documentation), [${n.roundingMethod}] given.`),!i.isNull(n.negativeBracketsTypeOnBlur)&&!i.isInArray(n.negativeBracketsTypeOnBlur,[r.options.negativeBracketsTypeOnBlur.parentheses,r.options.negativeBracketsTypeOnBlur.brackets,r.options.negativeBracketsTypeOnBlur.chevrons,r.options.negativeBracketsTypeOnBlur.curlyBraces,r.options.negativeBracketsTypeOnBlur.angleBrackets,r.options.negativeBracketsTypeOnBlur.japaneseQuotationMarks,r.options.negativeBracketsTypeOnBlur.halfBrackets,r.options.negativeBracketsTypeOnBlur.whiteSquareBrackets,r.options.negativeBracketsTypeOnBlur.quotationMarks,r.options.negativeBracketsTypeOnBlur.guillemets])&&i.throwError(`The brackets for negative values option 'negativeBracketsTypeOnBlur' is invalid ; it should either be '(,)', '[,]', '<,>', '{,}', '〈,〉', '｢,｣', '⸤,⸥', '⟦,⟧', '‹,›' or '«,»', [${n.negativeBracketsTypeOnBlur}] given.`),(!(i.isString(n.emptyInputBehavior)||i.isNumber(n.emptyInputBehavior))||!(i.isInArray(n.emptyInputBehavior,[r.options.emptyInputBehavior.focus,r.options.emptyInputBehavior.press,r.options.emptyInputBehavior.always,r.options.emptyInputBehavior.min,r.options.emptyInputBehavior.max,r.options.emptyInputBehavior.zero,r.options.emptyInputBehavior.null])||l.test(n.emptyInputBehavior)))&&i.throwError(`The display on empty string option 'emptyInputBehavior' is invalid ; it should either be 'focus', 'press', 'always', 'min', 'max', 'zero', 'null', a number, or a string that represents a number, [${n.emptyInputBehavior}] given.`),n.emptyInputBehavior===r.options.emptyInputBehavior.zero&&(n.minimumValue>0||n.maximumValue<0)&&i.throwError(`The 'emptyInputBehavior' option is set to 'zero', but this value is outside of the range defined by 'minimumValue' and 'maximumValue' [${n.minimumValue}, ${n.maximumValue}].`),l.test(String(n.emptyInputBehavior))&&(this._isWithinRangeWithOverrideOption(n.emptyInputBehavior,n)||i.throwError(`The 'emptyInputBehavior' option is set to a number or a string that represents a number, but its value [${n.emptyInputBehavior}] is outside of the range defined by the 'minimumValue' and 'maximumValue' options [${n.minimumValue}, ${n.maximumValue}].`)),!i.isTrueOrFalseString(n.eventBubbles)&&!i.isBoolean(n.eventBubbles)&&i.throwError(`The event bubbles option 'eventBubbles' is invalid ; it should be either 'true' or 'false', [${n.eventBubbles}] given.`),!i.isTrueOrFalseString(n.eventIsCancelable)&&!i.isBoolean(n.eventIsCancelable)&&i.throwError(`The event is cancelable option 'eventIsCancelable' is invalid ; it should be either 'true' or 'false', [${n.eventIsCancelable}] given.`),(i.isBoolean(n.invalidClass)||!/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(n.invalidClass))&&i.throwError(`The name of the 'invalidClass' option is not a valid CSS class name ; it should not be empty, and should follow the '^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$' regex, [${n.invalidClass}] given.`),i.isInArray(n.leadingZero,[r.options.leadingZero.allow,r.options.leadingZero.deny,r.options.leadingZero.keep])||i.throwError(`The leading zero behavior option 'leadingZero' is invalid ; it should either be 'allow', 'deny' or 'keep', [${n.leadingZero}] given.`),!i.isTrueOrFalseString(n.formatOnPageLoad)&&!i.isBoolean(n.formatOnPageLoad)&&i.throwError(`The format on initialization option 'formatOnPageLoad' is invalid ; it should be either 'true' or 'false', [${n.formatOnPageLoad}] given.`),!i.isTrueOrFalseString(n.formulaMode)&&!i.isBoolean(n.formulaMode)&&i.throwError(`The formula mode option 'formulaMode' is invalid ; it should be either 'true' or 'false', [${n.formulaMode}] given.`),(!c.test(n.historySize)||n.historySize===0)&&i.throwError(`The history size option 'historySize' is invalid ; it should be a positive integer, [${n.historySize}] given.`),!i.isTrueOrFalseString(n.selectNumberOnly)&&!i.isBoolean(n.selectNumberOnly)&&i.throwError(`The select number only option 'selectNumberOnly' is invalid ; it should be either 'true' or 'false', [${n.selectNumberOnly}] given.`),!i.isTrueOrFalseString(n.selectOnFocus)&&!i.isBoolean(n.selectOnFocus)&&i.throwError(`The select on focus option 'selectOnFocus' is invalid ; it should be either 'true' or 'false', [${n.selectOnFocus}] given.`),!i.isNull(n.defaultValueOverride)&&n.defaultValueOverride!==""&&!l.test(n.defaultValueOverride)&&i.throwError(`The unformatted default value option 'defaultValueOverride' is invalid ; it should be a string that represents a positive or negative number, [${n.defaultValueOverride}] given.`),!i.isTrueOrFalseString(n.unformatOnSubmit)&&!i.isBoolean(n.unformatOnSubmit)&&i.throwError(`The remove formatting on submit option 'unformatOnSubmit' is invalid ; it should be either 'true' or 'false', [${n.unformatOnSubmit}] given.`),!i.isNull(n.valuesToStrings)&&!i.isObject(n.valuesToStrings)&&i.throwError(`The option 'valuesToStrings' is invalid ; it should be an object, ideally with 'key -> value' entries, [${n.valuesToStrings}] given.`),!i.isNull(n.outputFormat)&&!i.isInArray(n.outputFormat,[r.options.outputFormat.string,r.options.outputFormat.number,r.options.outputFormat.dot,r.options.outputFormat.negativeDot,r.options.outputFormat.comma,r.options.outputFormat.negativeComma,r.options.outputFormat.dotNegative,r.options.outputFormat.commaNegative])&&i.throwError(`The custom locale format option 'outputFormat' is invalid ; it should either be null, 'string', 'number', '.', '-.', ',', '-,', '.-' or ',-', [${n.outputFormat}] given.`),!i.isTrueOrFalseString(n.isCancellable)&&!i.isBoolean(n.isCancellable)&&i.throwError(`The cancellable behavior option 'isCancellable' is invalid ; it should be either 'true' or 'false', [${n.isCancellable}] given.`),!i.isTrueOrFalseString(n.modifyValueOnUpDownArrow)&&!i.isBoolean(n.modifyValueOnUpDownArrow)&&i.throwError(`The increment/decrement on up and down arrow keys 'modifyValueOnUpDownArrow' is invalid ; it should be either 'true' or 'false', [${n.modifyValueOnUpDownArrow}] given.`),!i.isTrueOrFalseString(n.modifyValueOnWheel)&&!i.isBoolean(n.modifyValueOnWheel)&&i.throwError(`The increment/decrement on mouse wheel option 'modifyValueOnWheel' is invalid ; it should be either 'true' or 'false', [${n.modifyValueOnWheel}] given.`),!i.isTrueOrFalseString(n.watchExternalChanges)&&!i.isBoolean(n.watchExternalChanges)&&i.throwError(`The option 'watchExternalChanges' is invalid ; it should be either 'true' or 'false', [${n.watchExternalChanges}] given.`),i.isInArray(n.wheelOn,[r.options.wheelOn.focus,r.options.wheelOn.hover])||i.throwError(`The wheel behavior option 'wheelOn' is invalid ; it should either be 'focus' or 'hover', [${n.wheelOn}] given.`),(!(i.isString(n.upDownStep)||i.isNumber(n.upDownStep))||n.upDownStep!=="progressive"&&!h.test(n.upDownStep)||Number(n.upDownStep)===0)&&i.throwError(`The up/down arrow step value option 'upDownStep' is invalid ; it should either be the string 'progressive', or a number or a string that represents a positive number (excluding zero), [${n.upDownStep}] given.`),(!(i.isString(n.wheelStep)||i.isNumber(n.wheelStep))||n.wheelStep!=="progressive"&&!h.test(n.wheelStep)||Number(n.wheelStep)===0)&&i.throwError(`The wheel step value option 'wheelStep' is invalid ; it should either be the string 'progressive', or a number or a string that represents a positive number (excluding zero), [${n.wheelStep}] given.`),i.isInArray(n.serializeSpaces,[r.options.serializeSpaces.plus,r.options.serializeSpaces.percent])||i.throwError(`The space replacement character option 'serializeSpaces' is invalid ; it should either be '+' or '%20', [${n.serializeSpaces}] given.`),!i.isTrueOrFalseString(n.noEventListeners)&&!i.isBoolean(n.noEventListeners)&&i.throwError(`The option 'noEventListeners' that prevent the creation of event listeners is invalid ; it should be either 'true' or 'false', [${n.noEventListeners}] given.`),!i.isNull(n.styleRules)&&!(i.isObject(n.styleRules)&&(Object.prototype.hasOwnProperty.call(n.styleRules,"positive")||Object.prototype.hasOwnProperty.call(n.styleRules,"negative")||Object.prototype.hasOwnProperty.call(n.styleRules,"ranges")||Object.prototype.hasOwnProperty.call(n.styleRules,"userDefined")))&&i.throwError(`The option 'styleRules' is invalid ; it should be a correctly structured object, with one or more 'positive', 'negative', 'ranges' or 'userDefined' attributes, [${n.styleRules}] given.`),!i.isNull(n.styleRules)&&Object.prototype.hasOwnProperty.call(n.styleRules,"userDefined")&&!i.isNull(n.styleRules.userDefined)&&n.styleRules.userDefined.forEach(v=>{Object.prototype.hasOwnProperty.call(v,"callback")&&!i.isFunction(v.callback)&&i.throwError(`The callback defined in the \`userDefined\` attribute is not a function, ${typeof v.callback} given.`)}),(!i.isNull(n.rawValueDivisor)&&!h.test(n.rawValueDivisor)||n.rawValueDivisor===0||n.rawValueDivisor==="0"||n.rawValueDivisor===1||n.rawValueDivisor==="1")&&i.throwError(`The raw value divisor option 'rawValueDivisor' is invalid ; it should be a positive number higher than one, preferably an integer, [${n.rawValueDivisor}] given.`),!i.isTrueOrFalseString(n.readOnly)&&!i.isBoolean(n.readOnly)&&i.throwError(`The option 'readOnly' is invalid ; it should be either 'true' or 'false', [${n.readOnly}] given.`),!i.isTrueOrFalseString(n.unformatOnHover)&&!i.isBoolean(n.unformatOnHover)&&i.throwError(`The option 'unformatOnHover' is invalid ; it should be either 'true' or 'false', [${n.unformatOnHover}] given.`),!i.isTrueOrFalseString(n.failOnUnknownOption)&&!i.isBoolean(n.failOnUnknownOption)&&i.throwError(`The debug option 'failOnUnknownOption' is invalid ; it should be either 'true' or 'false', [${n.failOnUnknownOption}] given.`),!i.isTrueOrFalseString(n.createLocalList)&&!i.isBoolean(n.createLocalList)&&i.throwError(`The debug option 'createLocalList' is invalid ; it should be either 'true' or 'false', [${n.createLocalList}] given.`)}static _validateDecimalPlacesRawValue(e){i.isNull(e.decimalPlacesRawValue)||(e.decimalPlacesRawValue<e.decimalPlaces&&i.warning(`The number of decimal places to store in the raw value [${e.decimalPlacesRawValue}] is lower than the ones to display [${e.decimalPlaces}]. This will likely confuse your users.
To solve that, you'd need to either set \`decimalPlacesRawValue\` to \`null\`, or set a number of decimal places for the raw value equal of bigger than \`decimalPlaces\`.`,e.showWarnings),e.decimalPlacesRawValue<e.decimalPlacesShownOnFocus&&i.warning(`The number of decimal places to store in the raw value [${e.decimalPlacesRawValue}] is lower than the ones shown on focus [${e.decimalPlacesShownOnFocus}]. This will likely confuse your users.
To solve that, you'd need to either set \`decimalPlacesRawValue\` to \`null\`, or set a number of decimal places for the raw value equal of bigger than \`decimalPlacesShownOnFocus\`.`,e.showWarnings),e.decimalPlacesRawValue<e.decimalPlacesShownOnBlur&&i.warning(`The number of decimal places to store in the raw value [${e.decimalPlacesRawValue}] is lower than the ones shown when unfocused [${e.decimalPlacesShownOnBlur}]. This will likely confuse your users.
To solve that, you'd need to either set \`decimalPlacesRawValue\` to \`null\`, or set a number of decimal places for the raw value equal of bigger than \`decimalPlacesShownOnBlur\`.`,e.showWarnings))}static areSettingsValid(e){let t=!0;try{this.validate(e,!0)}catch{t=!1}return t}static getDefaultConfig(){return r.defaultSettings}static getPredefinedOptions(){return r.predefinedOptions}static _generateOptionsObjectFromOptionsArray(e){let t;return i.isUndefinedOrNullOrEmpty(e)||e.length===0?t=null:(t={},e.length===1&&Array.isArray(e[0])?e[0].forEach(s=>{Object.assign(t,this._getOptionObject(s))}):e.length>=1&&e.forEach(s=>{Object.assign(t,this._getOptionObject(s))})),t}static format(e,...t){if(i.isUndefined(e)||e===null)return null;let s;i.isElement(e)?s=i.getElementValue(e):s=e,!i.isString(s)&&!i.isNumber(s)&&i.throwError(`The value "${s}" being "set" is not numeric and therefore cannot be used appropriately.`);const a=this._generateOptionsObjectFromOptionsArray(t),n=Object.assign({},this.getDefaultConfig(),a);n.isNegativeSignAllowed=s<0,n.isPositiveSignAllowed=s>=0,this._setBrackets(n);const c={};this._cachesUsualRegularExpressions(n,c);let o=this._toNumericValue(s,n);return isNaN(Number(o))&&i.throwError(`The value [${o}] that you are trying to format is not a recognized number.`),this._isWithinRangeWithOverrideOption(o,n)||(i.triggerEvent(r.events.formatted,document,{oldValue:null,newValue:null,oldRawValue:null,newRawValue:null,isPristine:null,error:"Range test failed",aNElement:null},!0,!0),i.throwError(`The value [${o}] being set falls outside of the minimumValue [${n.minimumValue}] and maximumValue [${n.maximumValue}] range set for this element`)),n.valuesToStrings&&this._checkValuesToStringsSettings(s,n)?n.valuesToStrings[s]:(this._correctNegativePositiveSignPlacementOption(n),this._calculateDecimalPlacesOnInit(n),!i.isUndefinedOrNullOrEmpty(n.rawValueDivisor)&&n.rawValueDivisor!==0&&o!==""&&o!==null&&(o*=n.rawValueDivisor),o=this._roundFormattedValueShownOnFocus(o,n),o=this._modifyNegativeSignAndDecimalCharacterForFormattedValue(o,n),o=this._addGroupSeparators(o,n,!1,o),o)}static formatAndSet(e,t=null){const s=this.format(e,t);return i.setElementValue(e,s),s}static unformat(e,...t){if(i.isNumberStrict(e))return e;let s;if(i.isElement(e)?s=i.getElementValue(e):s=e,s==="")return"";if(i.isUndefined(s)||s===null)return null;(i.isArray(s)||i.isObject(s))&&i.throwError(`A number or a string representing a number is needed to be able to unformat it, [${s}] given.`);const a=this._generateOptionsObjectFromOptionsArray(t),n=Object.assign({},this.getDefaultConfig(),a);return n.isNegativeSignAllowed=!1,n.isPositiveSignAllowed=!0,s=s.toString(),n.valuesToStrings&&this._checkStringsToValuesSettings(s,n)?i.objectKeyLookup(n.valuesToStrings,s):(i.isNegative(s,n.negativeSignCharacter)?(n.isNegativeSignAllowed=!0,n.isPositiveSignAllowed=!1):i.isNull(n.negativeBracketsTypeOnBlur)||([n.firstBracket,n.lastBracket]=n.negativeBracketsTypeOnBlur.split(","),s.charAt(0)===n.firstBracket&&s.charAt(s.length-1)===n.lastBracket&&(n.isNegativeSignAllowed=!0,n.isPositiveSignAllowed=!1,s=this._removeBrackets(s,n,!1))),s=this._convertToNumericString(s,n),i.isNumber(Number(s))&&(s=i.scientificToDecimal(s)),new RegExp("[^+-0123456789.]","gi").test(s)?NaN:(this._correctNegativePositiveSignPlacementOption(n),n.decimalPlacesRawValue?n.originalDecimalPlacesRawValue=n.decimalPlacesRawValue:n.originalDecimalPlacesRawValue=n.decimalPlaces,this._calculateDecimalPlacesOnInit(n),!i.isUndefinedOrNullOrEmpty(n.rawValueDivisor)&&n.rawValueDivisor!==0&&s!==""&&s!==null&&(s/=n.rawValueDivisor),s=this._roundRawValue(s,n),s=s.replace(n.decimalCharacter,"."),s=this._toLocale(s,n.outputFormat,n),s))}static unformatAndSet(e,t=null){const s=this.unformat(e,t);return i.setElementValue(e,s),s}static localize(e,t=null){let s;if(i.isElement(e)?s=i.getElementValue(e):s=e,s==="")return"";i.isNull(t)&&(t=r.defaultSettings),s=this.unformat(s,t),Number(s)===0&&t.leadingZero!==r.options.leadingZero.keep&&(s="0");let a;return i.isNull(t)?a=t.outputFormat:a=r.defaultSettings.outputFormat,this._toLocale(s,a,t)}static localizeAndSet(e,t=null){const s=this.localize(e,t);return i.setElementValue(e,s),s}static isManagedByAutoNumeric(e){return this._isInGlobalList(i.domElement(e))}static getAutoNumericElement(e){const t=i.domElement(e);return this.isManagedByAutoNumeric(t)?this._getFromGlobalList(t):null}static set(e,t,s=null,a=!0){const n=i.domElement(e);if(!this.isManagedByAutoNumeric(n)){let c;return!i.isNull(s)&&Object.prototype.hasOwnProperty.call(s,"showWarnings")?c=s.showWarnings:c=!0,i.warning("Impossible to find an AutoNumeric object for the given DOM element or selector.",c),null}return this.getAutoNumericElement(n).set(t,s,a)}static getNumericString(e,t=null){return this._get(e,"getNumericString",t)}static getFormatted(e,t=null){return this._get(e,"getFormatted",t)}static getNumber(e,t=null){return this._get(e,"getNumber",t)}static _get(e,t,s=null){const a=i.domElement(e);return this.isManagedByAutoNumeric(a)||i.throwError("Impossible to find an AutoNumeric object for the given DOM element or selector."),this.getAutoNumericElement(a)[t](s)}static getLocalized(e,t=null,s=null){const a=i.domElement(e);return this.isManagedByAutoNumeric(a)||i.throwError("Impossible to find an AutoNumeric object for the given DOM element or selector."),this.getAutoNumericElement(a).getLocalized(t,s)}_updatePredefinedOptions(e,t=null){return i.isNull(t)?this.update(e):(this._mergeSettings(e,t),this.update(this.settings)),this}french(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().French,e),this}northAmerican(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().NorthAmerican,e),this}british(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().British,e),this}swiss(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().Swiss,e),this}japanese(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().Japanese,e),this}spanish(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().Spanish,e),this}chinese(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().Chinese,e),this}brazilian(e=null){return this._updatePredefinedOptions(r.getPredefinedOptions().Brazilian,e),this}_runCallbacksFoundInTheSettingsObject(){for(const e in this.settings)if(Object.prototype.hasOwnProperty.call(this.settings,e)){const t=this.settings[e];if(typeof t=="function")this.settings[e]=t(this,e);else{let s="";e in this.domElement.dataset&&(s=this.domElement.dataset[e]),s=i.camelize(s),typeof this.settings[s]=="function"&&(this.settings[e]=s(this,e))}}}_setTrailingNegativeSignInfo(){this.isTrailingNegative=this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.suffix||this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix&&(this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.left||this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.right)}static _stripAllNonNumberCharacters(e,t,s,a){return this._stripAllNonNumberCharactersExceptCustomDecimalChar(e,t,s,a).replace(t.decimalCharacter,".")}static _stripAllNonNumberCharactersExceptCustomDecimalChar(e,t,s,a){e=this._normalizeCurrencySuffixAndNegativeSignCharacters(e,t),e=e.replace(t.allowedAutoStrip,"");const n=e.match(t.numRegAutoStrip);if(e=n?[n[1],n[2],n[3]].join(""):"",t.leadingZero===r.options.leadingZero.allow||t.leadingZero===r.options.leadingZero.keep){let c="";const[o,l]=e.split(t.decimalCharacter);let h=o;i.contains(h,t.negativeSignCharacter)&&(c=t.negativeSignCharacter,h=h.replace(t.negativeSignCharacter,"")),c===""&&h.length>t.mIntPos&&h.charAt(0)==="0"&&(h=h.slice(1)),c!==""&&h.length>t.mIntNeg&&h.charAt(0)==="0"&&(h=h.slice(1)),e=`${c}${h}${i.isUndefined(l)?"":t.decimalCharacter+l}`}return(s&&t.leadingZero===r.options.leadingZero.deny||!a&&t.leadingZero===r.options.leadingZero.allow)&&(e=e.replace(t.stripReg,"$1$2")),e}static _toggleNegativeBracket(e,t,s){let a;return s?a=this._removeBrackets(e,t):a=this._addBrackets(e,t),a}static _addBrackets(e,t){return i.isNull(t.negativeBracketsTypeOnBlur)?e:`${t.firstBracket}${e.replace(t.negativeSignCharacter,"")}${t.lastBracket}`}static _removeBrackets(e,t,s=!0){let a;return!i.isNull(t.negativeBracketsTypeOnBlur)&&e.charAt(0)===t.firstBracket?(a=e.replace(t.firstBracket,""),a=a.replace(t.lastBracket,""),s?(a=a.replace(t.currencySymbol,""),a=this._mergeCurrencySignNegativePositiveSignAndValue(a,t,!0,!1)):a=`${t.negativeSignCharacter}${a}`):a=e,a}static _setBrackets(e){if(i.isNull(e.negativeBracketsTypeOnBlur))e.firstBracket="",e.lastBracket="";else{const[t,s]=e.negativeBracketsTypeOnBlur.split(",");e.firstBracket=t,e.lastBracket=s}}static _convertToNumericString(e,t){e=this._removeBrackets(e,t,!1),e=this._normalizeCurrencySuffixAndNegativeSignCharacters(e,t),e=e.replace(new RegExp(`[${t.digitGroupSeparator}]`,"g"),""),t.decimalCharacter!=="."&&(e=e.replace(t.decimalCharacter,".")),i.isNegative(e)&&e.lastIndexOf("-")===e.length-1&&(e=e.replace("-",""),e=`-${e}`),t.showPositiveSign&&(e=e.replace(t.positiveSignCharacter,""));const s=t.leadingZero!==r.options.leadingZero.keep,a=i.arabicToLatinNumbers(e,s,!1,!1);return isNaN(a)||(e=a.toString()),e}static _normalizeCurrencySuffixAndNegativeSignCharacters(e,t){return e=String(e),t.currencySymbol!==r.options.currencySymbol.none&&(e=e.replace(t.currencySymbol,"")),t.suffixText!==r.options.suffixText.none&&(e=e.replace(t.suffixText,"")),t.negativeSignCharacter!==r.options.negativeSignCharacter.hyphen&&(e=e.replace(t.negativeSignCharacter,"-")),e}static _toLocale(e,t,s){if(i.isNull(t)||t===r.options.outputFormat.string)return e;let a;switch(t){case r.options.outputFormat.number:a=Number(e);break;case r.options.outputFormat.dotNegative:a=i.isNegative(e)?e.replace("-","")+"-":e;break;case r.options.outputFormat.comma:case r.options.outputFormat.negativeComma:a=e.replace(".",",");break;case r.options.outputFormat.commaNegative:a=e.replace(".",","),a=i.isNegative(a)?a.replace("-","")+"-":a;break;case r.options.outputFormat.dot:case r.options.outputFormat.negativeDot:a=e;break;default:i.throwError(`The given outputFormat [${t}] option is not recognized.`)}return t!==r.options.outputFormat.number&&s.negativeSignCharacter!=="-"&&(a=a.replace("-",s.negativeSignCharacter)),a}_modifyNegativeSignAndDecimalCharacterForRawValue(e){return this.settings.decimalCharacter!=="."&&(e=e.replace(this.settings.decimalCharacter,".")),this.settings.negativeSignCharacter!=="-"&&this.settings.isNegativeSignAllowed&&(e=e.replace(this.settings.negativeSignCharacter,"-")),e.match(/\d/)||(e+="0"),e}static _modifyNegativeSignAndDecimalCharacterForFormattedValue(e,t){return t.negativeSignCharacter!=="-"&&(e=e.replace("-",t.negativeSignCharacter)),t.decimalCharacter!=="."&&(e=e.replace(".",t.decimalCharacter)),e}static _isElementValueEmptyOrOnlyTheNegativeSign(e,t){return e===""||e===t.negativeSignCharacter}static _orderValueCurrencySymbolAndSuffixText(e,t,s){let a;if(t.emptyInputBehavior===r.options.emptyInputBehavior.always||s)switch(t.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.left:case r.options.negativePositiveSignPlacement.prefix:case r.options.negativePositiveSignPlacement.none:a=e+t.currencySymbol+t.suffixText;break;default:a=t.currencySymbol+e+t.suffixText}else a=e;return a}static _addGroupSeparators(e,t,s,a,n=null){let c;if(i.isNull(n)?c=i.isNegative(e,t.negativeSignCharacter)||i.isNegativeWithBrackets(e,t.firstBracket,t.lastBracket):c=n<0,e=this._stripAllNonNumberCharactersExceptCustomDecimalChar(e,t,!1,s),this._isElementValueEmptyOrOnlyTheNegativeSign(e,t))return this._orderValueCurrencySymbolAndSuffixText(e,t,!0);const o=i.isZeroOrHasNoValue(e);c&&(e=e.replace("-",""));let[l,h]=e.split(t.decimalCharacter);if(t.decimalCharacterAlternative&&i.isUndefined(h)&&([l,h]=e.split(t.decimalCharacterAlternative)),t.digitGroupSeparator!==""){t.digitalGroupSpacing=t.digitalGroupSpacing.toString();let f;switch(t.digitalGroupSpacing){case r.options.digitalGroupSpacing.twoThree:f=/(\d)((\d)(\d{2}?)+)$/;break;case r.options.digitalGroupSpacing.twoScaled:f=/(\d)((?:\d{2}){0,2}\d{3}(?:(?:\d{2}){2}\d{3})*?)$/;break;case r.options.digitalGroupSpacing.two:case r.options.digitalGroupSpacing.three:case r.options.digitalGroupSpacing.four:default:f=new RegExp(`(\\d)((\\d{${t.digitalGroupSpacing}}?)+)$`)}for(;f.test(l);)l=l.replace(f,`$1${t.digitGroupSeparator}$2`)}let d;s?d=t.decimalPlacesShownOnFocus:d=t.decimalPlacesShownOnBlur,d!==0&&!i.isUndefined(h)?(h.length>d&&(h=h.substring(0,d)),e=`${l}${t.decimalCharacter}${h}`):e=l,e=r._mergeCurrencySignNegativePositiveSignAndValue(e,t,c,o),i.isNull(n)&&(n=a),t.negativeBracketsTypeOnBlur!==null&&(n<0||i.isNegativeStrict(e,t.negativeSignCharacter))&&(e=this._toggleNegativeBracket(e,t,s));let g;return t.suffixText?g=`${e}${t.suffixText}`:g=e,g}static _mergeCurrencySignNegativePositiveSignAndValue(e,t,s,a){let n="";s?n=t.negativeSignCharacter:t.showPositiveSign&&!a&&(n=t.positiveSignCharacter);let c;if(t.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix)if(t.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(s||!s&&t.showPositiveSign&&!a))switch(t.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.prefix:case r.options.negativePositiveSignPlacement.left:c=`${n}${t.currencySymbol}${e}`;break;case r.options.negativePositiveSignPlacement.right:c=`${t.currencySymbol}${n}${e}`;break;case r.options.negativePositiveSignPlacement.suffix:c=`${t.currencySymbol}${e}${n}`;break}else c=t.currencySymbol+e;else if(t.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix)if(t.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(s||!s&&t.showPositiveSign&&!a))switch(t.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.suffix:case r.options.negativePositiveSignPlacement.right:c=`${e}${t.currencySymbol}${n}`;break;case r.options.negativePositiveSignPlacement.left:c=`${e}${n}${t.currencySymbol}`;break;case r.options.negativePositiveSignPlacement.prefix:c=`${n}${e}${t.currencySymbol}`;break}else c=e+t.currencySymbol;return c}_initialCaretPosition(e){i.isNull(this.settings.caretPositionOnFocus)&&this.settings.selectOnFocus===r.options.selectOnFocus.doNotSelect&&i.throwError("`_initialCaretPosition()` should never be called when the `caretPositionOnFocus` option is `null`.");const t=this.rawValue<0,s=i.isZeroOrHasNoValue(e),a=e.length;let n=0,c=0,o=!1,l=0;this.settings.caretPositionOnFocus!==r.options.caretPositionOnFocus.start&&(e=e.replace(this.settings.negativeSignCharacter,""),e=e.replace(this.settings.positiveSignCharacter,""),e=e.replace(this.settings.currencySymbol,""),n=e.length,o=i.contains(e,this.settings.decimalCharacter),(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.decimalLeft||this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.decimalRight)&&(o?(c=e.indexOf(this.settings.decimalCharacter),l=this.settings.decimalCharacter.length):(c=n,l=0)));let h="";t?h=this.settings.negativeSignCharacter:this.settings.showPositiveSign&&!s&&(h=this.settings.positiveSignCharacter);const d=h.length,g=this.settings.currencySymbol.length;let f;if(this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix){if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.start)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.prefix:case r.options.negativePositiveSignPlacement.left:case r.options.negativePositiveSignPlacement.right:f=d+g;break;case r.options.negativePositiveSignPlacement.suffix:f=g;break}else f=g;else if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.end)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.prefix:case r.options.negativePositiveSignPlacement.left:case r.options.negativePositiveSignPlacement.right:f=a;break;case r.options.negativePositiveSignPlacement.suffix:f=g+n;break}else f=a;else if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.decimalLeft)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.prefix:case r.options.negativePositiveSignPlacement.left:case r.options.negativePositiveSignPlacement.right:f=d+g+c;break;case r.options.negativePositiveSignPlacement.suffix:f=g+c;break}else f=g+c;else if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.decimalRight)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.prefix:case r.options.negativePositiveSignPlacement.left:case r.options.negativePositiveSignPlacement.right:f=d+g+c+l;break;case r.options.negativePositiveSignPlacement.suffix:f=g+c+l;break}else f=g+c+l}else if(this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix){if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.start)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.suffix:case r.options.negativePositiveSignPlacement.right:case r.options.negativePositiveSignPlacement.left:f=0;break;case r.options.negativePositiveSignPlacement.prefix:f=d;break}else f=0;else if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.end)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.suffix:case r.options.negativePositiveSignPlacement.right:case r.options.negativePositiveSignPlacement.left:f=n;break;case r.options.negativePositiveSignPlacement.prefix:f=d+n;break}else f=n;else if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.decimalLeft)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.suffix:case r.options.negativePositiveSignPlacement.right:case r.options.negativePositiveSignPlacement.left:f=c;break;case r.options.negativePositiveSignPlacement.prefix:f=d+c;break}else f=c;else if(this.settings.caretPositionOnFocus===r.options.caretPositionOnFocus.decimalRight)if(this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!s))switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.suffix:case r.options.negativePositiveSignPlacement.right:case r.options.negativePositiveSignPlacement.left:f=c+l;break;case r.options.negativePositiveSignPlacement.prefix:f=d+c+l;break}else f=c+l}return f}static _truncateZeros(e,t){let s;switch(t){case 0:s=/(\.(?:\d*[1-9])?)0*$/;break;case 1:s=/(\.\d(?:\d*[1-9])?)0*$/;break;default:s=new RegExp(`(\\.\\d{${t}}(?:\\d*[1-9])?)0*`)}return e=e.replace(s,"$1"),t===0&&(e=e.replace(/\.$/,"")),e}static _roundRawValue(e,t){return this._roundValue(e,t,t.decimalPlacesRawValue)}static _roundFormattedValueShownOnFocus(e,t){return this._roundValue(e,t,Number(t.decimalPlacesShownOnFocus))}static _roundFormattedValueShownOnBlur(e,t){return this._roundValue(e,t,Number(t.decimalPlacesShownOnBlur))}static _roundFormattedValueShownOnFocusOrBlur(e,t,s){return s?this._roundFormattedValueShownOnFocus(e,t):this._roundFormattedValueShownOnBlur(e,t)}static _roundValue(e,t,s){if(i.isNull(e))return e;if(e=e===""?"0":e.toString(),t.roundingMethod===r.options.roundingMethod.toNearest05||t.roundingMethod===r.options.roundingMethod.toNearest05Alt||t.roundingMethod===r.options.roundingMethod.upToNext05||t.roundingMethod===r.options.roundingMethod.downToNext05)return this._roundCloseTo05(e,t);const[a,n]=r._prepareValueForRounding(e,t);e=n;const c=e.lastIndexOf("."),o=c===-1,[l,h]=e.split(".");if(!(h>0)&&(t.allowDecimalPadding===r.options.allowDecimalPadding.never||t.allowDecimalPadding===r.options.allowDecimalPadding.floats))return Number(e)===0?l:`${a}${l}`;let g;t.allowDecimalPadding===r.options.allowDecimalPadding.always||t.allowDecimalPadding===r.options.allowDecimalPadding.floats?g=s:t.allowDecimalPadding>0?g=t.allowDecimalPadding:g=0;const f=o?e.length-1:c;let v=e.length-1-f,p="";if(v<=s){if(p=e,v<g){o&&(p=`${p}${t.decimalCharacter}`);let b="000000";for(;v<g;)b=b.substring(0,g-v),p+=b,v+=b.length}else v>g?p=this._truncateZeros(p,g):v===0&&g===0&&(p=p.replace(/\.$/,""));return Number(p)===0?p:`${a}${p}`}let E;o?E=s-1:E=Number(s)+Number(c);const P=Number(e.charAt(E+1));let S=e.substring(0,E+1).split(""),w;if(e.charAt(E)==="."?w=e.charAt(E-1)%2:w=e.charAt(E)%2,this._shouldRoundUp(P,t,a,w)){for(let b=S.length-1;b>=0;b-=1)if(S[b]!=="."){if(S[b]=+S[b]+1,S[b]<10)break;b>0&&(S[b]="0")}}return S=S.slice(0,E+1),p=this._truncateZeros(S.join(""),g),Number(p)===0?p:`${a}${p}`}static _roundCloseTo05(e,t){switch(t.roundingMethod){case r.options.roundingMethod.toNearest05:case r.options.roundingMethod.toNearest05Alt:e=(Math.round(e*20)/20).toString();break;case r.options.roundingMethod.upToNext05:e=(Math.ceil(e*20)/20).toString();break;default:e=(Math.floor(e*20)/20).toString()}let s;return i.contains(e,".")?e.length-e.indexOf(".")<3?s=e+"0":s=e:s=e+".00",s}static _prepareValueForRounding(e,t){let s="";return i.isNegativeStrict(e,"-")&&(s="-",e=e.replace("-","")),e.match(/^\d/)||(e=`0${e}`),Number(e)===0&&(s=""),(Number(e)>0&&t.leadingZero!==r.options.leadingZero.keep||e.length>0&&t.leadingZero===r.options.leadingZero.allow)&&(e=e.replace(/^0*(\d)/,"$1")),[s,e]}static _shouldRoundUp(e,t,s,a){return e>4&&t.roundingMethod===r.options.roundingMethod.halfUpSymmetric||e>4&&t.roundingMethod===r.options.roundingMethod.halfUpAsymmetric&&s===""||e>5&&t.roundingMethod===r.options.roundingMethod.halfUpAsymmetric&&s==="-"||e>5&&t.roundingMethod===r.options.roundingMethod.halfDownSymmetric||e>5&&t.roundingMethod===r.options.roundingMethod.halfDownAsymmetric&&s===""||e>4&&t.roundingMethod===r.options.roundingMethod.halfDownAsymmetric&&s==="-"||e>5&&t.roundingMethod===r.options.roundingMethod.halfEvenBankersRounding||e===5&&t.roundingMethod===r.options.roundingMethod.halfEvenBankersRounding&&a===1||e>0&&t.roundingMethod===r.options.roundingMethod.toCeilingTowardPositiveInfinity&&s===""||e>0&&t.roundingMethod===r.options.roundingMethod.toFloorTowardNegativeInfinity&&s==="-"||e>0&&t.roundingMethod===r.options.roundingMethod.upRoundAwayFromZero}static _truncateDecimalPlaces(e,t,s,a){s&&(e=this._roundFormattedValueShownOnFocus(e,t));const[n,c]=e.split(t.decimalCharacter);if(c&&c.length>a)if(a>0){const o=c.substring(0,a);e=`${n}${t.decimalCharacter}${o}`}else e=n;return e}static _checkIfInRangeWithOverrideOption(e,t){if(i.isNull(e)&&t.emptyInputBehavior===r.options.emptyInputBehavior.null||t.overrideMinMaxLimits===r.options.overrideMinMaxLimits.ignore||t.overrideMinMaxLimits===r.options.overrideMinMaxLimits.invalid)return[!0,!0];e=e.toString(),e=e.replace(",",".");const s=i.parseStr(t.minimumValue),a=i.parseStr(t.maximumValue),n=i.parseStr(e);let c;switch(t.overrideMinMaxLimits){case r.options.overrideMinMaxLimits.floor:c=[i.testMinMax(s,n)>-1,!0];break;case r.options.overrideMinMaxLimits.ceiling:c=[!0,i.testMinMax(a,n)<1];break;default:c=[i.testMinMax(s,n)>-1,i.testMinMax(a,n)<1]}return c}static _isWithinRangeWithOverrideOption(e,t){const[s,a]=this._checkIfInRangeWithOverrideOption(e,t);return s&&a}static _cleanValueForRangeParse(e){return i.isNull(e)||(e=e.toString().replace(",",".")),i.parseStr(e)}static _isMinimumRangeRespected(e,t){return i.testMinMax(i.parseStr(t.minimumValue),this._cleanValueForRangeParse(e))>-1}static _isMaximumRangeRespected(e,t){return i.testMinMax(i.parseStr(t.maximumValue),this._cleanValueForRangeParse(e))<1}_triggerRangeEvents(e,t){e||this._triggerEvent(r.events.minRangeExceeded,this.domElement),t||this._triggerEvent(r.events.maxRangeExceeded,this.domElement)}_setInvalidState(){this.isInputElement?i.setInvalidState(this.domElement):this._addCSSClass(this.settings.invalidClass),this._triggerEvent(r.events.invalidValue,this.domElement),this.validState=!1}_setValidState(){this.isInputElement?i.setValidState(this.domElement):this._removeCSSClass(this.settings.invalidClass),this.validState||this._triggerEvent(r.events.correctedValue,this.domElement),this.validState=!0}_setValidOrInvalidState(e){if(this.settings.overrideMinMaxLimits===r.options.overrideMinMaxLimits.invalid){const t=this.constructor._isMinimumRangeRespected(e,this.settings),s=this.constructor._isMaximumRangeRespected(e,this.settings);t&&s?this._setValidState():this._setInvalidState(),this._triggerRangeEvents(t,s)}}_keepAnOriginalSettingsCopy(){this.originalDigitGroupSeparator=this.settings.digitGroupSeparator,this.originalCurrencySymbol=this.settings.currencySymbol,this.originalSuffixText=this.settings.suffixText}_trimLeadingAndTrailingZeros(e){if(e===""||e===null)return e;if(this.settings.leadingZero!==r.options.leadingZero.keep){if(Number(e)===0)return"0";e=e.replace(/^(-)?0+(?=\d)/g,"$1")}return i.contains(e,".")&&(e=e.replace(/(\.[0-9]*?)0+$/,"$1")),e=e.replace(/\.$/,""),e}_setPersistentStorageName(){this.settings.saveValueToSessionStorage&&(this.domElement.name!==""&&!i.isUndefined(this.domElement.name)?this.rawValueStorageName=`${this.storageNamePrefix}${decodeURIComponent(this.domElement.name)}`:this.rawValueStorageName=`${this.storageNamePrefix}${this.domElement.id}`)}_saveValueToPersistentStorage(){this.settings.saveValueToSessionStorage&&sessionStorage.setItem(this.rawValueStorageName,this.rawValue)}_getValueFromPersistentStorage(){return this.settings.saveValueToSessionStorage?sessionStorage.getItem(this.rawValueStorageName):(i.warning("`_getValueFromPersistentStorage()` is called but `settings.saveValueToSessionStorage` is false. There must be an error that needs fixing.",this.settings.showWarnings),null)}_removeValueFromPersistentStorage(){this.settings.saveValueToSessionStorage&&sessionStorage.removeItem(this.rawValueStorageName)}_getDefaultValue(e){const t=e.getAttribute("value");return i.isNull(t)?"":t}_onFocusInAndMouseEnter(e){if(this.isEditing=!1,!this.formulaMode&&this.settings.unformatOnHover&&e.type==="mouseenter"&&e.altKey){this.constructor._unformatAltHovered(this);return}if(e.type==="focus"&&(this.isFocused=!0,this.rawValueOnFocus=this.rawValue),e.type==="focus"&&this.settings.unformatOnHover&&this.hoveredWithAlt&&this.constructor._reformatAltHovered(this),e.type==="focus"||e.type==="mouseenter"&&!this.isFocused){let t=null;this.settings.emptyInputBehavior===r.options.emptyInputBehavior.focus&&this.rawValue<0&&this.settings.negativeBracketsTypeOnBlur!==null&&this.settings.isNegativeSignAllowed&&(t=this.constructor._removeBrackets(i.getElementValue(this.domElement),this.settings));const s=this._getRawValueToFormat(this.rawValue);if(s!==""){const o=this.constructor._roundFormattedValueShownOnFocusOrBlur(s,this.settings,this.isFocused);if(this.settings.showOnlyNumbersOnFocus===r.options.showOnlyNumbersOnFocus.onlyNumbers)this.settings.digitGroupSeparator="",this.settings.currencySymbol="",this.settings.suffixText="",t=o.replace(".",this.settings.decimalCharacter);else{let l;i.isNull(o)?l="":l=this.constructor._addGroupSeparators(o.replace(".",this.settings.decimalCharacter),this.settings,this.isFocused,s),t=l}}i.isNull(t)?this.valueOnFocus="":this.valueOnFocus=t,this.lastVal=this.valueOnFocus;const a=this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(this.valueOnFocus,this.settings),n=this.constructor._orderValueCurrencySymbolAndSuffixText(this.valueOnFocus,this.settings,!0),c=a&&n!==""&&this.settings.emptyInputBehavior===r.options.emptyInputBehavior.focus;c&&(t=n),i.isNull(t)||this._setElementValue(t),c&&n===this.settings.currencySymbol&&this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix&&i.setElementSelection(e.target,0)}}_onFocus(){this.settings.isCancellable&&this._saveCancellableValue()}_onFocusIn(e){this.settings.selectOnFocus?this.select():i.isNull(this.settings.caretPositionOnFocus)||i.setElementSelection(e.target,this._initialCaretPosition(i.getElementValue(this.domElement)))}_enterFormulaMode(){this.settings.formulaMode&&(this.formulaMode=!0,i.setElementValue(this.domElement,"="),i.setElementSelection(this.domElement,1))}_exitFormulaMode(){let e=i.getElementValue(this.domElement);e=e.replace(/^\s*=/,"");let t;try{const s=new fe(e,this.settings.decimalCharacter);t=new me().evaluate(s)}catch{this._triggerEvent(r.events.invalidFormula,this.domElement,{formula:e,aNElement:this}),this.reformat(),this.formulaMode=!1;return}this._triggerEvent(r.events.validFormula,this.domElement,{formula:e,result:t,aNElement:this}),this.set(t),this.formulaMode=!1}_acceptNonPrintableKeysInFormulaMode(){return this.eventKey===m.keyName.Backspace||this.eventKey===m.keyName.Delete||this.eventKey===m.keyName.LeftArrow||this.eventKey===m.keyName.RightArrow||this.eventKey===m.keyName.Home||this.eventKey===m.keyName.End}_onKeydown(e){if(this.compositioning)return;if(this.formatted=!1,this.isEditing=!0,!this.formulaMode&&!this.isFocused&&this.settings.unformatOnHover&&e.altKey&&this.domElement===i.getHoveredElement()){this.constructor._unformatAltHovered(this);return}if(this._updateEventKeyInfo(e),this.keydownEventCounter+=1,this.keydownEventCounter===1&&(this.initialValueOnFirstKeydown=i.getElementValue(e.target),this.initialRawValueOnFirstKeydown=this.rawValue),this.formulaMode){if(this.eventKey===m.keyName.Esc){this.formulaMode=!1,this.reformat();return}if(this.eventKey===m.keyName.Enter){this._exitFormulaMode();return}if(this._acceptNonPrintableKeysInFormulaMode())return}else{if(this.eventKey===m.keyName.Equal){this._enterFormulaMode();return}if(this.settings.modifyValueOnUpDownArrow&&(this.eventKey===m.keyName.UpArrow||this.eventKey===m.keyName.DownArrow)){this.upDownArrowAction(e);return}}if(this.domElement.readOnly||this.settings.readOnly||this.domElement.disabled){this.processed=!0;return}this.eventKey===m.keyName.Esc&&(e.preventDefault(),this.settings.isCancellable&&this.rawValue!==this.savedCancellableValue&&(this.set(this.savedCancellableValue),this._triggerEvent(r.events.native.input,e.target)),this.select());let t=i.getElementValue(e.target);if(this.eventKey===m.keyName.Enter&&this.rawValue!==this.rawValueOnFocus&&(this._triggerEvent(r.events.native.change,e.target),this.valueOnFocus=t,this.rawValueOnFocus=this.rawValue,this.settings.isCancellable&&this._saveCancellableValue()),this._updateInternalProperties(e),this._processNonPrintableKeysAndShortcuts(e)){this.processed=!0;return}if(this.eventKey===m.keyName.Backspace||this.eventKey===m.keyName.Delete){const s=this._processCharacterDeletion(e);if(this.processed=!0,!s){e.preventDefault();return}this._formatValue(e),t=i.getElementValue(e.target),t!==this.lastVal&&this.throwInput&&(this._triggerEvent(r.events.native.input,e.target),e.preventDefault()),this.lastVal=t,this.throwInput=!0}}_onKeypress(e){if(this.compositioning)return;if(this.formulaMode){if(this._acceptNonPrintableKeysInFormulaMode()||this.settings.formulaChars.test(this.eventKey))return;e.preventDefault();return}if(this.eventKey===m.keyName.Insert)return;const t=this.processed;if(this._updateInternalProperties(e),this._processNonPrintableKeysAndShortcuts(e))return;if(t){e.preventDefault();return}if(this._processCharacterInsertion()){this._formatValue(e);const a=i.getElementValue(e.target);if(a!==this.lastVal&&this.throwInput)this._triggerEvent(r.events.native.input,e.target),e.preventDefault();else{if((this.eventKey===this.settings.decimalCharacter||this.eventKey===this.settings.decimalCharacterAlternative)&&i.getElementSelection(e.target).start===i.getElementSelection(e.target).end&&i.getElementSelection(e.target).start===a.indexOf(this.settings.decimalCharacter)){const n=i.getElementSelection(e.target).start+1;i.setElementSelection(e.target,n)}e.preventDefault()}this.lastVal=i.getElementValue(e.target),this.throwInput=!0,this._setValidOrInvalidState(this.rawValue);return}e.preventDefault()}_onKeyup(e){if(this.compositioning||(this.isEditing=!1,this.keydownEventCounter=0,this.formulaMode))return;if(this.settings.isCancellable&&this.eventKey===m.keyName.Esc){e.preventDefault();return}if(this._updateEventKeyInfo(e),this.eventKey===m.keyName.Z||this.eventKey===m.keyName.z){if(e.ctrlKey&&e.shiftKey){e.preventDefault(),this._historyTableRedo(),this._triggerEvent(r.events.native.input,e.target),this.onGoingRedo=!0;return}else if(e.ctrlKey&&!e.shiftKey)if(this.onGoingRedo)this.onGoingRedo=!1;else{e.preventDefault(),this._historyTableUndo(),this._triggerEvent(r.events.native.input,e.target);return}}else if((this.eventKey===m.keyName.Y||this.eventKey===m.keyName.y)&&e.ctrlKey){e.preventDefault(),this._historyTableRedo(),this._triggerEvent(r.events.native.input,e.target),this.onGoingRedo=!0;return}if(this.onGoingRedo&&(e.ctrlKey||e.shiftKey)&&(this.onGoingRedo=!1),(e.ctrlKey||e.metaKey)&&(this.eventKey===m.keyName.X||this.eventKey===m.keyName.x)){const a=i.getElementSelection(this.domElement).start,n=this.constructor._toNumericValue(i.getElementValue(e.target),this.settings);this.set(n),this._setCaretPosition(a)}if(this.eventKey===m.keyName.Alt&&this.settings.unformatOnHover&&this.hoveredWithAlt){this.constructor._reformatAltHovered(this);return}if((e.ctrlKey||e.metaKey)&&(this.eventKey===m.keyName.Backspace||this.eventKey===m.keyName.Delete)){const a=i.getElementValue(e.target);this._setRawValue(this._formatOrUnformatOther(!1,a));return}this._updateInternalProperties(e);const t=this._processNonPrintableKeysAndShortcuts(e);delete this.valuePartsBeforePaste;const s=i.getElementValue(e.target);if(!(t||s===""&&this.initialValueOnFirstKeydown==="")&&(s===this.settings.currencySymbol?this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix?i.setElementSelection(e.target,0):i.setElementSelection(e.target,this.settings.currencySymbol.length):this.eventKey===m.keyName.Tab&&i.setElementSelection(e.target,0,s.length),(s===this.settings.suffixText||this.rawValue===""&&this.settings.currencySymbol!==""&&this.settings.suffixText!=="")&&i.setElementSelection(e.target,0),this.settings.decimalPlacesShownOnFocus!==null&&this._saveValueToPersistentStorage(),this.formatted||this._formatValue(e),this._setValidOrInvalidState(this.rawValue),this._saveRawValueForAndroid(),s!==this.initialValueOnFirstKeydown&&this._triggerEvent(r.events.formatted,e.target,{oldValue:this.initialValueOnFirstKeydown,newValue:s,oldRawValue:this.initialRawValueOnFirstKeydown,newRawValue:this.rawValue,isPristine:this.isPristine(!1),error:null,aNElement:this}),this.historyTable.length>1)){const a=i.getElementSelection(this.domElement);this.selectionStart=a.start,this.selectionEnd=a.end,this.historyTable[this.historyTableIndex].start=this.selectionStart,this.historyTable[this.historyTableIndex].end=this.selectionEnd}}_saveRawValueForAndroid(){if(this.eventKey===m.keyName.AndroidDefault){let e=this.constructor._stripAllNonNumberCharactersExceptCustomDecimalChar(this.getFormatted(),this.settings,!0,this.isFocused);e=this.constructor._convertToNumericString(e,this.settings),this._setRawValue(e)}}_onFocusOutAndMouseLeave(e){if(this.isEditing=!1,!(e.type==="mouseleave"&&this.formulaMode)){if(this.settings.unformatOnHover&&e.type==="mouseleave"&&this.hoveredWithAlt){this.constructor._reformatAltHovered(this);return}if(e.type==="mouseleave"&&!this.isFocused||e.type==="blur"){e.type==="blur"&&this.formulaMode&&this._exitFormulaMode(),this._saveValueToPersistentStorage(),this.settings.showOnlyNumbersOnFocus===r.options.showOnlyNumbersOnFocus.onlyNumbers&&(this.settings.digitGroupSeparator=this.originalDigitGroupSeparator,this.settings.currencySymbol=this.originalCurrencySymbol,this.settings.suffixText=this.originalSuffixText);const t=this._getRawValueToFormat(this.rawValue),s=i.isNull(t),[a,n]=this.constructor._checkIfInRangeWithOverrideOption(t,this.settings);let c=!1;if(t!==""&&!s&&(this._triggerRangeEvents(a,n),this.settings.valuesToStrings&&this._checkValuesToStrings(t)&&(this._setElementValue(this.settings.valuesToStrings[t]),c=!0)),!c){let o;if(s||t===""?o=t:o=String(t),t!==""&&!s)a&&n&&!this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(t,this.settings)?(o=this._modifyNegativeSignAndDecimalCharacterForRawValue(o),this.settings.divisorWhenUnfocused&&!i.isNull(o)&&(o=o/this.settings.divisorWhenUnfocused,o=o.toString()),o=this.constructor._roundFormattedValueShownOnBlur(o,this.settings),o=this.constructor._modifyNegativeSignAndDecimalCharacterForFormattedValue(o,this.settings)):this._triggerRangeEvents(a,n);else if(t==="")switch(this.settings.emptyInputBehavior){case r.options.emptyInputBehavior.zero:this._setRawValue("0"),o=this.constructor._roundValue("0",this.settings,0);break;case r.options.emptyInputBehavior.min:this._setRawValue(this.settings.minimumValue),o=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.minimumValue,this.settings,this.isFocused);break;case r.options.emptyInputBehavior.max:this._setRawValue(this.settings.maximumValue),o=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.maximumValue,this.settings,this.isFocused);break;default:i.isNumber(this.settings.emptyInputBehavior)&&(this._setRawValue(this.settings.emptyInputBehavior),o=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.emptyInputBehavior,this.settings,this.isFocused))}let l=this.constructor._orderValueCurrencySymbolAndSuffixText(o,this.settings,!1);this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(o,this.settings)||s&&this.settings.emptyInputBehavior===r.options.emptyInputBehavior.null||(l=this.constructor._addGroupSeparators(o,this.settings,!1,t)),(l!==t||t===""||this.settings.allowDecimalPadding===r.options.allowDecimalPadding.never||this.settings.allowDecimalPadding===r.options.allowDecimalPadding.floats)&&(this.settings.symbolWhenUnfocused&&t!==""&&t!==null&&(l=`${l}${this.settings.symbolWhenUnfocused}`),this._setElementValue(l))}this._setValidOrInvalidState(this.rawValue),e.type==="blur"&&this._onBlur(e)}}}_onPaste(e){if(e.preventDefault(),this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled)return;let t;e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):i.throwError("Unable to retrieve the pasted value. Please use a modern browser (i.e. Firefox or Chromium).");let s;e.target.tagName?s=e.target:s=e.explicitOriginalTarget;const a=i.getElementValue(s),n=s.selectionStart||0,c=s.selectionEnd||0,o=c-n;if(o===a.length){const L=this._preparePastedText(t),O=i.arabicToLatinNumbers(L,!1,!1,!1);if(O==="."||O===""||O!=="."&&!i.isNumber(O)){this.formatted=!0,this.settings.onInvalidPaste===r.options.onInvalidPaste.error&&i.throwError(`The pasted value '${t}' is not a valid paste content.`);return}this.set(O),this.formatted=!0,this._triggerEvent(r.events.native.input,s);return}const l=i.isNegativeStrict(t,this.settings.negativeSignCharacter);l&&(t=t.slice(1,t.length));const h=this._preparePastedText(t);let d;if(h==="."?d=".":d=i.arabicToLatinNumbers(h,!1,!1,!1),d!=="."&&(!i.isNumber(d)||d==="")){this.formatted=!0,this.settings.onInvalidPaste===r.options.onInvalidPaste.error&&i.throwError(`The pasted value '${t}' is not a valid paste content.`);return}let g,f=i.isNegativeStrict(this.getNumericString(),this.settings.negativeSignCharacter),v,p;l&&!f?(f=!0,v=!0):v=!1;const E=a.slice(0,n),P=a.slice(c,a.length);n!==c?p=this._preparePastedText(E+P):p=this._preparePastedText(a),f&&(p=i.setRawNegativeSign(p)),g=i.convertCharacterCountToIndexPosition(i.countNumberCharactersOnTheCaretLeftSide(a,n,this.settings.decimalCharacter)),v&&g++;let S=p.slice(0,g),w=p.slice(g,p.length),b=!1;d==="."&&(i.contains(S,".")&&(b=!0,S=S.replace(".","")),w=w.replace(".",""));let U=!1;switch(S===""&&w==="-"&&(S="-",w="",U=!0),this.settings.onInvalidPaste){case r.options.onInvalidPaste.truncate:case r.options.onInvalidPaste.replace:const L=i.parseStr(this.settings.minimumValue),O=i.parseStr(this.settings.maximumValue);let F=p,T=0,Z=S;for(;T<d.length&&(Z+=d[T],p=Z+w,!!this.constructor._checkIfInRange(p,L,O));)F=p,T++;if(g+=T,U&&g++,this.settings.onInvalidPaste===r.options.onInvalidPaste.truncate){p=F,b&&g--;break}let A=g;const le=F.length;for(;T<d.length&&A<le;){if(F[A]==="."){A++;continue}if(p=i.replaceCharAt(F,A,d[T]),!this.constructor._checkIfInRange(p,L,O))break;F=p,T++,A++}g=A,b&&g--,p=F;break;case r.options.onInvalidPaste.error:case r.options.onInvalidPaste.ignore:case r.options.onInvalidPaste.clamp:default:if(p=`${S}${d}${w}`,n===c)g=i.convertCharacterCountToIndexPosition(i.countNumberCharactersOnTheCaretLeftSide(a,n,this.settings.decimalCharacter))+d.length;else if(w==="")g=i.convertCharacterCountToIndexPosition(i.countNumberCharactersOnTheCaretLeftSide(a,n,this.settings.decimalCharacter))+d.length,U&&g++;else{const q=i.convertCharacterCountToIndexPosition(i.countNumberCharactersOnTheCaretLeftSide(a,c,this.settings.decimalCharacter)),ce=i.getElementValue(s).slice(n,c);g=q-o+i.countCharInText(this.settings.digitGroupSeparator,ce)+d.length}v&&g++,b&&g--}if(!i.isNumber(p)||p===""){this.settings.onInvalidPaste===r.options.onInvalidPaste.error&&i.throwError(`The pasted value '${t}' would result into an invalid content '${p}'.`);return}let D=!1,j=!1;try{this.set(p),D=!0}catch{let O;switch(this.settings.onInvalidPaste){case r.options.onInvalidPaste.clamp:O=i.clampToRangeLimits(p,this.settings);try{this.set(O)}catch{i.throwError(`Fatal error: Unable to set the clamped value '${O}'.`)}j=!0,D=!0,p=O;break;case r.options.onInvalidPaste.error:case r.options.onInvalidPaste.truncate:case r.options.onInvalidPaste.replace:i.throwError(`The pasted value '${t}' results in a value '${p}' that is outside of the minimum [${this.settings.minimumValue}] and maximum [${this.settings.maximumValue}] value range.`);case r.options.onInvalidPaste.ignore:default:return}}const B=i.getElementValue(s);let H;if(D)switch(this.settings.onInvalidPaste){case r.options.onInvalidPaste.clamp:if(j){this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix?i.setElementSelection(s,B.length-this.settings.currencySymbol.length):i.setElementSelection(s,B.length);break}case r.options.onInvalidPaste.error:case r.options.onInvalidPaste.ignore:case r.options.onInvalidPaste.truncate:case r.options.onInvalidPaste.replace:default:H=i.findCaretPositionInFormattedNumber(p,g,B,this.settings.decimalCharacter),i.setElementSelection(s,H)}D&&a!==B&&this._triggerEvent(r.events.native.input,s)}_onBlur(e){this.isFocused=!1,this.isEditing=!1,i.trimPaddedZerosFromDecimalPlaces(this.rawValue)!==i.trimPaddedZerosFromDecimalPlaces(this.rawValueOnFocus)&&this._triggerEvent(r.events.native.change,e.target),this.rawValueOnFocus=void 0}_wheelAndUpDownActions(e,t,s,a){const n=e.target.selectionStart||0,c=e.target.selectionEnd||0,o=this.rawValue;let l;if(i.isUndefinedOrNullOrEmpty(o)?this.settings.minimumValue>0||this.settings.maximumValue<0?t?l=this.settings.minimumValue:l=this.settings.maximumValue:l=0:l=o,l=+l,i.isNumber(a)){const h=+a;t?l+=h:s&&(l-=h)}else t?l=i.addAndRoundToNearestAuto(l,this.settings.decimalPlacesRawValue):s&&(l=i.subtractAndRoundToNearestAuto(l,this.settings.decimalPlacesRawValue));l=i.clampToRangeLimits(l,this.settings),l!==+o&&(this.set(l),this._triggerEvent(r.events.native.input,e.target)),e.preventDefault(),this._setSelection(n,c)}upDownArrowAction(e){if(this.formulaMode||this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled)return;let t=!1,s=!1;this.eventKey===m.keyName.UpArrow?t=!0:this.eventKey===m.keyName.DownArrow?s=!0:i.throwError("Something has gone wrong since neither an Up or Down arrow key is detected, but the function was still called!"),this._wheelAndUpDownActions(e,t,s,this.settings.upDownStep)}_onWheel(e){this.formulaMode||this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled||this.settings.modifyValueOnWheel&&(this.settings.wheelOn===r.options.wheelOn.focus?this.isFocused?e.shiftKey||this.wheelAction(e):e.shiftKey&&this.wheelAction(e):this.settings.wheelOn===r.options.wheelOn.hover?e.shiftKey?(e.preventDefault(),window.scrollBy(0,i.isNegativeStrict(String(e.deltaY))?-50:50)):this.wheelAction(e):i.throwError("Unknown `wheelOn` option."))}wheelAction(e){this.isWheelEvent=!0;let t=!1,s=!1,a=!1;i.isWheelUpEvent(e)?t=!0:i.isWheelDownEvent(e)?s=!0:i.isWheelEventWithZeroDeltaY(e)?a=!0:i.throwError("The event is not a 'wheel' event."),a||this._wheelAndUpDownActions(e,t,s,this.settings.wheelStep),this.isWheelEvent=!1}_onDrop(e){if(this.formulaMode)return;this.isDropEvent=!0,e.preventDefault();const t=e.dataTransfer.getData("text/plain"),s=this.unformatOther(t),a=this.rawValue;this.set(s),this.isDropEvent=!1;const n=this.constructor._toNumericValue(s,this.settings);isNaN(Number(n))||i.trimPaddedZerosFromDecimalPlaces(a)!==i.trimPaddedZerosFromDecimalPlaces(n)&&this._triggerEvent(r.events.native.change,this.domElement)}_onFormSubmit(){return this._getFormAutoNumericChildren(this.parentForm).map(s=>this.constructor.getAutoNumericElement(s)).forEach(s=>s._unformatOnSubmit()),!0}_onFormReset(){this._getFormAutoNumericChildren(this.parentForm).map(s=>this.constructor.getAutoNumericElement(s)).forEach(s=>{const a=this._getDefaultValue(s.node());setTimeout(()=>s.set(a),0)})}_unformatOnSubmit(){this.settings.unformatOnSubmit&&this._setElementValue(this.rawValue)}_onKeydownGlobal(e){if(i.character(e)===m.keyName.Alt){const t=i.getHoveredElement();if(r.isManagedByAutoNumeric(t)){const s=r.getAutoNumericElement(t);!s.formulaMode&&s.settings.unformatOnHover&&this.constructor._unformatAltHovered(s)}}}_onKeyupGlobal(e){if(i.character(e)===m.keyName.Alt){const t=i.getHoveredElement();if(r.isManagedByAutoNumeric(t)){const s=r.getAutoNumericElement(t);if(s.formulaMode||!s.settings.unformatOnHover)return;this.constructor._reformatAltHovered(s)}}}_onCompositionstart(e){const t={key:m.keyName.Space,which:"32",keyCode:"32"},s=new KeyboardEvent("keydown",t);e.target.dispatchEvent(s),this.compositioning=!0}_onCompositionend(e){this.compositioning=!1;const t={key:m.keyName.Space,which:"32",keyCode:"32"},s=new KeyboardEvent("keypress",t);e.target.dispatchEvent(s);const a=new KeyboardEvent("keyup",t);e.target.dispatchEvent(a)}_isElementTagSupported(){return i.isElement(this.domElement)||i.throwError(`The DOM element is not valid, ${this.domElement} given.`),i.isInArray(this.domElement.tagName.toLowerCase(),this.allowedTagList)}_isInputElement(){return this.domElement.tagName.toLowerCase()==="input"}_isInputTypeSupported(){return this.domElement.type==="text"||this.domElement.type==="hidden"||this.domElement.type==="tel"||i.isUndefinedOrNullOrEmpty(this.domElement.type)}_checkElement(){const e=this.domElement.tagName.toLowerCase();this._isElementTagSupported()||i.throwError(`The <${e}> tag is not supported by autoNumeric`),this._isInputElement()?(this._isInputTypeSupported()||i.throwError(`The input type "${this.domElement.type}" is not supported by autoNumeric`),this.isInputElement=!0):(this.isInputElement=!1,this.isContentEditable=this._isContentEditable(this.domElement))}_isContentEditable(e){return e.hasAttribute("contenteditable")&&e.getAttribute("contenteditable")==="true"}_formatDefaultValueOnPageLoad(e=null){let t=!0,s;if(i.isNull(e)?(s=i.getElementValue(this.domElement).trim(),this.domElement.setAttribute("value",s)):s=e,this.isInputElement||this.isContentEditable){const a=this.constructor._toNumericValue(s,this.settings);if(!this.domElement.hasAttribute("value")||this.domElement.getAttribute("value")==="")!isNaN(Number(a))&&a!==1/0?(this.set(a),t=!1):i.throwError(`The value [${s}] used in the input is not a valid value autoNumeric can work with.`);else if(this.settings.defaultValueOverride!==null&&this.settings.defaultValueOverride.toString()!==s||this.settings.defaultValueOverride===null&&s!==""&&s!==this.domElement.getAttribute("value")||s!==""&&this.domElement.getAttribute("type")==="hidden"&&!i.isNumber(a)){if(this.settings.saveValueToSessionStorage&&(this.settings.decimalPlacesShownOnFocus!==null||this.settings.divisorWhenUnfocused)&&this._setRawValue(this._getValueFromPersistentStorage()),!this.settings.saveValueToSessionStorage){const n=this.constructor._removeBrackets(s,this.settings);(this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.suffix||this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.prefix&&this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix)&&this.settings.negativeSignCharacter!==""&&i.isNegative(s,this.settings.negativeSignCharacter)?this._setRawValue(`-${this.constructor._stripAllNonNumberCharacters(n,this.settings,!0,this.isFocused)}`):this._setRawValue(this.constructor._stripAllNonNumberCharacters(n,this.settings,!0,this.isFocused))}t=!1}if(s==="")switch(this.settings.emptyInputBehavior){case r.options.emptyInputBehavior.focus:case r.options.emptyInputBehavior.press:break;case r.options.emptyInputBehavior.always:this._setElementValue(this.settings.currencySymbol);break;case r.options.emptyInputBehavior.min:this.set(this.settings.minimumValue);break;case r.options.emptyInputBehavior.max:this.set(this.settings.maximumValue);break;case r.options.emptyInputBehavior.zero:this.set("0");break;case r.options.emptyInputBehavior.null:this.set(null);break;default:this.set(this.settings.emptyInputBehavior)}else t&&s===this.domElement.getAttribute("value")&&this.set(s)}else(this.settings.defaultValueOverride===null||this.settings.defaultValueOverride===s)&&this.set(s)}static _correctNegativePositiveSignPlacementOption(e){if(i.isNull(e.negativePositiveSignPlacement))if(!i.isUndefined(e)&&i.isUndefinedOrNullOrEmpty(e.negativePositiveSignPlacement)&&!i.isUndefinedOrNullOrEmpty(e.currencySymbol))switch(e.currencySymbolPlacement){case r.options.currencySymbolPlacement.suffix:e.negativePositiveSignPlacement=r.options.negativePositiveSignPlacement.prefix;break;case r.options.currencySymbolPlacement.prefix:e.negativePositiveSignPlacement=r.options.negativePositiveSignPlacement.left;break}else e.negativePositiveSignPlacement=r.options.negativePositiveSignPlacement.left}static _correctCaretPositionOnFocusAndSelectOnFocusOptions(e){return i.isNull(e)?null:(!i.isUndefinedOrNullOrEmpty(e.caretPositionOnFocus)&&i.isUndefinedOrNullOrEmpty(e.selectOnFocus)&&(e.selectOnFocus=r.options.selectOnFocus.doNotSelect),i.isUndefinedOrNullOrEmpty(e.caretPositionOnFocus)&&!i.isUndefinedOrNullOrEmpty(e.selectOnFocus)&&e.selectOnFocus===r.options.selectOnFocus.select&&(e.caretPositionOnFocus=r.options.caretPositionOnFocus.doNoForceCaretPosition),e)}static _calculateDecimalPlacesOnInit(e){this._validateDecimalPlacesRawValue(e),e.decimalPlacesShownOnFocus===r.options.decimalPlacesShownOnFocus.useDefault&&(e.decimalPlacesShownOnFocus=e.decimalPlaces),e.decimalPlacesShownOnBlur===r.options.decimalPlacesShownOnBlur.useDefault&&(e.decimalPlacesShownOnBlur=e.decimalPlaces),e.decimalPlacesRawValue===r.options.decimalPlacesRawValue.useDefault&&(e.decimalPlacesRawValue=e.decimalPlaces);let t=0;e.rawValueDivisor&&e.rawValueDivisor!==r.options.rawValueDivisor.none&&(t=String(e.rawValueDivisor).length-1,t<0&&(t=0)),e.decimalPlacesRawValue=Math.max(Math.max(e.decimalPlacesShownOnBlur,e.decimalPlacesShownOnFocus)+t,Number(e.originalDecimalPlacesRawValue)+t)}static _calculateDecimalPlacesOnUpdate(e,t=null){this._validateDecimalPlacesRawValue(e),i.isNull(t)&&i.throwError("When updating the settings, the previous ones should be passed as an argument.");const s="decimalPlaces"in e;if(!(s||"decimalPlacesRawValue"in e||"decimalPlacesShownOnFocus"in e||"decimalPlacesShownOnBlur"in e||"rawValueDivisor"in e))return;s?((!("decimalPlacesShownOnFocus"in e)||e.decimalPlacesShownOnFocus===r.options.decimalPlacesShownOnFocus.useDefault)&&(e.decimalPlacesShownOnFocus=e.decimalPlaces),(!("decimalPlacesShownOnBlur"in e)||e.decimalPlacesShownOnBlur===r.options.decimalPlacesShownOnBlur.useDefault)&&(e.decimalPlacesShownOnBlur=e.decimalPlaces),(!("decimalPlacesRawValue"in e)||e.decimalPlacesRawValue===r.options.decimalPlacesRawValue.useDefault)&&(e.decimalPlacesRawValue=e.decimalPlaces)):(i.isUndefined(e.decimalPlacesShownOnFocus)&&(e.decimalPlacesShownOnFocus=t.decimalPlacesShownOnFocus),i.isUndefined(e.decimalPlacesShownOnBlur)&&(e.decimalPlacesShownOnBlur=t.decimalPlacesShownOnBlur));let a=0;e.rawValueDivisor&&e.rawValueDivisor!==r.options.rawValueDivisor.none&&(a=String(e.rawValueDivisor).length-1,a<0&&(a=0)),!e.decimalPlaces&&!e.decimalPlacesRawValue?e.decimalPlacesRawValue=Math.max(Math.max(e.decimalPlacesShownOnBlur,e.decimalPlacesShownOnFocus)+a,Number(t.originalDecimalPlacesRawValue)+a):e.decimalPlacesRawValue=Math.max(Math.max(e.decimalPlacesShownOnBlur,e.decimalPlacesShownOnFocus)+a,Number(e.decimalPlacesRawValue)+a)}_calculateVMinAndVMaxIntegerSizes(){let[e]=this.settings.maximumValue.toString().split("."),[t]=!this.settings.minimumValue&&this.settings.minimumValue!==0?[]:this.settings.minimumValue.toString().split(".");e=e.replace(this.settings.negativeSignCharacter,""),t=t.replace(this.settings.negativeSignCharacter,""),this.settings.mIntPos=Math.max(e.length,1),this.settings.mIntNeg=Math.max(t.length,1)}_calculateValuesToStringsKeys(){this.settings.valuesToStrings?this.valuesToStringsKeys=Object.keys(this.settings.valuesToStrings):this.valuesToStringsKeys=[]}static _cachesUsualRegularExpressions(e,t){let s;e.negativeSignCharacter!==r.options.negativeSignCharacter.hyphen?s=`([-\\${e.negativeSignCharacter}]?)`:s="(-?)",t.aNegRegAutoStrip=s,e.allowedAutoStrip=new RegExp(`[^-0123456789\\${e.decimalCharacter}]`,"g"),e.numRegAutoStrip=new RegExp(`${s}(?:\\${e.decimalCharacter}?([0-9]+\\${e.decimalCharacter}[0-9]+)|([0-9]*(?:\\${e.decimalCharacter}[0-9]*)?))`),e.stripReg=new RegExp(`^${t.aNegRegAutoStrip}0*([0-9])`),e.formulaChars=new RegExp(`[0-9${e.decimalCharacter}+\\-*/() ]`)}_transformOptionsValuesToDefaultTypes(){for(const e in this.settings)if(Object.prototype.hasOwnProperty.call(this.settings,e)){const t=this.settings[e];(t==="true"||t==="false")&&(this.settings[e]=t==="true"),typeof t=="number"&&(this.settings[e]=t.toString())}}static _convertOldOptionsToNewOnes(e){const t={aSep:"digitGroupSeparator",nSep:"showOnlyNumbersOnFocus",dGroup:"digitalGroupSpacing",aDec:"decimalCharacter",altDec:"decimalCharacterAlternative",aSign:"currencySymbol",pSign:"currencySymbolPlacement",pNeg:"negativePositiveSignPlacement",aSuffix:"suffixText",oLimits:"overrideMinMaxLimits",vMax:"maximumValue",vMin:"minimumValue",mDec:"decimalPlacesOverride",eDec:"decimalPlacesShownOnFocus",scaleDecimal:"decimalPlacesShownOnBlur",aStor:"saveValueToSessionStorage",mRound:"roundingMethod",aPad:"allowDecimalPadding",nBracket:"negativeBracketsTypeOnBlur",wEmpty:"emptyInputBehavior",lZero:"leadingZero",aForm:"formatOnPageLoad",sNumber:"selectNumberOnly",anDefault:"defaultValueOverride",unSetOnSubmit:"unformatOnSubmit",outputType:"outputFormat",debug:"showWarnings",allowDecimalPadding:!0,alwaysAllowDecimalCharacter:!0,caretPositionOnFocus:!0,createLocalList:!0,currencySymbol:!0,currencySymbolPlacement:!0,decimalCharacter:!0,decimalCharacterAlternative:!0,decimalPlaces:!0,decimalPlacesRawValue:!0,decimalPlacesShownOnBlur:!0,decimalPlacesShownOnFocus:!0,defaultValueOverride:!0,digitalGroupSpacing:!0,digitGroupSeparator:!0,divisorWhenUnfocused:!0,emptyInputBehavior:!0,eventBubbles:!0,eventIsCancelable:!0,failOnUnknownOption:!0,formatOnPageLoad:!0,formulaMode:!0,historySize:!0,isCancellable:!0,leadingZero:!0,maximumValue:!0,minimumValue:!0,modifyValueOnUpDownArrow:!0,modifyValueOnWheel:!0,negativeBracketsTypeOnBlur:!0,negativePositiveSignPlacement:!0,negativeSignCharacter:!0,negativePositiveSignBehavior:!0,noEventListeners:!0,onInvalidPaste:!0,outputFormat:!0,overrideMinMaxLimits:!0,positiveSignCharacter:!0,rawValueDivisor:!0,readOnly:!0,roundingMethod:!0,saveValueToSessionStorage:!0,selectNumberOnly:!0,selectOnFocus:!0,serializeSpaces:!0,showOnlyNumbersOnFocus:!0,showPositiveSign:!0,showWarnings:!0,styleRules:!0,suffixText:!0,symbolWhenUnfocused:!0,upDownStep:!0,unformatOnHover:!0,unformatOnSubmit:!0,valuesToStrings:!0,watchExternalChanges:!0,wheelOn:!0,wheelStep:!0,allowedAutoStrip:!0,formulaChars:!0,isNegativeSignAllowed:!0,isPositiveSignAllowed:!0,mIntNeg:!0,mIntPos:!0,numRegAutoStrip:!0,originalDecimalPlaces:!0,originalDecimalPlacesRawValue:!0,stripReg:!0};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t[s]===!0)continue;Object.prototype.hasOwnProperty.call(t,s)?(i.warning(`You are using the deprecated option name '${s}'. Please use '${t[s]}' instead from now on. The old option name will be dropped very soon™.`,!0),e[t[s]]=e[s],delete e[s]):e.failOnUnknownOption&&i.throwError(`Option name '${s}' is unknown. Please fix the options passed to autoNumeric`)}"mDec"in e&&i.warning("The old `mDec` option has been deprecated in favor of more accurate options ; `decimalPlaces`, `decimalPlacesRawValue`, `decimalPlacesShownOnFocus` and `decimalPlacesShownOnBlur`.",!0)}_setSettings(e,t=!1){(t||!i.isNull(e))&&this.constructor._convertOldOptionsToNewOnes(e),t?("decimalPlacesRawValue"in e&&(this.settings.originalDecimalPlacesRawValue=e.decimalPlacesRawValue),"decimalPlaces"in e&&(this.settings.originalDecimalPlaces=e.decimalPlaces),this.constructor._calculateDecimalPlacesOnUpdate(e,this.settings),this._mergeSettings(e)):(this.settings={},this._mergeSettings(this.constructor.getDefaultConfig(),this.domElement.dataset,e,{rawValue:this.defaultRawValue}),this.caretFix=!1,this.throwInput=!0,this.allowedTagList=m.allowedTagList,this.runOnce=!1,this.hoveredWithAlt=!1),this._transformOptionsValuesToDefaultTypes(),this._runCallbacksFoundInTheSettingsObject(),this.constructor._correctNegativePositiveSignPlacementOption(this.settings),this.constructor._correctCaretPositionOnFocusAndSelectOnFocusOptions(this.settings),this.constructor._setNegativePositiveSignPermissions(this.settings),t||(i.isNull(e)||!e.decimalPlaces?this.settings.originalDecimalPlaces=null:this.settings.originalDecimalPlaces=e.decimalPlaces,this.settings.originalDecimalPlacesRawValue=this.settings.decimalPlacesRawValue,this.constructor._calculateDecimalPlacesOnInit(this.settings)),this._calculateVMinAndVMaxIntegerSizes(),this._setTrailingNegativeSignInfo(),this.regex={},this.constructor._cachesUsualRegularExpressions(this.settings,this.regex),this.constructor._setBrackets(this.settings),this._calculateValuesToStringsKeys(),i.isEmptyObj(this.settings)&&i.throwError("Unable to set the settings, those are invalid ; an empty object was given."),this.constructor.validate(this.settings,!1,e),this._keepAnOriginalSettingsCopy()}static _setNegativePositiveSignPermissions(e){e.isNegativeSignAllowed=e.minimumValue<0,e.isPositiveSignAllowed=e.maximumValue>=0}static _toNumericValue(e,t){let s;return i.isNumber(Number(e))?(i.isNumberStrict(e)||(e=String(e).trim()),s=i.scientificToDecimal(e)):(s=this._convertToNumericString(e.toString(),t),i.isNumber(Number(s))||(i.warning(`The given value "${e}" cannot be converted to a numeric one and therefore cannot be used appropriately.`,t.showWarnings),s=NaN)),s}_preparePastedText(e){return this.constructor._stripAllNonNumberCharacters(e,this.settings,!0,this.isFocused)}static _checkIfInRange(e,t,s){const a=i.parseStr(e);return i.testMinMax(t,a)>-1&&i.testMinMax(s,a)<1}_updateInternalProperties(){this.selection=i.getElementSelection(this.domElement),this.processed=!1}_updateEventKeyInfo(e){this.eventKey=i.character(e)}_saveCancellableValue(){this.savedCancellableValue=this.rawValue}_setSelection(e,t){e=Math.max(e,0),t=Math.min(t,i.getElementValue(this.domElement).length),this.selection={start:e,end:t,length:t-e},i.setElementSelection(this.domElement,e,t)}_setCaretPosition(e){this._setSelection(e,e)}_getLeftAndRightPartAroundTheSelection(){const e=i.getElementValue(this.domElement),t=e.substring(0,this.selection.start),s=e.substring(this.selection.end,e.length);return[t,s]}_getUnformattedLeftAndRightPartAroundTheSelection(){let[e,t]=this._getLeftAndRightPartAroundTheSelection();if(e===""&&t==="")return["",""];let s=!0;return(this.eventKey===m.keyName.Hyphen||this.eventKey===m.keyName.Minus)&&Number(e)===0&&(s=!1),this.isTrailingNegative&&(i.isNegative(t,this.settings.negativeSignCharacter)&&!i.isNegative(e,this.settings.negativeSignCharacter)||t===""&&i.isNegative(e,this.settings.negativeSignCharacter,!0))&&(e=e.replace(this.settings.negativeSignCharacter,""),t=t.replace(this.settings.negativeSignCharacter,""),e=e.replace("-",""),t=t.replace("-",""),e=`-${e}`),e=r._stripAllNonNumberCharactersExceptCustomDecimalChar(e,this.settings,s,this.isFocused),t=r._stripAllNonNumberCharactersExceptCustomDecimalChar(t,this.settings,!1,this.isFocused),[e,t]}_normalizeParts(e,t){let s=!0;(this.eventKey===m.keyName.Hyphen||this.eventKey===m.keyName.Minus)&&Number(e)===0&&(s=!1),this.isTrailingNegative&&i.isNegative(t,this.settings.negativeSignCharacter)&&!i.isNegative(e,this.settings.negativeSignCharacter)&&(e=`-${e}`,t=t.replace(this.settings.negativeSignCharacter,"")),e=r._stripAllNonNumberCharactersExceptCustomDecimalChar(e,this.settings,s,this.isFocused),t=r._stripAllNonNumberCharactersExceptCustomDecimalChar(t,this.settings,!1,this.isFocused),this.settings.leadingZero===r.options.leadingZero.deny&&(this.eventKey===m.keyName.num0||this.eventKey===m.keyName.numpad0)&&Number(e)===0&&!i.contains(e,this.settings.decimalCharacter)&&t!==""&&(e=e.substring(0,e.length-1));let a=e+t;if(this.settings.decimalCharacter){const n=a.match(new RegExp(`^${this.regex.aNegRegAutoStrip}\\${this.settings.decimalCharacter}`));n&&(e=e.replace(n[1],n[1]+"0"),a=e+t)}return[e,t,a]}_setValueParts(e,t,s=!1){const[a,n,c]=this._normalizeParts(e,t),[o,l]=r._checkIfInRangeWithOverrideOption(c,this.settings);if(o&&l){const d=r._truncateDecimalPlaces(c,this.settings,s,this.settings.decimalPlacesRawValue).replace(this.settings.decimalCharacter,".");if(d===""||d===this.settings.negativeSignCharacter){let v;switch(this.settings.emptyInputBehavior){case r.options.emptyInputBehavior.focus:case r.options.emptyInputBehavior.press:case r.options.emptyInputBehavior.always:v="";break;case r.options.emptyInputBehavior.min:v=this.settings.minimumValue;break;case r.options.emptyInputBehavior.max:v=this.settings.maximumValue;break;case r.options.emptyInputBehavior.zero:v="0";break;case r.options.emptyInputBehavior.null:v=null;break;default:v=this.settings.emptyInputBehavior}this._setRawValue(v)}else this._setRawValue(this._trimLeadingAndTrailingZeros(d));const g=r._truncateDecimalPlaces(c,this.settings,s,this.settings.decimalPlacesShownOnFocus);let f=a.length;return f>g.length&&(f=g.length),f===1&&a==="0"&&this.settings.leadingZero===r.options.leadingZero.deny&&(n===""||a==="0"&&n!==""?f=1:f=0),this._setElementValue(g,!1),this._setCaretPosition(f),!0}return this._triggerRangeEvents(o,l),!1}_getSignPosition(){let e;if(this.settings.currencySymbol){const t=this.settings.currencySymbol.length,s=i.getElementValue(this.domElement);if(this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix)this.settings.negativeSignCharacter&&s&&s.charAt(0)===this.settings.negativeSignCharacter?e=[1,t+1]:e=[0,t];else{const a=s.length;e=[a-t,a]}}else e=[1e3,-1];return e}_expandSelectionOnSign(){const[e,t]=this._getSignPosition(),s=this.selection;s.start<t&&s.end>e&&((s.start<e||s.end>t)&&i.getElementValue(this.domElement).substring(Math.max(s.start,e),Math.min(s.end,t)).match(/^\s*$/)?s.start<e?this._setSelection(s.start,e):this._setSelection(t,s.end):this._setSelection(Math.min(s.start,e),Math.max(s.end,t)))}_checkPaste(){if(!this.formatted&&!i.isUndefined(this.valuePartsBeforePaste)){const e=this.valuePartsBeforePaste,[t,s]=this._getLeftAndRightPartAroundTheSelection();delete this.valuePartsBeforePaste;const a=t.substr(0,e[0].length)+r._stripAllNonNumberCharactersExceptCustomDecimalChar(t.substr(e[0].length),this.settings,!0,this.isFocused);this._setValueParts(a,s,!0)||(this._setElementValue(e.join(""),!1),this._setCaretPosition(e[0].length))}}static _shouldSkipEventKey(e){const t=i.isInArray(e,m.keyName._allFnKeys),s=e===m.keyName.OSLeft||e===m.keyName.OSRight,a=e===m.keyName.ContextMenu,n=i.isInArray(e,m.keyName._someNonPrintableKeys),c=e===m.keyName.NumLock||e===m.keyName.ScrollLock||e===m.keyName.Insert||e===m.keyName.Command,o=e===m.keyName.Unidentified;return t||s||a||n||o||c}_processNonPrintableKeysAndShortcuts(e){if((e.ctrlKey||e.metaKey)&&e.type==="keyup"&&!i.isUndefined(this.valuePartsBeforePaste)||e.shiftKey&&this.eventKey===m.keyName.Insert)return this._checkPaste(),!1;if(this.constructor._shouldSkipEventKey(this.eventKey))return!0;if((e.ctrlKey||e.metaKey)&&this.eventKey===m.keyName.a)return this.settings.selectNumberOnly&&(e.preventDefault(),this.selectNumber()),!0;if((e.ctrlKey||e.metaKey)&&(this.eventKey===m.keyName.c||this.eventKey===m.keyName.v||this.eventKey===m.keyName.x))return e.type==="keydown"&&this._expandSelectionOnSign(),(this.eventKey===m.keyName.v||this.eventKey===m.keyName.Insert)&&(e.type==="keydown"||e.type==="keypress"?i.isUndefined(this.valuePartsBeforePaste)&&(this.valuePartsBeforePaste=this._getLeftAndRightPartAroundTheSelection()):this._checkPaste()),e.type==="keydown"||e.type==="keypress"||this.eventKey===m.keyName.c;if(e.ctrlKey||e.metaKey)return!(this.eventKey===m.keyName.Z||this.eventKey===m.keyName.z);if(this.eventKey===m.keyName.LeftArrow||this.eventKey===m.keyName.RightArrow){if(e.type==="keydown"&&!e.shiftKey){const t=i.getElementValue(this.domElement);this.eventKey===m.keyName.LeftArrow&&(t.charAt(this.selection.start-2)===this.settings.digitGroupSeparator||t.charAt(this.selection.start-2)===this.settings.decimalCharacter)?this._setCaretPosition(this.selection.start-1):this.eventKey===m.keyName.RightArrow&&(t.charAt(this.selection.start+1)===this.settings.digitGroupSeparator||t.charAt(this.selection.start+1)===this.settings.decimalCharacter)&&this._setCaretPosition(this.selection.start+1)}return!0}return i.isInArray(this.eventKey,m.keyName._directionKeys)}_processCharacterDeletionIfTrailingNegativeSign([e,t]){const s=i.getElementValue(this.domElement),a=i.isNegative(s,this.settings.negativeSignCharacter);if(this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.suffix&&(this.eventKey===m.keyName.Backspace?(this.caretFix=this.selection.start>=s.indexOf(this.settings.suffixText)&&this.settings.suffixText!=="",s.charAt(this.selection.start-1)==="-"?e=e.substring(1):this.selection.start<=s.length-this.settings.suffixText.length&&(e=e.substring(0,e.length-1))):(this.caretFix=this.selection.start>=s.indexOf(this.settings.suffixText)&&this.settings.suffixText!=="",this.selection.start>=s.indexOf(this.settings.currencySymbol)+this.settings.currencySymbol.length&&(t=t.substring(1,t.length)),i.isNegative(e,this.settings.negativeSignCharacter)&&s.charAt(this.selection.start)==="-"&&(e=e.substring(1)))),this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix)switch(this.settings.negativePositiveSignPlacement){case r.options.negativePositiveSignPlacement.left:this.caretFix=this.selection.start>=s.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length,this.eventKey===m.keyName.Backspace?this.selection.start===s.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length&&a?e=e.substring(1):e!=="-"&&(this.selection.start<=s.indexOf(this.settings.negativeSignCharacter)||!a)&&(e=e.substring(0,e.length-1)):(e[0]==="-"&&(t=t.substring(1)),this.selection.start===s.indexOf(this.settings.negativeSignCharacter)&&a&&(e=e.substring(1)));break;case r.options.negativePositiveSignPlacement.right:this.caretFix=this.selection.start>=s.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length,this.eventKey===m.keyName.Backspace?this.selection.start===s.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length?e=e.substring(1):(e!=="-"&&this.selection.start<=s.indexOf(this.settings.negativeSignCharacter)-this.settings.currencySymbol.length||e!==""&&!a)&&(e=e.substring(0,e.length-1)):(this.caretFix=this.selection.start>=s.indexOf(this.settings.currencySymbol)&&this.settings.currencySymbol!=="",this.selection.start===s.indexOf(this.settings.negativeSignCharacter)&&(e=e.substring(1)),t=t.substring(1));break}return[e,t]}_processCharacterDeletion(e){let t,s;return this.selection.length?(this._expandSelectionOnSign(),[t,s]=this._getUnformattedLeftAndRightPartAroundTheSelection()):([t,s]=this._getUnformattedLeftAndRightPartAroundTheSelection(),t===""&&s===""&&(this.throwInput=!1),this.isTrailingNegative&&i.isNegative(i.getElementValue(this.domElement),this.settings.negativeSignCharacter)?[t,s]=this._processCharacterDeletionIfTrailingNegativeSign([t,s]):this.eventKey===m.keyName.Backspace?t=t.substring(0,t.length-1):s=s.substring(1,s.length)),!this.constructor._isWithinRangeWithOverrideOption(`${t}${s}`,this.settings)||i.getElementValue(e.target)===this.settings.currencySymbol?!1:(this._setValueParts(t,s),!0)}_isDecimalCharacterInsertionAllowed(){return String(this.settings.decimalPlacesShownOnFocus)!==String(r.options.decimalPlacesShownOnFocus.none)&&String(this.settings.decimalPlaces)!==String(r.options.decimalPlaces.none)}_processCharacterInsertion(){let[e,t]=this._getUnformattedLeftAndRightPartAroundTheSelection();if(this.eventKey!==m.keyName.AndroidDefault&&(this.throwInput=!0),this.eventKey===this.settings.decimalCharacter||this.settings.decimalCharacterAlternative&&this.eventKey===this.settings.decimalCharacterAlternative){if(!this._isDecimalCharacterInsertionAllowed()||!this.settings.decimalCharacter)return!1;if(this.settings.alwaysAllowDecimalCharacter)e=e.replace(this.settings.decimalCharacter,""),t=t.replace(this.settings.decimalCharacter,"");else{if(i.contains(e,this.settings.decimalCharacter)||t.indexOf(this.settings.decimalCharacter)>0)return!0;t.indexOf(this.settings.decimalCharacter)===0&&(t=t.substr(1))}return this.settings.negativeSignCharacter&&i.contains(t,this.settings.negativeSignCharacter)&&(e=`${this.settings.negativeSignCharacter}${e}`,t=t.replace(this.settings.negativeSignCharacter,"")),this._setValueParts(e+this.settings.decimalCharacter,t),!0}if((this.eventKey==="-"||this.eventKey==="+")&&this.settings.isNegativeSignAllowed)return e===""&&i.contains(t,"-")?(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="+")&&(t=t.replace("-","")):i.isNegativeStrict(e,"-")?(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="+")&&(e=e.replace("-","")):(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="-")&&(e=`${this.settings.negativeSignCharacter}${e}`),this._setValueParts(e,t),!0;const s=Number(this.eventKey);return s>=0&&s<=9?(this.settings.isNegativeSignAllowed&&e===""&&i.contains(t,"-")&&(e="-",t=t.substring(1,t.length)),this.settings.maximumValue<=0&&this.settings.minimumValue<this.settings.maximumValue&&!i.contains(i.getElementValue(this.domElement),this.settings.negativeSignCharacter)&&this.eventKey!=="0"&&(e=`-${e}`),this._setValueParts(`${e}${this.eventKey}`,t),!0):(this.throwInput=!1,!1)}_formatValue(e){const t=i.getElementValue(this.domElement);let[s]=this._getUnformattedLeftAndRightPartAroundTheSelection();if((this.settings.digitGroupSeparator===""||this.settings.digitGroupSeparator!==""&&!i.contains(t,this.settings.digitGroupSeparator))&&(this.settings.currencySymbol===""||this.settings.currencySymbol!==""&&!i.contains(t,this.settings.currencySymbol))){let[c]=t.split(this.settings.decimalCharacter),o="";i.isNegative(c,this.settings.negativeSignCharacter)&&(o=this.settings.negativeSignCharacter,c=c.replace(this.settings.negativeSignCharacter,""),s=s.replace("-","")),o===""&&c.length>this.settings.mIntPos&&s.charAt(0)==="0"&&(s=s.slice(1)),o===this.settings.negativeSignCharacter&&c.length>this.settings.mIntNeg&&s.charAt(0)==="0"&&(s=s.slice(1)),this.isTrailingNegative||(s=`${o}${s}`)}const a=this.constructor._addGroupSeparators(t,this.settings,this.isFocused,this.rawValue);let n=a.length;if(a){const c=s.split("");if((this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.suffix||this.settings.negativePositiveSignPlacement!==r.options.negativePositiveSignPlacement.prefix&&this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix)&&c[0]===this.settings.negativeSignCharacter&&!this.settings.isNegativeSignAllowed&&(c.shift(),(this.eventKey===m.keyName.Backspace||this.eventKey===m.keyName.Delete)&&this.caretFix&&((this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix&&this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.left||this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.suffix)&&(c.push(this.settings.negativeSignCharacter),this.caretFix=e.type==="keydown"),this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix&&this.settings.negativePositiveSignPlacement===r.options.negativePositiveSignPlacement.right))){const h=this.settings.currencySymbol.split(""),d=["\\","^","$",".","|","?","*","+","(",")","["],g=[];h.forEach((f,v)=>{v=h[f],i.isInArray(v,d)?g.push("\\"+v):g.push(v)}),this.eventKey===m.keyName.Backspace&&this.settings.negativeSignCharacter==="-"&&g.push("-"),c.push(g.join("")),this.caretFix=e.type==="keydown"}for(let h=0;h<c.length;h++)c[h].match("\\d")||(c[h]="\\"+c[h]);let o;this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix?o=new RegExp(`^.*?${c.join(".*?")}`):o=new RegExp(`^.*?[${this.settings.currencySymbol}]*${c.join(".*?")}`);const l=a.match(o);l?(n=l[0].length,this.settings.showPositiveSign&&(n===0&&l.input.charAt(0)===this.settings.positiveSignCharacter&&(n=l.input.indexOf(this.settings.currencySymbol)===1?this.settings.currencySymbol.length+1:1),n===0&&l.input.charAt(this.settings.currencySymbol.length)===this.settings.positiveSignCharacter&&(n=this.settings.currencySymbol.length+1)),(n===0&&a.charAt(0)!==this.settings.negativeSignCharacter||n===1&&a.charAt(0)===this.settings.negativeSignCharacter)&&this.settings.currencySymbol&&this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.prefix&&(n=this.settings.currencySymbol.length+(i.isNegativeStrict(a,this.settings.negativeSignCharacter)?1:0))):(this.settings.currencySymbol&&this.settings.currencySymbolPlacement===r.options.currencySymbolPlacement.suffix&&(n-=this.settings.currencySymbol.length),this.settings.suffixText&&(n-=this.settings.suffixText.length))}a!==t&&(this._setElementValue(a,!1),this._setCaretPosition(n)),this.formatted=!0}static _serialize(e,t=!1,s="unformatted",a="+",n=null){const c=[];typeof e=="object"&&e.nodeName.toLowerCase()==="form"&&Array.prototype.slice.call(e.elements).forEach(l=>{if(l.name&&!l.disabled&&["file","reset","submit","button"].indexOf(l.type)===-1){if(l.type==="select-multiple")Array.prototype.slice.call(l.options).forEach(h=>{h.selected&&(t?c.push({name:l.name,value:h.value}):c.push(`${encodeURIComponent(l.name)}=${encodeURIComponent(h.value)}`))});else if(["checkbox","radio"].indexOf(l.type)===-1||l.checked){let h;if(this.isManagedByAutoNumeric(l)){let d;switch(s){case"unformatted":d=this.getAutoNumericElement(l),i.isNull(d)||(h=this.unformat(l,d.getSettings()));break;case"localized":if(d=this.getAutoNumericElement(l),!i.isNull(d)){const g=i.cloneObject(d.getSettings());i.isNull(n)||(g.outputFormat=n),h=this.localize(l,g)}break;case"formatted":default:h=l.value}}else h=l.value;i.isUndefined(h)&&i.throwError("This error should never be hit. If it has, something really wrong happened!"),t?c.push({name:l.name,value:h}):c.push(`${encodeURIComponent(l.name)}=${encodeURIComponent(h)}`)}}});let o;return t?o=c:(o=c.join("&"),a==="+"&&(o=o.replace(/%20/g,"+"))),o}static _serializeNumericString(e,t="+"){return this._serialize(e,!1,"unformatted",t)}static _serializeFormatted(e,t="+"){return this._serialize(e,!1,"formatted",t)}static _serializeLocalized(e,t="+",s=null){return this._serialize(e,!1,"localized",t,s)}static _serializeNumericStringArray(e,t="+"){return this._serialize(e,!0,"unformatted",t)}static _serializeFormattedArray(e,t="+"){return this._serialize(e,!0,"formatted",t)}static _serializeLocalizedArray(e,t="+",s=null){return this._serialize(e,!0,"localized",t,s)}};let u=r;I(u,"options"),I(u,"events"),I(u,"defaultSettings"),I(u,"predefinedOptions");u.multiple=(y,e=null,t=null)=>{const s=[];if(i.isObject(e)&&(t=e,e=null),i.isString(y))y=[...document.querySelectorAll(y)];else if(i.isObject(y)){Object.prototype.hasOwnProperty.call(y,"rootElement")||i.throwError("The object passed to the 'multiple' function is invalid ; no 'rootElement' attribute found.");const v=[...y.rootElement.querySelectorAll("input")];Object.prototype.hasOwnProperty.call(y,"exclude")?(Array.isArray(y.exclude)||i.throwError("The 'exclude' array passed to the 'multiple' function is invalid."),y=i.filterOut(v,y.exclude)):y=v}else i.isArray(y)||i.throwError("The given parameters to the 'multiple' function are invalid.");if(y.length===0){let v=!0;return!i.isNull(t)&&i.isBoolean(t.showWarnings)&&(v=t.showWarnings),i.warning("No valid DOM elements were given hence no AutoNumeric objects were instantiated.",v),[]}const n=i.isArray(e)&&e.length>=1;let c=!1,o=!1;if(n){const v=typeof Number(e[0]);c=v==="number"&&!isNaN(Number(e[0])),c||(v==="string"||isNaN(v)||v==="object")&&(o=!0)}const l=i.isArray(t)&&t.length>=1;let h=!1;if(l){const v=typeof t[0];(v==="string"||v==="object")&&(h=!0)}let d;o?d=u.mergeOptions(e):h?d=u.mergeOptions(t):d=t;const g=i.isNumber(e);let f;return c&&(f=e.length),y.forEach((v,p)=>{g?s.push(new u(v,e,d)):c&&p<=f?s.push(new u(v,e[p],d)):s.push(new u(v,null,d))}),s};u.events={correctedValue:"autoNumeric:correctedValue",initialized:"autoNumeric:initialized",invalidFormula:"autoNumeric:invalidFormula",invalidValue:"autoNumeric:invalidValue",formatted:"autoNumeric:formatted",rawValueModified:"autoNumeric:rawValueModified",minRangeExceeded:"autoNumeric:minExceeded",maxRangeExceeded:"autoNumeric:maxExceeded",native:{input:"input",change:"change"},validFormula:"autoNumeric:validFormula"};Object.freeze(u.events.native);Object.freeze(u.events);Object.defineProperty(u,"events",{configurable:!1,writable:!1});u.options={allowDecimalPadding:{always:!0,never:!1,floats:"floats"},alwaysAllowDecimalCharacter:{alwaysAllow:!0,doNotAllow:!1},caretPositionOnFocus:{start:"start",end:"end",decimalLeft:"decimalLeft",decimalRight:"decimalRight",doNoForceCaretPosition:null},createLocalList:{createList:!0,doNotCreateList:!1},currencySymbol:{none:"",currencySign:"¤",austral:"₳",australCentavo:"¢",baht:"฿",cedi:"₵",cent:"¢",colon:"₡",cruzeiro:"₢",dollar:"$",dong:"₫",drachma:"₯",dram:"​֏",european:"₠",euro:"€",florin:"ƒ",franc:"₣",guarani:"₲",hryvnia:"₴",kip:"₭",att:"ອັດ",lepton:"Λ.",lira:"₺",liraOld:"₤",lari:"₾",mark:"ℳ",mill:"₥",naira:"₦",peseta:"₧",peso:"₱",pfennig:"₰",pound:"£",real:"R$ ",riel:"៛",ruble:"₽",rupee:"₹",rupeeOld:"₨",shekel:"₪",shekelAlt:"ש״ח‎‎",taka:"৳",tenge:"₸",togrog:"₮",won:"₩",yen:"¥"},currencySymbolPlacement:{prefix:"p",suffix:"s"},decimalCharacter:{comma:",",dot:".",middleDot:"·",arabicDecimalSeparator:"٫",decimalSeparatorKeySymbol:"⎖"},decimalCharacterAlternative:{none:null,comma:",",dot:"."},decimalPlaces:{none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesRawValue:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesShownOnBlur:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesShownOnFocus:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},defaultValueOverride:{doNotOverride:null},digitalGroupSpacing:{two:"2",twoThree:"2t",twoScaled:"2s",three:"3",four:"4"},digitGroupSeparator:{comma:",",dot:".",normalSpace:" ",thinSpace:" ",narrowNoBreakSpace:" ",noBreakSpace:" ",noSeparator:"",apostrophe:"'",arabicThousandsSeparator:"٬",dotAbove:"˙",privateUseTwo:"’"},divisorWhenUnfocused:{none:null,percentage:100,permille:1e3,basisPoint:1e4},emptyInputBehavior:{focus:"focus",press:"press",always:"always",zero:"zero",min:"min",max:"max",null:"null"},eventBubbles:{bubbles:!0,doesNotBubble:!1},eventIsCancelable:{isCancelable:!0,isNotCancelable:!1},failOnUnknownOption:{fail:!0,ignore:!1},formatOnPageLoad:{format:!0,doNotFormat:!1},formulaMode:{enabled:!0,disabled:!1},historySize:{verySmall:5,small:10,medium:20,large:50,veryLarge:100,insane:Number.MAX_SAFE_INTEGER},invalidClass:"an-invalid",isCancellable:{cancellable:!0,notCancellable:!1},leadingZero:{allow:"allow",deny:"deny",keep:"keep"},maximumValue:{tenTrillions:"10000000000000",oneBillion:"1000000000",zero:"0"},minimumValue:{tenTrillions:"-10000000000000",oneBillion:"-1000000000",zero:"0"},modifyValueOnUpDownArrow:{modifyValue:!0,doNothing:!1},modifyValueOnWheel:{modifyValue:!0,doNothing:!1},negativeBracketsTypeOnBlur:{parentheses:"(,)",brackets:"[,]",chevrons:"<,>",curlyBraces:"{,}",angleBrackets:"〈,〉",japaneseQuotationMarks:"｢,｣",halfBrackets:"⸤,⸥",whiteSquareBrackets:"⟦,⟧",quotationMarks:"‹,›",guillemets:"«,»",none:null},negativePositiveSignPlacement:{prefix:"p",suffix:"s",left:"l",right:"r",none:null},negativeSignCharacter:{hyphen:"-",minus:"−",heavyMinus:"➖",fullWidthHyphen:"－",circledMinus:"⊖",squaredMinus:"⊟",triangleMinus:"⨺",plusMinus:"±",minusPlus:"∓",dotMinus:"∸",minusTilde:"≂",not:"¬"},negativePositiveSignBehavior:{toggle:!0,doNotToggle:!1},noEventListeners:{noEvents:!0,addEvents:!1},onInvalidPaste:{error:"error",ignore:"ignore",clamp:"clamp",truncate:"truncate",replace:"replace"},outputFormat:{string:"string",number:"number",dot:".",negativeDot:"-.",comma:",",negativeComma:"-,",dotNegative:".-",commaNegative:",-",none:null},overrideMinMaxLimits:{ceiling:"ceiling",floor:"floor",ignore:"ignore",invalid:"invalid",doNotOverride:null},positiveSignCharacter:{plus:"+",fullWidthPlus:"＋",heavyPlus:"➕",doublePlus:"⧺",triplePlus:"⧻",circledPlus:"⊕",squaredPlus:"⊞",trianglePlus:"⨹",plusMinus:"±",minusPlus:"∓",dotPlus:"∔",altHebrewPlus:"﬩",normalSpace:" ",thinSpace:" ",narrowNoBreakSpace:" ",noBreakSpace:" "},rawValueDivisor:{none:null,percentage:100,permille:1e3,basisPoint:1e4},readOnly:{readOnly:!0,readWrite:!1},roundingMethod:{halfUpSymmetric:"S",halfUpAsymmetric:"A",halfDownSymmetric:"s",halfDownAsymmetric:"a",halfEvenBankersRounding:"B",upRoundAwayFromZero:"U",downRoundTowardZero:"D",toCeilingTowardPositiveInfinity:"C",toFloorTowardNegativeInfinity:"F",toNearest05:"N05",toNearest05Alt:"CHF",upToNext05:"U05",downToNext05:"D05"},saveValueToSessionStorage:{save:!0,doNotSave:!1},selectNumberOnly:{selectNumbersOnly:!0,selectAll:!1},selectOnFocus:{select:!0,doNotSelect:!1},serializeSpaces:{plus:"+",percent:"%20"},showOnlyNumbersOnFocus:{onlyNumbers:!0,showAll:!1},showPositiveSign:{show:!0,hide:!1},showWarnings:{show:!0,hide:!1},styleRules:{none:null,positiveNegative:{positive:"autoNumeric-positive",negative:"autoNumeric-negative"},range0To100With4Steps:{ranges:[{min:0,max:25,class:"autoNumeric-red"},{min:25,max:50,class:"autoNumeric-orange"},{min:50,max:75,class:"autoNumeric-yellow"},{min:75,max:100,class:"autoNumeric-green"}]},evenOdd:{userDefined:[{callback:y=>y%2===0,classes:["autoNumeric-even","autoNumeric-odd"]}]},rangeSmallAndZero:{userDefined:[{callback:y=>y>=-1&&y<0?0:Number(y)===0?1:y>0&&y<=1?2:null,classes:["autoNumeric-small-negative","autoNumeric-zero","autoNumeric-small-positive"]}]}},suffixText:{none:"",percentage:"%",permille:"‰",basisPoint:"‱"},symbolWhenUnfocused:{none:null,percentage:"%",permille:"‰",basisPoint:"‱"},unformatOnHover:{unformat:!0,doNotUnformat:!1},unformatOnSubmit:{unformat:!0,keepCurrentValue:!1},upDownStep:{progressive:"progressive"},valuesToStrings:{none:null,zeroDash:{0:"-"},oneAroundZero:{"-1":"Min",1:"Max"}},watchExternalChanges:{watch:!0,doNotWatch:!1},wheelOn:{focus:"focus",hover:"hover"},wheelStep:{progressive:"progressive"}};function pe(y){return Object.getOwnPropertyNames(y).forEach(e=>{e==="valuesToStrings"?Object.getOwnPropertyNames(y.valuesToStrings).forEach(s=>{y.valuesToStrings[s]!==null&&Object.freeze(y.valuesToStrings[s])}):e!=="styleRules"&&y[e]!==null&&Object.freeze(y[e])}),Object.freeze(y)}pe(u.options);Object.defineProperty(u,"options",{configurable:!1,writable:!1});u.defaultSettings={allowDecimalPadding:u.options.allowDecimalPadding.always,alwaysAllowDecimalCharacter:u.options.alwaysAllowDecimalCharacter.doNotAllow,caretPositionOnFocus:u.options.caretPositionOnFocus.doNoForceCaretPosition,createLocalList:u.options.createLocalList.createList,currencySymbol:u.options.currencySymbol.none,currencySymbolPlacement:u.options.currencySymbolPlacement.prefix,decimalCharacter:u.options.decimalCharacter.dot,decimalCharacterAlternative:u.options.decimalCharacterAlternative.none,decimalPlaces:u.options.decimalPlaces.two,decimalPlacesRawValue:u.options.decimalPlacesRawValue.useDefault,decimalPlacesShownOnBlur:u.options.decimalPlacesShownOnBlur.useDefault,decimalPlacesShownOnFocus:u.options.decimalPlacesShownOnFocus.useDefault,defaultValueOverride:u.options.defaultValueOverride.doNotOverride,digitalGroupSpacing:u.options.digitalGroupSpacing.three,digitGroupSeparator:u.options.digitGroupSeparator.comma,divisorWhenUnfocused:u.options.divisorWhenUnfocused.none,emptyInputBehavior:u.options.emptyInputBehavior.focus,eventBubbles:u.options.eventBubbles.bubbles,eventIsCancelable:u.options.eventIsCancelable.isCancelable,failOnUnknownOption:u.options.failOnUnknownOption.ignore,formatOnPageLoad:u.options.formatOnPageLoad.format,formulaMode:u.options.formulaMode.disabled,historySize:u.options.historySize.medium,invalidClass:u.options.invalidClass,isCancellable:u.options.isCancellable.cancellable,leadingZero:u.options.leadingZero.deny,maximumValue:u.options.maximumValue.tenTrillions,minimumValue:u.options.minimumValue.tenTrillions,modifyValueOnUpDownArrow:u.options.modifyValueOnUpDownArrow.modifyValue,modifyValueOnWheel:u.options.modifyValueOnWheel.modifyValue,negativeBracketsTypeOnBlur:u.options.negativeBracketsTypeOnBlur.none,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.none,negativeSignCharacter:u.options.negativeSignCharacter.hyphen,negativePositiveSignBehavior:u.options.negativePositiveSignBehavior.doNotToggle,noEventListeners:u.options.noEventListeners.addEvents,onInvalidPaste:u.options.onInvalidPaste.error,outputFormat:u.options.outputFormat.none,overrideMinMaxLimits:u.options.overrideMinMaxLimits.doNotOverride,positiveSignCharacter:u.options.positiveSignCharacter.plus,rawValueDivisor:u.options.rawValueDivisor.none,readOnly:u.options.readOnly.readWrite,roundingMethod:u.options.roundingMethod.halfUpSymmetric,saveValueToSessionStorage:u.options.saveValueToSessionStorage.doNotSave,selectNumberOnly:u.options.selectNumberOnly.selectNumbersOnly,selectOnFocus:u.options.selectOnFocus.select,serializeSpaces:u.options.serializeSpaces.plus,showOnlyNumbersOnFocus:u.options.showOnlyNumbersOnFocus.showAll,showPositiveSign:u.options.showPositiveSign.hide,showWarnings:u.options.showWarnings.show,styleRules:u.options.styleRules.none,suffixText:u.options.suffixText.none,symbolWhenUnfocused:u.options.symbolWhenUnfocused.none,unformatOnHover:u.options.unformatOnHover.unformat,unformatOnSubmit:u.options.unformatOnSubmit.keepCurrentValue,upDownStep:"1",valuesToStrings:u.options.valuesToStrings.none,watchExternalChanges:u.options.watchExternalChanges.doNotWatch,wheelOn:u.options.wheelOn.focus,wheelStep:u.options.wheelStep.progressive};Object.freeze(u.defaultSettings);Object.defineProperty(u,"defaultSettings",{configurable:!1,writable:!1});const C={digitGroupSeparator:u.options.digitGroupSeparator.dot,decimalCharacter:u.options.decimalCharacter.comma,decimalCharacterAlternative:u.options.decimalCharacterAlternative.dot,currencySymbol:" €",currencySymbolPlacement:u.options.currencySymbolPlacement.suffix,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.prefix},k={digitGroupSeparator:u.options.digitGroupSeparator.comma,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:u.options.currencySymbol.dollar,currencySymbolPlacement:u.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.right},Y={digitGroupSeparator:u.options.digitGroupSeparator.comma,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:u.options.currencySymbol.yen,currencySymbolPlacement:u.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.right},ve=i.cloneObject(C);ve.formulaMode=u.options.formulaMode.enabled;const J=i.cloneObject(C);J.minimumValue=0;const z=i.cloneObject(C);z.maximumValue=0;z.negativePositiveSignPlacement=u.options.negativePositiveSignPlacement.prefix;const _=i.cloneObject(C);_.digitGroupSeparator=u.options.digitGroupSeparator.normalSpace;const X=i.cloneObject(_);X.minimumValue=0;const K=i.cloneObject(_);K.maximumValue=0;K.negativePositiveSignPlacement=u.options.negativePositiveSignPlacement.prefix;const x=i.cloneObject(C);x.currencySymbol=u.options.currencySymbol.none;x.suffixText=` ${u.options.suffixText.percentage}`;x.wheelStep=1e-4;x.rawValueDivisor=u.options.rawValueDivisor.percentage;const W=i.cloneObject(x);W.minimumValue=0;const M=i.cloneObject(x);M.maximumValue=0;M.negativePositiveSignPlacement=u.options.negativePositiveSignPlacement.prefix;const Q=i.cloneObject(x);Q.decimalPlaces=3;const ee=i.cloneObject(W);ee.decimalPlaces=3;const te=i.cloneObject(M);te.decimalPlaces=3;const ye=i.cloneObject(k);ye.formulaMode=u.options.formulaMode.enabled;const ie=i.cloneObject(k);ie.minimumValue=0;const R=i.cloneObject(k);R.maximumValue=0;R.negativePositiveSignPlacement=u.options.negativePositiveSignPlacement.prefix;const se=i.cloneObject(R);se.negativeBracketsTypeOnBlur=u.options.negativeBracketsTypeOnBlur.parentheses;const V=i.cloneObject(k);V.currencySymbol=u.options.currencySymbol.none;V.suffixText=u.options.suffixText.percentage;V.wheelStep=1e-4;V.rawValueDivisor=u.options.rawValueDivisor.percentage;const G=i.cloneObject(V);G.minimumValue=0;const $=i.cloneObject(V);$.maximumValue=0;$.negativePositiveSignPlacement=u.options.negativePositiveSignPlacement.prefix;const ne=i.cloneObject(V);ne.decimalPlaces=3;const re=i.cloneObject(G);re.decimalPlaces=3;const ae=i.cloneObject($);ae.decimalPlaces=3;const oe=i.cloneObject(C);oe.currencySymbol=u.options.currencySymbol.lira;u.predefinedOptions={euro:C,euroPos:J,euroNeg:z,euroSpace:_,euroSpacePos:X,euroSpaceNeg:K,percentageEU2dec:x,percentageEU2decPos:W,percentageEU2decNeg:M,percentageEU3dec:Q,percentageEU3decPos:ee,percentageEU3decNeg:te,dollar:k,dollarPos:ie,dollarNeg:R,dollarNegBrackets:se,percentageUS2dec:V,percentageUS2decPos:G,percentageUS2decNeg:$,percentageUS3dec:ne,percentageUS3decPos:re,percentageUS3decNeg:ae,French:C,Spanish:C,NorthAmerican:k,British:{digitGroupSeparator:u.options.digitGroupSeparator.comma,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:u.options.currencySymbol.pound,currencySymbolPlacement:u.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.right},Swiss:{digitGroupSeparator:u.options.digitGroupSeparator.apostrophe,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:" CHF",currencySymbolPlacement:u.options.currencySymbolPlacement.suffix,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.prefix},Japanese:Y,Chinese:Y,Brazilian:{digitGroupSeparator:u.options.digitGroupSeparator.dot,decimalCharacter:u.options.decimalCharacter.comma,currencySymbol:u.options.currencySymbol.real,currencySymbolPlacement:u.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:u.options.negativePositiveSignPlacement.right},Turkish:oe,dotDecimalCharCommaSeparator:{digitGroupSeparator:u.options.digitGroupSeparator.comma,decimalCharacter:u.options.decimalCharacter.dot},commaDecimalCharDotSeparator:{digitGroupSeparator:u.options.digitGroupSeparator.dot,decimalCharacter:u.options.decimalCharacter.comma,decimalCharacterAlternative:u.options.decimalCharacterAlternative.dot},integer:{decimalPlaces:0},integerPos:{minimumValue:u.options.minimumValue.zero,decimalPlaces:0},integerNeg:{maximumValue:u.options.maximumValue.zero,decimalPlaces:0},float:{allowDecimalPadding:u.options.allowDecimalPadding.never},floatPos:{allowDecimalPadding:u.options.allowDecimalPadding.never,minimumValue:u.options.minimumValue.zero,maximumValue:u.options.maximumValue.tenTrillions},floatNeg:{allowDecimalPadding:u.options.allowDecimalPadding.never,minimumValue:u.options.minimumValue.tenTrillions,maximumValue:u.options.maximumValue.zero},numeric:{digitGroupSeparator:u.options.digitGroupSeparator.noSeparator,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:u.options.currencySymbol.none},numericPos:{digitGroupSeparator:u.options.digitGroupSeparator.noSeparator,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:u.options.currencySymbol.none,minimumValue:u.options.minimumValue.zero,maximumValue:u.options.maximumValue.tenTrillions},numericNeg:{digitGroupSeparator:u.options.digitGroupSeparator.noSeparator,decimalCharacter:u.options.decimalCharacter.dot,currencySymbol:u.options.currencySymbol.none,minimumValue:u.options.minimumValue.tenTrillions,maximumValue:u.options.maximumValue.zero}};Object.getOwnPropertyNames(u.predefinedOptions).forEach(y=>{Object.freeze(u.predefinedOptions[y])});Object.freeze(u.predefinedOptions);Object.defineProperty(u,"predefinedOptions",{configurable:!1,writable:!1});export{u as A};
